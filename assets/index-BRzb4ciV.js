var f7=Object.defineProperty;var p7=Object.getPrototypeOf;var m7=Reflect.get;var g7=(t,e,n)=>e in t?f7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>g7(t,typeof e!="symbol"?e+"":e,n);var mi=(t,e,n)=>m7(p7(t),n,e);function E_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function b_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T_={exports:{}},yh={},C_={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc=Symbol.for("react.element"),y7=Symbol.for("react.portal"),v7=Symbol.for("react.fragment"),_7=Symbol.for("react.strict_mode"),w7=Symbol.for("react.profiler"),E7=Symbol.for("react.provider"),b7=Symbol.for("react.context"),T7=Symbol.for("react.forward_ref"),C7=Symbol.for("react.suspense"),I7=Symbol.for("react.memo"),S7=Symbol.for("react.lazy"),X1=Symbol.iterator;function A7(t){return t===null||typeof t!="object"?null:(t=X1&&t[X1]||t["@@iterator"],typeof t=="function"?t:null)}var I_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S_=Object.assign,A_={};function Ca(t,e,n){this.props=t,this.context=e,this.refs=A_,this.updater=n||I_}Ca.prototype.isReactComponent={};Ca.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ca.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x_(){}x_.prototype=Ca.prototype;function sm(t,e,n){this.props=t,this.context=e,this.refs=A_,this.updater=n||I_}var om=sm.prototype=new x_;om.constructor=sm;S_(om,Ca.prototype);om.isPureReactComponent=!0;var Y1=Array.isArray,k_=Object.prototype.hasOwnProperty,am={current:null},P_={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)k_.call(e,r)&&!P_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vc,type:t,key:s,ref:o,props:i,_owner:am.current}}function x7(t,e){return{$$typeof:Vc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vc}function k7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Z1=/\/+/g;function Mf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?k7(""+t.key):e.toString(36)}function Ju(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vc:case y7:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Mf(o,0):r,Y1(i)?(n="",t!=null&&(n=t.replace(Z1,"$&/")+"/"),Ju(i,e,n,"",function(u){return u})):i!=null&&(lm(i)&&(i=x7(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Z1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Y1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Mf(s,a);o+=Ju(s,e,n,l,i)}else if(l=A7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Mf(s,a++),o+=Ju(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tu(t,e,n){if(t==null)return t;var r=[],i=0;return Ju(t,r,"","",function(s){return e.call(n,s,i++)}),r}function P7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},ed={transition:null},R7={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:ed,ReactCurrentOwner:am};function N_(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Tu,forEach:function(t,e,n){Tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tu(t,function(){e++}),e},toArray:function(t){return Tu(t,function(e){return e})||[]},only:function(t){if(!lm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=Ca;we.Fragment=v7;we.Profiler=w7;we.PureComponent=sm;we.StrictMode=_7;we.Suspense=C7;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R7;we.act=N_;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=am.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)k_.call(e,l)&&!P_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Vc,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:b7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:E7,_context:t},t.Consumer=t};we.createElement=R_;we.createFactory=function(t){var e=R_.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:T7,render:t}};we.isValidElement=lm;we.lazy=function(t){return{$$typeof:S7,_payload:{_status:-1,_result:t},_init:P7}};we.memo=function(t,e){return{$$typeof:I7,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=ed.transition;ed.transition={};try{t()}finally{ed.transition=e}};we.unstable_act=N_;we.useCallback=function(t,e){return tn.current.useCallback(t,e)};we.useContext=function(t){return tn.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};we.useEffect=function(t,e){return tn.current.useEffect(t,e)};we.useId=function(){return tn.current.useId()};we.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return tn.current.useMemo(t,e)};we.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};we.useRef=function(t){return tn.current.useRef(t)};we.useState=function(t){return tn.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return tn.current.useTransition()};we.version="18.3.1";C_.exports=we;var V=C_.exports;const Ln=b_(V),N7=E_({__proto__:null,default:Ln},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L7=V,O7=Symbol.for("react.element"),M7=Symbol.for("react.fragment"),D7=Object.prototype.hasOwnProperty,V7=L7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U7={key:!0,ref:!0,__self:!0,__source:!0};function L_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)D7.call(e,r)&&!U7.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:O7,type:t,key:s,ref:o,props:i,_owner:V7.current}}yh.Fragment=M7;yh.jsx=L_;yh.jsxs=L_;T_.exports=yh;var E=T_.exports,kp={},O_={exports:{}},Cn={},M_={exports:{}},D_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ee){var ie=K.length;K.push(ee);e:for(;0<ie;){var fe=ie-1>>>1,pe=K[fe];if(0<i(pe,ee))K[fe]=ee,K[ie]=pe,ie=fe;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ee=K[0],ie=K.pop();if(ie!==ee){K[0]=ie;e:for(var fe=0,pe=K.length,De=pe>>>1;fe<De;){var mt=2*(fe+1)-1,At=K[mt],xt=mt+1,jn=K[xt];if(0>i(At,ie))xt<pe&&0>i(jn,At)?(K[fe]=jn,K[xt]=ie,fe=xt):(K[fe]=At,K[mt]=ie,fe=mt);else if(xt<pe&&0>i(jn,ie))K[fe]=jn,K[xt]=ie,fe=xt;else break e}}return ee}function i(K,ee){var ie=K.sortIndex-ee.sortIndex;return ie!==0?ie:K.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,g=!1,y=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=K)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(u)}}function D(K){if(I=!1,S(K),!y)if(n(l)!==null)y=!0,Yt(z);else{var ee=n(u);ee!==null&&xe(D,ee.startTime-K)}}function z(K,ee){y=!1,I&&(I=!1,C(_),_=-1),g=!0;var ie=p;try{for(S(ee),h=n(l);h!==null&&(!(h.expirationTime>ee)||K&&!k());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,p=h.priorityLevel;var pe=fe(h.expirationTime<=ee);ee=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===n(l)&&r(l),S(ee)}else r(l);h=n(l)}if(h!==null)var De=!0;else{var mt=n(u);mt!==null&&xe(D,mt.startTime-ee),De=!1}return De}finally{h=null,p=ie,g=!1}}var R=!1,T=null,_=-1,b=5,A=-1;function k(){return!(t.unstable_now()-A<b)}function L(){if(T!==null){var K=t.unstable_now();A=K;var ee=!0;try{ee=T(!0,K)}finally{ee?x():(R=!1,T=null)}}else R=!1}var x;if(typeof v=="function")x=function(){v(L)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,St=be.port2;be.port1.onmessage=L,x=function(){St.postMessage(null)}}else x=function(){P(L,0)};function Yt(K){T=K,R||(R=!0,x())}function xe(K,ee){_=P(function(){K(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Yt(z))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(K){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var ie=p;p=ee;try{return K()}finally{p=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ee){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ie=p;p=K;try{return ee()}finally{p=ie}},t.unstable_scheduleCallback=function(K,ee,ie){var fe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?fe+ie:fe):ie=fe,K){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ie+pe,K={id:d++,callback:ee,priorityLevel:K,startTime:ie,expirationTime:pe,sortIndex:-1},ie>fe?(K.sortIndex=ie,e(u,K),n(l)===null&&K===n(u)&&(I?(C(_),_=-1):I=!0,xe(D,ie-fe))):(K.sortIndex=pe,e(l,K),y||g||(y=!0,Yt(z))),K},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(K){var ee=p;return function(){var ie=p;p=ee;try{return K.apply(this,arguments)}finally{p=ie}}}})(D_);M_.exports=D_;var F7=M_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $7=V,bn=F7;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V_=new Set,rc={};function eo(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(rc[t]=e,t=0;t<e.length;t++)V_.add(e[t])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=Object.prototype.hasOwnProperty,j7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J1={},ey={};function z7(t){return Pp.call(ey,t)?!0:Pp.call(J1,t)?!1:j7.test(t)?ey[t]=!0:(J1[t]=!0,!1)}function B7(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function H7(t,e,n,r){if(e===null||typeof e>"u"||B7(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var cm=/[\-:]([a-z])/g;function um(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cm,um);Vt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cm,um);Vt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cm,um);Vt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function dm(t,e,n,r){var i=Vt.hasOwnProperty(e)?Vt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(H7(e,n,i,r)&&(n=null),r||i===null?z7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ii=$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cu=Symbol.for("react.element"),xo=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),hm=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),U_=Symbol.for("react.provider"),F_=Symbol.for("react.context"),fm=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),pm=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),$_=Symbol.for("react.offscreen"),ty=Symbol.iterator;function il(t){return t===null||typeof t!="object"?null:(t=ty&&t[ty]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Df;function Tl(t){if(Df===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Df=e&&e[1]||""}return`
`+Df+t}var Vf=!1;function Uf(t,e){if(!t||Vf)return"";Vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tl(t):""}function W7(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=Uf(t.type,!1),t;case 11:return t=Uf(t.type.render,!1),t;case 1:return t=Uf(t.type,!0),t;default:return""}}function Op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ko:return"Fragment";case xo:return"Portal";case Rp:return"Profiler";case hm:return"StrictMode";case Np:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F_:return(t.displayName||"Context")+".Consumer";case U_:return(t._context.displayName||"Context")+".Provider";case fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pm:return e=t.displayName||null,e!==null?e:Op(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return Op(t(e))}catch{}}return null}function q7(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Op(e);case 8:return e===hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G7(t){var e=j_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Iu(t){t._valueTracker||(t._valueTracker=G7(t))}function z_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mp(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ny(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B_(t,e){e=e.checked,e!=null&&dm(t,"checked",e,!1)}function Dp(t,e){B_(t,e);var n=Xi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vp(t,e.type,Xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ry(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vp(t,e,n){(e!=="number"||Td(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cl=Array.isArray;function Bo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Up(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Cl(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xi(n)}}function H_(t,e){var n=Xi(e.value),r=Xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Su,q_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Su=Su||document.createElement("div"),Su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ic(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K7=["Webkit","ms","Moz","O"];Object.keys(Dl).forEach(function(t){K7.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dl[e]=Dl[t]})});function G_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dl.hasOwnProperty(t)&&Dl[t]?(""+e).trim():e+"px"}function K_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=G_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Q7=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $p(t,e){if(e){if(Q7[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function jp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zp=null;function mm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bp=null,Ho=null,Wo=null;function oy(t){if(t=$c(t)){if(typeof Bp!="function")throw Error(W(280));var e=t.stateNode;e&&(e=bh(e),Bp(t.stateNode,t.type,e))}}function Q_(t){Ho?Wo?Wo.push(t):Wo=[t]:Ho=t}function X_(){if(Ho){var t=Ho,e=Wo;if(Wo=Ho=null,oy(t),e)for(t=0;t<e.length;t++)oy(e[t])}}function Y_(t,e){return t(e)}function Z_(){}var Ff=!1;function J_(t,e,n){if(Ff)return t(e,n);Ff=!0;try{return Y_(t,e,n)}finally{Ff=!1,(Ho!==null||Wo!==null)&&(Z_(),X_())}}function sc(t,e){var n=t.stateNode;if(n===null)return null;var r=bh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Hp=!1;if(Xr)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){Hp=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{Hp=!1}function X7(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Vl=!1,Cd=null,Id=!1,Wp=null,Y7={onError:function(t){Vl=!0,Cd=t}};function Z7(t,e,n,r,i,s,o,a,l){Vl=!1,Cd=null,X7.apply(Y7,arguments)}function J7(t,e,n,r,i,s,o,a,l){if(Z7.apply(this,arguments),Vl){if(Vl){var u=Cd;Vl=!1,Cd=null}else throw Error(W(198));Id||(Id=!0,Wp=u)}}function to(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ew(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ay(t){if(to(t)!==t)throw Error(W(188))}function eT(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ay(i),t;if(s===r)return ay(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function tw(t){return t=eT(t),t!==null?nw(t):null}function nw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nw(t);if(e!==null)return e;t=t.sibling}return null}var rw=bn.unstable_scheduleCallback,ly=bn.unstable_cancelCallback,tT=bn.unstable_shouldYield,nT=bn.unstable_requestPaint,ct=bn.unstable_now,rT=bn.unstable_getCurrentPriorityLevel,gm=bn.unstable_ImmediatePriority,iw=bn.unstable_UserBlockingPriority,Sd=bn.unstable_NormalPriority,iT=bn.unstable_LowPriority,sw=bn.unstable_IdlePriority,vh=null,yr=null;function sT(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(vh,t,void 0,(t.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:lT,oT=Math.log,aT=Math.LN2;function lT(t){return t>>>=0,t===0?32:31-(oT(t)/aT|0)|0}var Au=64,xu=4194304;function Il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ad(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Il(a):(s&=o,s!==0&&(r=Il(s)))}else o=n&~i,o!==0?r=Il(o):s!==0&&(r=Il(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jn(e),i=1<<n,r|=t[n],e&=~i;return r}function cT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Jn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=cT(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ow(){var t=Au;return Au<<=1,!(Au&4194240)&&(Au=64),t}function $f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jn(e),t[e]=n}function dT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Jn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ym(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function aw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lw,vm,cw,uw,dw,Gp=!1,ku=[],Oi=null,Mi=null,Di=null,oc=new Map,ac=new Map,Ii=[],hT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cy(t,e){switch(t){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(e.pointerId)}}function ol(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=$c(e),e!==null&&vm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fT(t,e,n,r,i){switch(e){case"focusin":return Oi=ol(Oi,t,e,n,r,i),!0;case"dragenter":return Mi=ol(Mi,t,e,n,r,i),!0;case"mouseover":return Di=ol(Di,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return oc.set(s,ol(oc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ac.set(s,ol(ac.get(s)||null,t,e,n,r,i)),!0}return!1}function hw(t){var e=As(t.target);if(e!==null){var n=to(e);if(n!==null){if(e=n.tag,e===13){if(e=ew(n),e!==null){t.blockedOn=e,dw(t.priority,function(){cw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function td(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zp=r,n.target.dispatchEvent(r),zp=null}else return e=$c(n),e!==null&&vm(e),t.blockedOn=n,!1;e.shift()}return!0}function uy(t,e,n){td(t)&&n.delete(e)}function pT(){Gp=!1,Oi!==null&&td(Oi)&&(Oi=null),Mi!==null&&td(Mi)&&(Mi=null),Di!==null&&td(Di)&&(Di=null),oc.forEach(uy),ac.forEach(uy)}function al(t,e){t.blockedOn===e&&(t.blockedOn=null,Gp||(Gp=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,pT)))}function lc(t){function e(i){return al(i,t)}if(0<ku.length){al(ku[0],t);for(var n=1;n<ku.length;n++){var r=ku[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Oi!==null&&al(Oi,t),Mi!==null&&al(Mi,t),Di!==null&&al(Di,t),oc.forEach(e),ac.forEach(e),n=0;n<Ii.length;n++)r=Ii[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)hw(n),n.blockedOn===null&&Ii.shift()}var qo=ii.ReactCurrentBatchConfig,xd=!0;function mT(t,e,n,r){var i=Me,s=qo.transition;qo.transition=null;try{Me=1,_m(t,e,n,r)}finally{Me=i,qo.transition=s}}function gT(t,e,n,r){var i=Me,s=qo.transition;qo.transition=null;try{Me=4,_m(t,e,n,r)}finally{Me=i,qo.transition=s}}function _m(t,e,n,r){if(xd){var i=Kp(t,e,n,r);if(i===null)Xf(t,e,r,kd,n),cy(t,r);else if(fT(i,t,e,n,r))r.stopPropagation();else if(cy(t,r),e&4&&-1<hT.indexOf(t)){for(;i!==null;){var s=$c(i);if(s!==null&&lw(s),s=Kp(t,e,n,r),s===null&&Xf(t,e,r,kd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xf(t,e,r,null,n)}}var kd=null;function Kp(t,e,n,r){if(kd=null,t=mm(r),t=As(t),t!==null)if(e=to(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ew(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kd=t,null}function fw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rT()){case gm:return 1;case iw:return 4;case Sd:case iT:return 16;case sw:return 536870912;default:return 16}default:return 16}}var Pi=null,wm=null,nd=null;function pw(){if(nd)return nd;var t,e=wm,n=e.length,r,i="value"in Pi?Pi.value:Pi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nd=i.slice(t,1<r?1-r:void 0)}function rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pu(){return!0}function dy(){return!1}function In(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pu:dy,this.isPropagationStopped=dy,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pu)},persist:function(){},isPersistent:Pu}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Em=In(Ia),Fc=tt({},Ia,{view:0,detail:0}),yT=In(Fc),jf,zf,ll,_h=tt({},Fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ll&&(ll&&t.type==="mousemove"?(jf=t.screenX-ll.screenX,zf=t.screenY-ll.screenY):zf=jf=0,ll=t),jf)},movementY:function(t){return"movementY"in t?t.movementY:zf}}),hy=In(_h),vT=tt({},_h,{dataTransfer:0}),_T=In(vT),wT=tt({},Fc,{relatedTarget:0}),Bf=In(wT),ET=tt({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),bT=In(ET),TT=tt({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CT=In(TT),IT=tt({},Ia,{data:0}),fy=In(IT),ST={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xT[t])?!!e[t]:!1}function bm(){return kT}var PT=tt({},Fc,{key:function(t){if(t.key){var e=ST[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bm,charCode:function(t){return t.type==="keypress"?rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RT=In(PT),NT=tt({},_h,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),py=In(NT),LT=tt({},Fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bm}),OT=In(LT),MT=tt({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),DT=In(MT),VT=tt({},_h,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UT=In(VT),FT=[9,13,27,32],Tm=Xr&&"CompositionEvent"in window,Ul=null;Xr&&"documentMode"in document&&(Ul=document.documentMode);var $T=Xr&&"TextEvent"in window&&!Ul,mw=Xr&&(!Tm||Ul&&8<Ul&&11>=Ul),my=" ",gy=!1;function gw(t,e){switch(t){case"keyup":return FT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Po=!1;function jT(t,e){switch(t){case"compositionend":return yw(e);case"keypress":return e.which!==32?null:(gy=!0,my);case"textInput":return t=e.data,t===my&&gy?null:t;default:return null}}function zT(t,e){if(Po)return t==="compositionend"||!Tm&&gw(t,e)?(t=pw(),nd=wm=Pi=null,Po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mw&&e.locale!=="ko"?null:e.data;default:return null}}var BT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BT[t.type]:e==="textarea"}function vw(t,e,n,r){Q_(r),e=Pd(e,"onChange"),0<e.length&&(n=new Em("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fl=null,cc=null;function HT(t){kw(t,0)}function wh(t){var e=Lo(t);if(z_(e))return t}function WT(t,e){if(t==="change")return e}var _w=!1;if(Xr){var Hf;if(Xr){var Wf="oninput"in document;if(!Wf){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),Wf=typeof vy.oninput=="function"}Hf=Wf}else Hf=!1;_w=Hf&&(!document.documentMode||9<document.documentMode)}function _y(){Fl&&(Fl.detachEvent("onpropertychange",ww),cc=Fl=null)}function ww(t){if(t.propertyName==="value"&&wh(cc)){var e=[];vw(e,cc,t,mm(t)),J_(HT,e)}}function qT(t,e,n){t==="focusin"?(_y(),Fl=e,cc=n,Fl.attachEvent("onpropertychange",ww)):t==="focusout"&&_y()}function GT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wh(cc)}function KT(t,e){if(t==="click")return wh(e)}function QT(t,e){if(t==="input"||t==="change")return wh(e)}function XT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ir=typeof Object.is=="function"?Object.is:XT;function uc(t,e){if(ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Pp.call(e,i)||!ir(t[i],e[i]))return!1}return!0}function wy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ey(t,e){var n=wy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wy(n)}}function Ew(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ew(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bw(){for(var t=window,e=Td();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Td(t.document)}return e}function Cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YT(t){var e=bw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ew(n.ownerDocument.documentElement,n)){if(r!==null&&Cm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ey(n,s);var o=Ey(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZT=Xr&&"documentMode"in document&&11>=document.documentMode,Ro=null,Qp=null,$l=null,Xp=!1;function by(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xp||Ro==null||Ro!==Td(r)||(r=Ro,"selectionStart"in r&&Cm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$l&&uc($l,r)||($l=r,r=Pd(Qp,"onSelect"),0<r.length&&(e=new Em("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ro)))}function Ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var No={animationend:Ru("Animation","AnimationEnd"),animationiteration:Ru("Animation","AnimationIteration"),animationstart:Ru("Animation","AnimationStart"),transitionend:Ru("Transition","TransitionEnd")},qf={},Tw={};Xr&&(Tw=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Eh(t){if(qf[t])return qf[t];if(!No[t])return t;var e=No[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tw)return qf[t]=e[n];return t}var Cw=Eh("animationend"),Iw=Eh("animationiteration"),Sw=Eh("animationstart"),Aw=Eh("transitionend"),xw=new Map,Ty="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){xw.set(t,e),eo(e,[t])}for(var Gf=0;Gf<Ty.length;Gf++){var Kf=Ty[Gf],JT=Kf.toLowerCase(),eC=Kf[0].toUpperCase()+Kf.slice(1);rs(JT,"on"+eC)}rs(Cw,"onAnimationEnd");rs(Iw,"onAnimationIteration");rs(Sw,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(Aw,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function Cy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,J7(r,e,void 0,t),t.currentTarget=null}function kw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Cy(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Cy(i,a,u),s=l}}}if(Id)throw t=Wp,Id=!1,Wp=null,t}function We(t,e){var n=e[t0];n===void 0&&(n=e[t0]=new Set);var r=t+"__bubble";n.has(r)||(Pw(e,t,2,!1),n.add(r))}function Qf(t,e,n){var r=0;e&&(r|=4),Pw(n,t,r,e)}var Nu="_reactListening"+Math.random().toString(36).slice(2);function dc(t){if(!t[Nu]){t[Nu]=!0,V_.forEach(function(n){n!=="selectionchange"&&(tC.has(n)||Qf(n,!1,t),Qf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nu]||(e[Nu]=!0,Qf("selectionchange",!1,e))}}function Pw(t,e,n,r){switch(fw(e)){case 1:var i=mT;break;case 4:i=gT;break;default:i=_m}n=i.bind(null,e,n,t),i=void 0,!Hp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=As(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}J_(function(){var u=s,d=mm(n),h=[];e:{var p=xw.get(t);if(p!==void 0){var g=Em,y=t;switch(t){case"keypress":if(rd(n)===0)break e;case"keydown":case"keyup":g=RT;break;case"focusin":y="focus",g=Bf;break;case"focusout":y="blur",g=Bf;break;case"beforeblur":case"afterblur":g=Bf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=_T;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=OT;break;case Cw:case Iw:case Sw:g=bT;break;case Aw:g=DT;break;case"scroll":g=yT;break;case"wheel":g=UT;break;case"copy":case"cut":case"paste":g=CT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=py}var I=(e&4)!==0,P=!I&&t==="scroll",C=I?p!==null?p+"Capture":null:p;I=[];for(var v=u,S;v!==null;){S=v;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,C!==null&&(D=sc(v,C),D!=null&&I.push(hc(v,D,S)))),P)break;v=v.return}0<I.length&&(p=new g(p,y,null,n,d),h.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==zp&&(y=n.relatedTarget||n.fromElement)&&(As(y)||y[Yr]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?As(y):null,y!==null&&(P=to(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(I=hy,D="onMouseLeave",C="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(I=py,D="onPointerLeave",C="onPointerEnter",v="pointer"),P=g==null?p:Lo(g),S=y==null?p:Lo(y),p=new I(D,v+"leave",g,n,d),p.target=P,p.relatedTarget=S,D=null,As(d)===u&&(I=new I(C,v+"enter",y,n,d),I.target=S,I.relatedTarget=P,D=I),P=D,g&&y)t:{for(I=g,C=y,v=0,S=I;S;S=wo(S))v++;for(S=0,D=C;D;D=wo(D))S++;for(;0<v-S;)I=wo(I),v--;for(;0<S-v;)C=wo(C),S--;for(;v--;){if(I===C||C!==null&&I===C.alternate)break t;I=wo(I),C=wo(C)}I=null}else I=null;g!==null&&Iy(h,p,g,I,!1),y!==null&&P!==null&&Iy(h,P,y,I,!0)}}e:{if(p=u?Lo(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var z=WT;else if(yy(p))if(_w)z=QT;else{z=GT;var R=qT}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=KT);if(z&&(z=z(t,u))){vw(h,z,n,d);break e}R&&R(t,p,u),t==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&Vp(p,"number",p.value)}switch(R=u?Lo(u):window,t){case"focusin":(yy(R)||R.contentEditable==="true")&&(Ro=R,Qp=u,$l=null);break;case"focusout":$l=Qp=Ro=null;break;case"mousedown":Xp=!0;break;case"contextmenu":case"mouseup":case"dragend":Xp=!1,by(h,n,d);break;case"selectionchange":if(ZT)break;case"keydown":case"keyup":by(h,n,d)}var T;if(Tm)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Po?gw(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(mw&&n.locale!=="ko"&&(Po||_!=="onCompositionStart"?_==="onCompositionEnd"&&Po&&(T=pw()):(Pi=d,wm="value"in Pi?Pi.value:Pi.textContent,Po=!0)),R=Pd(u,_),0<R.length&&(_=new fy(_,t,null,n,d),h.push({event:_,listeners:R}),T?_.data=T:(T=yw(n),T!==null&&(_.data=T)))),(T=$T?jT(t,n):zT(t,n))&&(u=Pd(u,"onBeforeInput"),0<u.length&&(d=new fy("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}kw(h,e)})}function hc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sc(t,n),s!=null&&r.unshift(hc(t,s,i)),s=sc(t,e),s!=null&&r.push(hc(t,s,i))),t=t.return}return r}function wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Iy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=sc(n,s),l!=null&&o.unshift(hc(n,l,a))):i||(l=sc(n,s),l!=null&&o.push(hc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nC=/\r\n?/g,rC=/\u0000|\uFFFD/g;function Sy(t){return(typeof t=="string"?t:""+t).replace(nC,`
`).replace(rC,"")}function Lu(t,e,n){if(e=Sy(e),Sy(t)!==e&&n)throw Error(W(425))}function Rd(){}var Yp=null,Zp=null;function Jp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var e0=typeof setTimeout=="function"?setTimeout:void 0,iC=typeof clearTimeout=="function"?clearTimeout:void 0,Ay=typeof Promise=="function"?Promise:void 0,sC=typeof queueMicrotask=="function"?queueMicrotask:typeof Ay<"u"?function(t){return Ay.resolve(null).then(t).catch(oC)}:e0;function oC(t){setTimeout(function(){throw t})}function Yf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),lc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lc(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),gr="__reactFiber$"+Sa,fc="__reactProps$"+Sa,Yr="__reactContainer$"+Sa,t0="__reactEvents$"+Sa,aC="__reactListeners$"+Sa,lC="__reactHandles$"+Sa;function As(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yr]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xy(t);t!==null;){if(n=t[gr])return n;t=xy(t)}return e}t=n,n=t.parentNode}return null}function $c(t){return t=t[gr]||t[Yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function bh(t){return t[fc]||null}var n0=[],Oo=-1;function is(t){return{current:t}}function Ge(t){0>Oo||(t.current=n0[Oo],n0[Oo]=null,Oo--)}function $e(t,e){Oo++,n0[Oo]=t.current,t.current=e}var Yi={},Qt=is(Yi),cn=is(!1),$s=Yi;function ea(t,e){var n=t.type.contextTypes;if(!n)return Yi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function un(t){return t=t.childContextTypes,t!=null}function Nd(){Ge(cn),Ge(Qt)}function ky(t,e,n){if(Qt.current!==Yi)throw Error(W(168));$e(Qt,e),$e(cn,n)}function Rw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,q7(t)||"Unknown",i));return tt({},n,r)}function Ld(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yi,$s=Qt.current,$e(Qt,t),$e(cn,cn.current),!0}function Py(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=Rw(t,e,$s),r.__reactInternalMemoizedMergedChildContext=t,Ge(cn),Ge(Qt),$e(Qt,t)):Ge(cn),$e(cn,n)}var Fr=null,Th=!1,Zf=!1;function Nw(t){Fr===null?Fr=[t]:Fr.push(t)}function cC(t){Th=!0,Nw(t)}function ss(){if(!Zf&&Fr!==null){Zf=!0;var t=0,e=Me;try{var n=Fr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fr=null,Th=!1}catch(i){throw Fr!==null&&(Fr=Fr.slice(t+1)),rw(gm,ss),i}finally{Me=e,Zf=!1}}return null}var Mo=[],Do=0,Od=null,Md=0,Pn=[],Rn=0,js=null,jr=1,zr="";function Ts(t,e){Mo[Do++]=Md,Mo[Do++]=Od,Od=t,Md=e}function Lw(t,e,n){Pn[Rn++]=jr,Pn[Rn++]=zr,Pn[Rn++]=js,js=t;var r=jr;t=zr;var i=32-Jn(r)-1;r&=~(1<<i),n+=1;var s=32-Jn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,jr=1<<32-Jn(e)+i|n<<i|r,zr=s+t}else jr=1<<s|n<<i|r,zr=t}function Im(t){t.return!==null&&(Ts(t,1),Lw(t,1,0))}function Sm(t){for(;t===Od;)Od=Mo[--Do],Mo[Do]=null,Md=Mo[--Do],Mo[Do]=null;for(;t===js;)js=Pn[--Rn],Pn[Rn]=null,zr=Pn[--Rn],Pn[Rn]=null,jr=Pn[--Rn],Pn[Rn]=null}var wn=null,vn=null,Ke=!1,Yn=null;function Ow(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ry(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=js!==null?{id:jr,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function r0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function i0(t){if(Ke){var e=vn;if(e){var n=e;if(!Ry(t,e)){if(r0(t))throw Error(W(418));e=Vi(n.nextSibling);var r=wn;e&&Ry(t,e)?Ow(r,n):(t.flags=t.flags&-4097|2,Ke=!1,wn=t)}}else{if(r0(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ke=!1,wn=t}}}function Ny(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Ou(t){if(t!==wn)return!1;if(!Ke)return Ny(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jp(t.type,t.memoizedProps)),e&&(e=vn)){if(r0(t))throw Mw(),Error(W(418));for(;e;)Ow(t,e),e=Vi(e.nextSibling)}if(Ny(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?Vi(t.stateNode.nextSibling):null;return!0}function Mw(){for(var t=vn;t;)t=Vi(t.nextSibling)}function ta(){vn=wn=null,Ke=!1}function Am(t){Yn===null?Yn=[t]:Yn.push(t)}var uC=ii.ReactCurrentBatchConfig;function cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Mu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ly(t){var e=t._init;return e(t._payload)}function Dw(t){function e(C,v){if(t){var S=C.deletions;S===null?(C.deletions=[v],C.flags|=16):S.push(v)}}function n(C,v){if(!t)return null;for(;v!==null;)e(C,v),v=v.sibling;return null}function r(C,v){for(C=new Map;v!==null;)v.key!==null?C.set(v.key,v):C.set(v.index,v),v=v.sibling;return C}function i(C,v){return C=ji(C,v),C.index=0,C.sibling=null,C}function s(C,v,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<v?(C.flags|=2,v):S):(C.flags|=2,v)):(C.flags|=1048576,v)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,v,S,D){return v===null||v.tag!==6?(v=sp(S,C.mode,D),v.return=C,v):(v=i(v,S),v.return=C,v)}function l(C,v,S,D){var z=S.type;return z===ko?d(C,v,S.props.children,D,S.key):v!==null&&(v.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ti&&Ly(z)===v.type)?(D=i(v,S.props),D.ref=cl(C,v,S),D.return=C,D):(D=ud(S.type,S.key,S.props,null,C.mode,D),D.ref=cl(C,v,S),D.return=C,D)}function u(C,v,S,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=op(S,C.mode,D),v.return=C,v):(v=i(v,S.children||[]),v.return=C,v)}function d(C,v,S,D,z){return v===null||v.tag!==7?(v=Ds(S,C.mode,D,z),v.return=C,v):(v=i(v,S),v.return=C,v)}function h(C,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=sp(""+v,C.mode,S),v.return=C,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cu:return S=ud(v.type,v.key,v.props,null,C.mode,S),S.ref=cl(C,null,v),S.return=C,S;case xo:return v=op(v,C.mode,S),v.return=C,v;case Ti:var D=v._init;return h(C,D(v._payload),S)}if(Cl(v)||il(v))return v=Ds(v,C.mode,S,null),v.return=C,v;Mu(C,v)}return null}function p(C,v,S,D){var z=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return z!==null?null:a(C,v,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cu:return S.key===z?l(C,v,S,D):null;case xo:return S.key===z?u(C,v,S,D):null;case Ti:return z=S._init,p(C,v,z(S._payload),D)}if(Cl(S)||il(S))return z!==null?null:d(C,v,S,D,null);Mu(C,S)}return null}function g(C,v,S,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return C=C.get(S)||null,a(v,C,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Cu:return C=C.get(D.key===null?S:D.key)||null,l(v,C,D,z);case xo:return C=C.get(D.key===null?S:D.key)||null,u(v,C,D,z);case Ti:var R=D._init;return g(C,v,S,R(D._payload),z)}if(Cl(D)||il(D))return C=C.get(S)||null,d(v,C,D,z,null);Mu(v,D)}return null}function y(C,v,S,D){for(var z=null,R=null,T=v,_=v=0,b=null;T!==null&&_<S.length;_++){T.index>_?(b=T,T=null):b=T.sibling;var A=p(C,T,S[_],D);if(A===null){T===null&&(T=b);break}t&&T&&A.alternate===null&&e(C,T),v=s(A,v,_),R===null?z=A:R.sibling=A,R=A,T=b}if(_===S.length)return n(C,T),Ke&&Ts(C,_),z;if(T===null){for(;_<S.length;_++)T=h(C,S[_],D),T!==null&&(v=s(T,v,_),R===null?z=T:R.sibling=T,R=T);return Ke&&Ts(C,_),z}for(T=r(C,T);_<S.length;_++)b=g(T,C,_,S[_],D),b!==null&&(t&&b.alternate!==null&&T.delete(b.key===null?_:b.key),v=s(b,v,_),R===null?z=b:R.sibling=b,R=b);return t&&T.forEach(function(k){return e(C,k)}),Ke&&Ts(C,_),z}function I(C,v,S,D){var z=il(S);if(typeof z!="function")throw Error(W(150));if(S=z.call(S),S==null)throw Error(W(151));for(var R=z=null,T=v,_=v=0,b=null,A=S.next();T!==null&&!A.done;_++,A=S.next()){T.index>_?(b=T,T=null):b=T.sibling;var k=p(C,T,A.value,D);if(k===null){T===null&&(T=b);break}t&&T&&k.alternate===null&&e(C,T),v=s(k,v,_),R===null?z=k:R.sibling=k,R=k,T=b}if(A.done)return n(C,T),Ke&&Ts(C,_),z;if(T===null){for(;!A.done;_++,A=S.next())A=h(C,A.value,D),A!==null&&(v=s(A,v,_),R===null?z=A:R.sibling=A,R=A);return Ke&&Ts(C,_),z}for(T=r(C,T);!A.done;_++,A=S.next())A=g(T,C,_,A.value,D),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?_:A.key),v=s(A,v,_),R===null?z=A:R.sibling=A,R=A);return t&&T.forEach(function(L){return e(C,L)}),Ke&&Ts(C,_),z}function P(C,v,S,D){if(typeof S=="object"&&S!==null&&S.type===ko&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Cu:e:{for(var z=S.key,R=v;R!==null;){if(R.key===z){if(z=S.type,z===ko){if(R.tag===7){n(C,R.sibling),v=i(R,S.props.children),v.return=C,C=v;break e}}else if(R.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ti&&Ly(z)===R.type){n(C,R.sibling),v=i(R,S.props),v.ref=cl(C,R,S),v.return=C,C=v;break e}n(C,R);break}else e(C,R);R=R.sibling}S.type===ko?(v=Ds(S.props.children,C.mode,D,S.key),v.return=C,C=v):(D=ud(S.type,S.key,S.props,null,C.mode,D),D.ref=cl(C,v,S),D.return=C,C=D)}return o(C);case xo:e:{for(R=S.key;v!==null;){if(v.key===R)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(C,v.sibling),v=i(v,S.children||[]),v.return=C,C=v;break e}else{n(C,v);break}else e(C,v);v=v.sibling}v=op(S,C.mode,D),v.return=C,C=v}return o(C);case Ti:return R=S._init,P(C,v,R(S._payload),D)}if(Cl(S))return y(C,v,S,D);if(il(S))return I(C,v,S,D);Mu(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(C,v.sibling),v=i(v,S),v.return=C,C=v):(n(C,v),v=sp(S,C.mode,D),v.return=C,C=v),o(C)):n(C,v)}return P}var na=Dw(!0),Vw=Dw(!1),Dd=is(null),Vd=null,Vo=null,xm=null;function km(){xm=Vo=Vd=null}function Pm(t){var e=Dd.current;Ge(Dd),t._currentValue=e}function s0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Go(t,e){Vd=t,xm=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(xm!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(Vd===null)throw Error(W(308));Vo=t,Vd.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var xs=null;function Rm(t){xs===null?xs=[t]:xs.push(t)}function Uw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Rm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zr(t,r)}function Zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ci=!1;function Nm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zr(t,n)}return i=r.interleaved,i===null?(e.next=e,Rm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zr(t,n)}function id(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ym(t,n)}}function Oy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ud(t,e,n,r){var i=t.updateQueue;Ci=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,I=a;switch(p=e,g=n,I.tag){case 1:if(y=I.payload,typeof y=="function"){h=y.call(g,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=I.payload,p=typeof y=="function"?y.call(g,h,p):y,p==null)break e;h=tt({},h,p);break e;case 2:Ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Bs|=o,t.lanes=o,t.memoizedState=h}}function My(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var jc={},vr=is(jc),pc=is(jc),mc=is(jc);function ks(t){if(t===jc)throw Error(W(174));return t}function Lm(t,e){switch($e(mc,e),$e(pc,t),$e(vr,jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fp(e,t)}Ge(vr),$e(vr,e)}function ra(){Ge(vr),Ge(pc),Ge(mc)}function $w(t){ks(mc.current);var e=ks(vr.current),n=Fp(e,t.type);e!==n&&($e(pc,t),$e(vr,n))}function Om(t){pc.current===t&&(Ge(vr),Ge(pc))}var Ze=is(0);function Fd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jf=[];function Mm(){for(var t=0;t<Jf.length;t++)Jf[t]._workInProgressVersionPrimary=null;Jf.length=0}var sd=ii.ReactCurrentDispatcher,ep=ii.ReactCurrentBatchConfig,zs=0,et=null,_t=null,Ct=null,$d=!1,jl=!1,gc=0,dC=0;function Bt(){throw Error(W(321))}function Dm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ir(t[n],e[n]))return!1;return!0}function Vm(t,e,n,r,i,s){if(zs=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sd.current=t===null||t.memoizedState===null?mC:gC,t=n(r,i),jl){s=0;do{if(jl=!1,gc=0,25<=s)throw Error(W(301));s+=1,Ct=_t=null,e.updateQueue=null,sd.current=yC,t=n(r,i)}while(jl)}if(sd.current=jd,e=_t!==null&&_t.next!==null,zs=0,Ct=_t=et=null,$d=!1,e)throw Error(W(300));return t}function Um(){var t=gc!==0;return gc=0,t}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?et.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Un(){if(_t===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Ct===null?et.memoizedState:Ct.next;if(e!==null)Ct=e,_t=t;else{if(t===null)throw Error(W(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Ct===null?et.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function yc(t,e){return typeof e=="function"?e(t):e}function tp(t){var e=Un(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=_t,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((zs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,et.lanes|=d,Bs|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ir(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,et.lanes|=s,Bs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function np(t){var e=Un(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ir(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function jw(){}function zw(t,e){var n=et,r=Un(),i=e(),s=!ir(r.memoizedState,i);if(s&&(r.memoizedState=i,ln=!0),r=r.queue,Fm(Ww.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,vc(9,Hw.bind(null,n,r,i,e),void 0,null),It===null)throw Error(W(349));zs&30||Bw(n,e,i)}return i}function Bw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Hw(t,e,n,r){e.value=n,e.getSnapshot=r,qw(e)&&Gw(t)}function Ww(t,e,n){return n(function(){qw(e)&&Gw(t)})}function qw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ir(t,n)}catch{return!0}}function Gw(t){var e=Zr(t,1);e!==null&&er(e,t,1,-1)}function Dy(t){var e=fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:t},e.queue=t,t=t.dispatch=pC.bind(null,et,t),[e.memoizedState,t]}function vc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kw(){return Un().memoizedState}function od(t,e,n,r){var i=fr();et.flags|=t,i.memoizedState=vc(1|e,n,void 0,r===void 0?null:r)}function Ch(t,e,n,r){var i=Un();r=r===void 0?null:r;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,r!==null&&Dm(r,o.deps)){i.memoizedState=vc(e,n,s,r);return}}et.flags|=t,i.memoizedState=vc(1|e,n,s,r)}function Vy(t,e){return od(8390656,8,t,e)}function Fm(t,e){return Ch(2048,8,t,e)}function Qw(t,e){return Ch(4,2,t,e)}function Xw(t,e){return Ch(4,4,t,e)}function Yw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zw(t,e,n){return n=n!=null?n.concat([t]):null,Ch(4,4,Yw.bind(null,e,t),n)}function $m(){}function Jw(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e5(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t5(t,e,n){return zs&21?(ir(n,e)||(n=ow(),et.lanes|=n,Bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function hC(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=ep.transition;ep.transition={};try{t(!1),e()}finally{Me=n,ep.transition=r}}function n5(){return Un().memoizedState}function fC(t,e,n){var r=$i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r5(t))i5(e,n);else if(n=Uw(t,e,n,r),n!==null){var i=en();er(n,t,r,i),s5(n,e,r)}}function pC(t,e,n){var r=$i(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r5(t))i5(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ir(a,o)){var l=e.interleaved;l===null?(i.next=i,Rm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Uw(t,e,i,r),n!==null&&(i=en(),er(n,t,r,i),s5(n,e,r))}}function r5(t){var e=t.alternate;return t===et||e!==null&&e===et}function i5(t,e){jl=$d=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s5(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ym(t,n)}}var jd={readContext:Vn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},mC={readContext:Vn,useCallback:function(t,e){return fr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:Vy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,od(4194308,4,Yw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return od(4194308,4,t,e)},useInsertionEffect:function(t,e){return od(4,2,t,e)},useMemo:function(t,e){var n=fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fC.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=fr();return t={current:t},e.memoizedState=t},useState:Dy,useDebugValue:$m,useDeferredValue:function(t){return fr().memoizedState=t},useTransition:function(){var t=Dy(!1),e=t[0];return t=hC.bind(null,t[1]),fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,i=fr();if(Ke){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),It===null)throw Error(W(349));zs&30||Bw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Vy(Ww.bind(null,r,s,t),[t]),r.flags|=2048,vc(9,Hw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=fr(),e=It.identifierPrefix;if(Ke){var n=zr,r=jr;n=(r&~(1<<32-Jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gC={readContext:Vn,useCallback:Jw,useContext:Vn,useEffect:Fm,useImperativeHandle:Zw,useInsertionEffect:Qw,useLayoutEffect:Xw,useMemo:e5,useReducer:tp,useRef:Kw,useState:function(){return tp(yc)},useDebugValue:$m,useDeferredValue:function(t){var e=Un();return t5(e,_t.memoizedState,t)},useTransition:function(){var t=tp(yc)[0],e=Un().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:zw,useId:n5,unstable_isNewReconciler:!1},yC={readContext:Vn,useCallback:Jw,useContext:Vn,useEffect:Fm,useImperativeHandle:Zw,useInsertionEffect:Qw,useLayoutEffect:Xw,useMemo:e5,useReducer:np,useRef:Kw,useState:function(){return np(yc)},useDebugValue:$m,useDeferredValue:function(t){var e=Un();return _t===null?e.memoizedState=t:t5(e,_t.memoizedState,t)},useTransition:function(){var t=np(yc)[0],e=Un().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:zw,useId:n5,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function o0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ih={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),i=$i(t),s=qr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,i),e!==null&&(er(e,t,i,r),id(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),i=$i(t),s=qr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,i),e!==null&&(er(e,t,i,r),id(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=$i(t),i=qr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ui(t,i,r),e!==null&&(er(e,t,r,n),id(e,t,r))}};function Uy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!uc(n,r)||!uc(i,s):!0}function o5(t,e,n){var r=!1,i=Yi,s=e.contextType;return typeof s=="object"&&s!==null?s=Vn(s):(i=un(e)?$s:Qt.current,r=e.contextTypes,s=(r=r!=null)?ea(t,i):Yi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ih,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Fy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ih.enqueueReplaceState(e,e.state,null)}function a0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Nm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vn(s):(s=un(e)?$s:Qt.current,i.context=ea(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(o0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ih.enqueueReplaceState(i,i.state,null),Ud(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ia(t,e){try{var n="",r=e;do n+=W7(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function rp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function l0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vC=typeof WeakMap=="function"?WeakMap:Map;function a5(t,e,n){n=qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bd||(Bd=!0,v0=r),l0(t,e)},n}function l5(t,e,n){n=qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){l0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){l0(t,e),typeof r!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $y(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NC.bind(null,t,e,n),e.then(t,t))}function jy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qr(-1,1),e.tag=2,Ui(n,e,1))),n.lanes|=1),t)}var _C=ii.ReactCurrentOwner,ln=!1;function Jt(t,e,n,r){e.child=t===null?Vw(e,null,n,r):na(e,t.child,n,r)}function By(t,e,n,r,i){n=n.render;var s=e.ref;return Go(e,i),r=Vm(t,e,n,r,s,i),n=Um(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jr(t,e,i)):(Ke&&n&&Im(e),e.flags|=1,Jt(t,e,r,i),e.child)}function Hy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Km(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,c5(t,e,s,r,i)):(t=ud(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:uc,n(o,r)&&t.ref===e.ref)return Jr(t,e,i)}return e.flags|=1,t=ji(s,r),t.ref=e.ref,t.return=e,e.child=t}function c5(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(uc(s,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Jr(t,e,i)}return c0(t,e,n,r,i)}function u5(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Fo,gn),gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Fo,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$e(Fo,gn),gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,$e(Fo,gn),gn|=r;return Jt(t,e,i,n),e.child}function d5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function c0(t,e,n,r,i){var s=un(n)?$s:Qt.current;return s=ea(e,s),Go(e,i),n=Vm(t,e,n,r,s,i),r=Um(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jr(t,e,i)):(Ke&&r&&Im(e),e.flags|=1,Jt(t,e,n,i),e.child)}function Wy(t,e,n,r,i){if(un(n)){var s=!0;Ld(e)}else s=!1;if(Go(e,i),e.stateNode===null)ad(t,e),o5(e,n,r),a0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vn(u):(u=un(n)?$s:Qt.current,u=ea(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Fy(e,o,r,u),Ci=!1;var p=e.memoizedState;o.state=p,Ud(e,r,o,i),l=e.memoizedState,a!==r||p!==l||cn.current||Ci?(typeof d=="function"&&(o0(e,n,d,r),l=e.memoizedState),(a=Ci||Uy(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kn(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vn(l):(l=un(n)?$s:Qt.current,l=ea(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Fy(e,o,r,l),Ci=!1,p=e.memoizedState,o.state=p,Ud(e,r,o,i);var y=e.memoizedState;a!==h||p!==y||cn.current||Ci?(typeof g=="function"&&(o0(e,n,g,r),y=e.memoizedState),(u=Ci||Uy(e,n,u,r,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return u0(t,e,n,r,s,i)}function u0(t,e,n,r,i,s){d5(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Py(e,n,!1),Jr(t,e,s);r=e.stateNode,_C.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=na(e,t.child,null,s),e.child=na(e,null,a,s)):Jt(t,e,a,s),e.memoizedState=r.state,i&&Py(e,n,!0),e.child}function h5(t){var e=t.stateNode;e.pendingContext?ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ky(t,e.context,!1),Lm(t,e.containerInfo)}function qy(t,e,n,r,i){return ta(),Am(i),e.flags|=256,Jt(t,e,n,r),e.child}var d0={dehydrated:null,treeContext:null,retryLane:0};function h0(t){return{baseLanes:t,cachePool:null,transitions:null}}function f5(t,e,n){var r=e.pendingProps,i=Ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(Ze,i&1),t===null)return i0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xh(o,r,0,null),t=Ds(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=h0(n),e.memoizedState=d0,t):jm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ji(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ji(a,s):(s=Ds(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?h0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=d0,r}return s=t.child,t=s.sibling,r=ji(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jm(t,e){return e=xh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Du(t,e,n,r){return r!==null&&Am(r),na(e,t.child,null,n),t=jm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=rp(Error(W(422))),Du(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xh({mode:"visible",children:r.children},i,0,null),s=Ds(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&na(e,t.child,null,o),e.child.memoizedState=h0(o),e.memoizedState=d0,s);if(!(e.mode&1))return Du(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=rp(s,r,void 0),Du(t,e,o,r)}if(a=(o&t.childLanes)!==0,ln||a){if(r=It,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zr(t,i),er(r,t,i,-1))}return Gm(),r=rp(Error(W(421))),Du(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=LC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vn=Vi(i.nextSibling),wn=e,Ke=!0,Yn=null,t!==null&&(Pn[Rn++]=jr,Pn[Rn++]=zr,Pn[Rn++]=js,jr=t.id,zr=t.overflow,js=e),e=jm(e,r.children),e.flags|=4096,e)}function Gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),s0(t.return,e,n)}function ip(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function p5(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jt(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gy(t,n,e);else if(t.tag===19)Gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ip(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ip(e,!0,n,null,s);break;case"together":ip(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ad(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EC(t,e,n){switch(e.tag){case 3:h5(e),ta();break;case 5:$w(e);break;case 1:un(e.type)&&Ld(e);break;case 4:Lm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$e(Dd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?f5(t,e,n):($e(Ze,Ze.current&1),t=Jr(t,e,n),t!==null?t.sibling:null);$e(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p5(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,u5(t,e,n)}return Jr(t,e,n)}var m5,f0,g5,y5;m5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f0=function(){};g5=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ks(vr.current);var s=null;switch(n){case"input":i=Mp(t,i),r=Mp(t,r),s=[];break;case"select":i=tt({},i,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":i=Up(t,i),r=Up(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rd)}$p(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&We("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};y5=function(t,e,n,r){n!==r&&(e.flags|=4)};function ul(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bC(t,e,n){var r=e.pendingProps;switch(Sm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return un(e.type)&&Nd(),Ht(e),null;case 3:return r=e.stateNode,ra(),Ge(cn),Ge(Qt),Mm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(E0(Yn),Yn=null))),f0(t,e),Ht(e),null;case 5:Om(e);var i=ks(mc.current);if(n=e.type,t!==null&&e.stateNode!=null)g5(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Ht(e),null}if(t=ks(vr.current),Ou(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gr]=e,r[fc]=s,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<Sl.length;i++)We(Sl[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":ny(r,s),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},We("invalid",r);break;case"textarea":iy(r,s),We("invalid",r)}$p(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,a,t),i=["children",""+a]):rc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",r)}switch(n){case"input":Iu(r),ry(r,s,!0);break;case"textarea":Iu(r),sy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gr]=e,t[fc]=r,m5(t,e,!1,!1),e.stateNode=t;e:{switch(o=jp(n,r),n){case"dialog":We("cancel",t),We("close",t),i=r;break;case"iframe":case"object":case"embed":We("load",t),i=r;break;case"video":case"audio":for(i=0;i<Sl.length;i++)We(Sl[i],t);i=r;break;case"source":We("error",t),i=r;break;case"img":case"image":case"link":We("error",t),We("load",t),i=r;break;case"details":We("toggle",t),i=r;break;case"input":ny(t,r),i=Mp(t,r),We("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tt({},r,{value:void 0}),We("invalid",t);break;case"textarea":iy(t,r),i=Up(t,r),We("invalid",t);break;default:i=r}$p(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?K_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&q_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ic(t,l):typeof l=="number"&&ic(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&We("scroll",t):l!=null&&dm(t,s,l,o))}switch(n){case"input":Iu(t),ry(t,r,!1);break;case"textarea":Iu(t),sy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)y5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=ks(mc.current),ks(vr.current),Ou(e)){if(r=e.stateNode,n=e.memoizedProps,r[gr]=e,(s=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gr]=e,e.stateNode=r}return Ht(e),null;case 13:if(Ge(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&vn!==null&&e.mode&1&&!(e.flags&128))Mw(),ta(),e.flags|=98560,s=!1;else if(s=Ou(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[gr]=e}else ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),s=!1}else Yn!==null&&(E0(Yn),Yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?wt===0&&(wt=3):Gm())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return ra(),f0(t,e),t===null&&dc(e.stateNode.containerInfo),Ht(e),null;case 10:return Pm(e.type._context),Ht(e),null;case 17:return un(e.type)&&Nd(),Ht(e),null;case 19:if(Ge(Ze),s=e.memoizedState,s===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ul(s,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fd(t),o!==null){for(e.flags|=128,ul(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ze,Ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&ct()>sa&&(e.flags|=128,r=!0,ul(s,!1),e.lanes=4194304)}else{if(!r)if(t=Fd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ul(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return Ht(e),null}else 2*ct()-s.renderingStartTime>sa&&n!==1073741824&&(e.flags|=128,r=!0,ul(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ct(),e.sibling=null,n=Ze.current,$e(Ze,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return qm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function TC(t,e){switch(Sm(e),e.tag){case 1:return un(e.type)&&Nd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),Ge(cn),Ge(Qt),Mm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Om(e),null;case 13:if(Ge(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ze),null;case 4:return ra(),null;case 10:return Pm(e.type._context),null;case 22:case 23:return qm(),null;case 24:return null;default:return null}}var Vu=!1,Gt=!1,CC=typeof WeakSet=="function"?WeakSet:Set,X=null;function Uo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function p0(t,e,n){try{n()}catch(r){st(t,e,r)}}var Ky=!1;function IC(t,e){if(Yp=xd,t=bw(),Cm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zp={focusedElem:t,selectionRange:n},xd=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var I=y.memoizedProps,P=y.memoizedState,C=e.stateNode,v=C.getSnapshotBeforeUpdate(e.elementType===e.type?I:Kn(e.type,I),P);C.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(D){st(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return y=Ky,Ky=!1,y}function zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&p0(e,n,s)}i=i.next}while(i!==r)}}function Sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function m0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function v5(t){var e=t.alternate;e!==null&&(t.alternate=null,v5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[fc],delete e[t0],delete e[aC],delete e[lC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _5(t){return t.tag===5||t.tag===3||t.tag===4}function Qy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function g0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rd));else if(r!==4&&(t=t.child,t!==null))for(g0(t,e,n),t=t.sibling;t!==null;)g0(t,e,n),t=t.sibling}function y0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(y0(t,e,n),t=t.sibling;t!==null;)y0(t,e,n),t=t.sibling}var Nt=null,Qn=!1;function gi(t,e,n){for(n=n.child;n!==null;)w5(t,e,n),n=n.sibling}function w5(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(vh,n)}catch{}switch(n.tag){case 5:Gt||Uo(n,e);case 6:var r=Nt,i=Qn;Nt=null,gi(t,e,n),Nt=r,Qn=i,Nt!==null&&(Qn?(t=Nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Qn?(t=Nt,n=n.stateNode,t.nodeType===8?Yf(t.parentNode,n):t.nodeType===1&&Yf(t,n),lc(t)):Yf(Nt,n.stateNode));break;case 4:r=Nt,i=Qn,Nt=n.stateNode.containerInfo,Qn=!0,gi(t,e,n),Nt=r,Qn=i;break;case 0:case 11:case 14:case 15:if(!Gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&p0(n,e,o),i=i.next}while(i!==r)}gi(t,e,n);break;case 1:if(!Gt&&(Uo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){st(n,e,a)}gi(t,e,n);break;case 21:gi(t,e,n);break;case 22:n.mode&1?(Gt=(r=Gt)||n.memoizedState!==null,gi(t,e,n),Gt=r):gi(t,e,n);break;default:gi(t,e,n)}}function Xy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CC),e.forEach(function(r){var i=OC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Nt=a.stateNode,Qn=!1;break e;case 3:Nt=a.stateNode.containerInfo,Qn=!0;break e;case 4:Nt=a.stateNode.containerInfo,Qn=!0;break e}a=a.return}if(Nt===null)throw Error(W(160));w5(s,o,i),Nt=null,Qn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){st(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E5(e,t),e=e.sibling}function E5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),dr(t),r&4){try{zl(3,t,t.return),Sh(3,t)}catch(I){st(t,t.return,I)}try{zl(5,t,t.return)}catch(I){st(t,t.return,I)}}break;case 1:Wn(e,t),dr(t),r&512&&n!==null&&Uo(n,n.return);break;case 5:if(Wn(e,t),dr(t),r&512&&n!==null&&Uo(n,n.return),t.flags&32){var i=t.stateNode;try{ic(i,"")}catch(I){st(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&B_(i,s),jp(a,o);var u=jp(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?K_(i,h):d==="dangerouslySetInnerHTML"?q_(i,h):d==="children"?ic(i,h):dm(i,d,h,u)}switch(a){case"input":Dp(i,s);break;case"textarea":H_(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Bo(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Bo(i,!!s.multiple,s.defaultValue,!0):Bo(i,!!s.multiple,s.multiple?[]:"",!1))}i[fc]=s}catch(I){st(t,t.return,I)}}break;case 6:if(Wn(e,t),dr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){st(t,t.return,I)}}break;case 3:if(Wn(e,t),dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lc(e.containerInfo)}catch(I){st(t,t.return,I)}break;case 4:Wn(e,t),dr(t);break;case 13:Wn(e,t),dr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hm=ct())),r&4&&Xy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Gt=(u=Gt)||d,Wn(e,t),Gt=u):Wn(e,t),dr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(p=X,g=p.child,p.tag){case 0:case 11:case 14:case 15:zl(4,p,p.return);break;case 1:Uo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(I){st(r,n,I)}}break;case 5:Uo(p,p.return);break;case 22:if(p.memoizedState!==null){Zy(h);continue}}g!==null?(g.return=p,X=g):Zy(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=G_("display",o))}catch(I){st(t,t.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(I){st(t,t.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wn(e,t),dr(t),r&4&&Xy(t);break;case 21:break;default:Wn(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_5(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ic(i,""),r.flags&=-33);var s=Qy(t);y0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Qy(t);g0(t,a,o);break;default:throw Error(W(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SC(t,e,n){X=t,b5(t)}function b5(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Gt;a=Vu;var u=Gt;if(Vu=o,(Gt=l)&&!u)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?Jy(i):l!==null?(l.return=o,X=l):Jy(i);for(;s!==null;)X=s,b5(s),s=s.sibling;X=i,Vu=a,Gt=u}Yy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):Yy(t)}}function Yy(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gt||Sh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&My(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}My(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&lc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Gt||e.flags&512&&m0(e)}catch(p){st(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Zy(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Jy(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sh(4,e)}catch(l){st(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){st(e,i,l)}}var s=e.return;try{m0(e)}catch(l){st(e,s,l)}break;case 5:var o=e.return;try{m0(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var AC=Math.ceil,zd=ii.ReactCurrentDispatcher,zm=ii.ReactCurrentOwner,Dn=ii.ReactCurrentBatchConfig,ke=0,It=null,ft=null,Mt=0,gn=0,Fo=is(0),wt=0,_c=null,Bs=0,Ah=0,Bm=0,Bl=null,sn=null,Hm=0,sa=1/0,Vr=null,Bd=!1,v0=null,Fi=null,Uu=!1,Ri=null,Hd=0,Hl=0,_0=null,ld=-1,cd=0;function en(){return ke&6?ct():ld!==-1?ld:ld=ct()}function $i(t){return t.mode&1?ke&2&&Mt!==0?Mt&-Mt:uC.transition!==null?(cd===0&&(cd=ow()),cd):(t=Me,t!==0||(t=window.event,t=t===void 0?16:fw(t.type)),t):1}function er(t,e,n,r){if(50<Hl)throw Hl=0,_0=null,Error(W(185));Uc(t,n,r),(!(ke&2)||t!==It)&&(t===It&&(!(ke&2)&&(Ah|=n),wt===4&&Si(t,Mt)),dn(t,r),n===1&&ke===0&&!(e.mode&1)&&(sa=ct()+500,Th&&ss()))}function dn(t,e){var n=t.callbackNode;uT(t,e);var r=Ad(t,t===It?Mt:0);if(r===0)n!==null&&ly(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ly(n),e===1)t.tag===0?cC(e2.bind(null,t)):Nw(e2.bind(null,t)),sC(function(){!(ke&6)&&ss()}),n=null;else{switch(aw(r)){case 1:n=gm;break;case 4:n=iw;break;case 16:n=Sd;break;case 536870912:n=sw;break;default:n=Sd}n=P5(n,T5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function T5(t,e){if(ld=-1,cd=0,ke&6)throw Error(W(327));var n=t.callbackNode;if(Ko()&&t.callbackNode!==n)return null;var r=Ad(t,t===It?Mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wd(t,r);else{e=r;var i=ke;ke|=2;var s=I5();(It!==t||Mt!==e)&&(Vr=null,sa=ct()+500,Ms(t,e));do try{PC();break}catch(a){C5(t,a)}while(!0);km(),zd.current=s,ke=i,ft!==null?e=0:(It=null,Mt=0,e=wt)}if(e!==0){if(e===2&&(i=qp(t),i!==0&&(r=i,e=w0(t,i))),e===1)throw n=_c,Ms(t,0),Si(t,r),dn(t,ct()),n;if(e===6)Si(t,r);else{if(i=t.current.alternate,!(r&30)&&!xC(i)&&(e=Wd(t,r),e===2&&(s=qp(t),s!==0&&(r=s,e=w0(t,s))),e===1))throw n=_c,Ms(t,0),Si(t,r),dn(t,ct()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Cs(t,sn,Vr);break;case 3:if(Si(t,r),(r&130023424)===r&&(e=Hm+500-ct(),10<e)){if(Ad(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=e0(Cs.bind(null,t,sn,Vr),e);break}Cs(t,sn,Vr);break;case 4:if(Si(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Jn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AC(r/1960))-r,10<r){t.timeoutHandle=e0(Cs.bind(null,t,sn,Vr),r);break}Cs(t,sn,Vr);break;case 5:Cs(t,sn,Vr);break;default:throw Error(W(329))}}}return dn(t,ct()),t.callbackNode===n?T5.bind(null,t):null}function w0(t,e){var n=Bl;return t.current.memoizedState.isDehydrated&&(Ms(t,e).flags|=256),t=Wd(t,e),t!==2&&(e=sn,sn=n,e!==null&&E0(e)),t}function E0(t){sn===null?sn=t:sn.push.apply(sn,t)}function xC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ir(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Si(t,e){for(e&=~Bm,e&=~Ah,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jn(e),r=1<<n;t[n]=-1,e&=~r}}function e2(t){if(ke&6)throw Error(W(327));Ko();var e=Ad(t,0);if(!(e&1))return dn(t,ct()),null;var n=Wd(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=w0(t,r))}if(n===1)throw n=_c,Ms(t,0),Si(t,e),dn(t,ct()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,sn,Vr),dn(t,ct()),null}function Wm(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(sa=ct()+500,Th&&ss())}}function Hs(t){Ri!==null&&Ri.tag===0&&!(ke&6)&&Ko();var e=ke;ke|=1;var n=Dn.transition,r=Me;try{if(Dn.transition=null,Me=1,t)return t()}finally{Me=r,Dn.transition=n,ke=e,!(ke&6)&&ss()}}function qm(){gn=Fo.current,Ge(Fo)}function Ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iC(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(Sm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nd();break;case 3:ra(),Ge(cn),Ge(Qt),Mm();break;case 5:Om(r);break;case 4:ra();break;case 13:Ge(Ze);break;case 19:Ge(Ze);break;case 10:Pm(r.type._context);break;case 22:case 23:qm()}n=n.return}if(It=t,ft=t=ji(t.current,null),Mt=gn=e,wt=0,_c=null,Bm=Ah=Bs=0,sn=Bl=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xs=null}return t}function C5(t,e){do{var n=ft;try{if(km(),sd.current=jd,$d){for(var r=et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$d=!1}if(zs=0,Ct=_t=et=null,jl=!1,gc=0,zm.current=null,n===null||n.return===null){wt=1,_c=e,ft=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Mt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=jy(o);if(g!==null){g.flags&=-257,zy(g,o,a,s,e),g.mode&1&&$y(s,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var I=new Set;I.add(l),e.updateQueue=I}else y.add(l);break e}else{if(!(e&1)){$y(s,u,e),Gm();break e}l=Error(W(426))}}else if(Ke&&a.mode&1){var P=jy(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),zy(P,o,a,s,e),Am(ia(l,a));break e}}s=l=ia(l,a),wt!==4&&(wt=2),Bl===null?Bl=[s]:Bl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=a5(s,l,e);Oy(s,C);break e;case 1:a=l;var v=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Fi===null||!Fi.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=l5(s,a,e);Oy(s,D);break e}}s=s.return}while(s!==null)}A5(n)}catch(z){e=z,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function I5(){var t=zd.current;return zd.current=jd,t===null?jd:t}function Gm(){(wt===0||wt===3||wt===2)&&(wt=4),It===null||!(Bs&268435455)&&!(Ah&268435455)||Si(It,Mt)}function Wd(t,e){var n=ke;ke|=2;var r=I5();(It!==t||Mt!==e)&&(Vr=null,Ms(t,e));do try{kC();break}catch(i){C5(t,i)}while(!0);if(km(),ke=n,zd.current=r,ft!==null)throw Error(W(261));return It=null,Mt=0,wt}function kC(){for(;ft!==null;)S5(ft)}function PC(){for(;ft!==null&&!tT();)S5(ft)}function S5(t){var e=k5(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?A5(t):ft=e,zm.current=null}function A5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TC(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,ft=null;return}}else if(n=bC(n,e,gn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);wt===0&&(wt=5)}function Cs(t,e,n){var r=Me,i=Dn.transition;try{Dn.transition=null,Me=1,RC(t,e,n,r)}finally{Dn.transition=i,Me=r}return null}function RC(t,e,n,r){do Ko();while(Ri!==null);if(ke&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(dT(t,s),t===It&&(ft=It=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uu||(Uu=!0,P5(Sd,function(){return Ko(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dn.transition,Dn.transition=null;var o=Me;Me=1;var a=ke;ke|=4,zm.current=null,IC(t,n),E5(n,t),YT(Zp),xd=!!Yp,Zp=Yp=null,t.current=n,SC(n),nT(),ke=a,Me=o,Dn.transition=s}else t.current=n;if(Uu&&(Uu=!1,Ri=t,Hd=i),s=t.pendingLanes,s===0&&(Fi=null),sT(n.stateNode),dn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bd)throw Bd=!1,t=v0,v0=null,t;return Hd&1&&t.tag!==0&&Ko(),s=t.pendingLanes,s&1?t===_0?Hl++:(Hl=0,_0=t):Hl=0,ss(),null}function Ko(){if(Ri!==null){var t=aw(Hd),e=Dn.transition,n=Me;try{if(Dn.transition=null,Me=16>t?16:t,Ri===null)var r=!1;else{if(t=Ri,Ri=null,Hd=0,ke&6)throw Error(W(331));var i=ke;for(ke|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:zl(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var p=d.sibling,g=d.return;if(v5(d),d===u){X=null;break}if(p!==null){p.return=g,X=p;break}X=g}}}var y=s.alternate;if(y!==null){var I=y.child;if(I!==null){y.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zl(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,X=C;break e}X=s.return}}var v=t.current;for(X=v;X!==null;){o=X;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,X=S;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sh(9,a)}}catch(z){st(a,a.return,z)}if(a===o){X=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,X=D;break e}X=a.return}}if(ke=i,ss(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(vh,t)}catch{}r=!0}return r}finally{Me=n,Dn.transition=e}}return!1}function t2(t,e,n){e=ia(n,e),e=a5(t,e,1),t=Ui(t,e,1),e=en(),t!==null&&(Uc(t,1,e),dn(t,e))}function st(t,e,n){if(t.tag===3)t2(t,t,n);else for(;e!==null;){if(e.tag===3){t2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fi===null||!Fi.has(r))){t=ia(n,t),t=l5(e,t,1),e=Ui(e,t,1),t=en(),e!==null&&(Uc(e,1,t),dn(e,t));break}}e=e.return}}function NC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Mt&n)===n&&(wt===4||wt===3&&(Mt&130023424)===Mt&&500>ct()-Hm?Ms(t,0):Bm|=n),dn(t,e)}function x5(t,e){e===0&&(t.mode&1?(e=xu,xu<<=1,!(xu&130023424)&&(xu=4194304)):e=1);var n=en();t=Zr(t,e),t!==null&&(Uc(t,e,n),dn(t,n))}function LC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x5(t,n)}function OC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),x5(t,n)}var k5;k5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,EC(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Ke&&e.flags&1048576&&Lw(e,Md,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ad(t,e),t=e.pendingProps;var i=ea(e,Qt.current);Go(e,n),i=Vm(null,e,r,t,i,n);var s=Um();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(r)?(s=!0,Ld(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Nm(e),i.updater=Ih,e.stateNode=i,i._reactInternals=e,a0(e,r,t,n),e=u0(null,e,r,!0,s,n)):(e.tag=0,Ke&&s&&Im(e),Jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ad(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=DC(r),t=Kn(r,t),i){case 0:e=c0(null,e,r,t,n);break e;case 1:e=Wy(null,e,r,t,n);break e;case 11:e=By(null,e,r,t,n);break e;case 14:e=Hy(null,e,r,Kn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),c0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),Wy(t,e,r,i,n);case 3:e:{if(h5(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Fw(t,e),Ud(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ia(Error(W(423)),e),e=qy(t,e,r,n,i);break e}else if(r!==i){i=ia(Error(W(424)),e),e=qy(t,e,r,n,i);break e}else for(vn=Vi(e.stateNode.containerInfo.firstChild),wn=e,Ke=!0,Yn=null,n=Vw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ta(),r===i){e=Jr(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return $w(e),t===null&&i0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Jp(r,i)?o=null:s!==null&&Jp(r,s)&&(e.flags|=32),d5(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&i0(e),null;case 13:return f5(t,e,n);case 4:return Lm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=na(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),By(t,e,r,i,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$e(Dd,r._currentValue),r._currentValue=o,s!==null)if(ir(s.value,o)){if(s.children===i.children&&!cn.current){e=Jr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=qr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),s0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),s0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Go(e,n),i=Vn(i),r=r(i),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,i=Kn(r,e.pendingProps),i=Kn(r.type,i),Hy(t,e,r,i,n);case 15:return c5(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kn(r,i),ad(t,e),e.tag=1,un(r)?(t=!0,Ld(e)):t=!1,Go(e,n),o5(e,r,i),a0(e,r,i,n),u0(null,e,r,!0,t,n);case 19:return p5(t,e,n);case 22:return u5(t,e,n)}throw Error(W(156,e.tag))};function P5(t,e){return rw(t,e)}function MC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new MC(t,e,n,r)}function Km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DC(t){if(typeof t=="function")return Km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fm)return 11;if(t===pm)return 14}return 2}function ji(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ud(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Km(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ko:return Ds(n.children,i,s,e);case hm:o=8,i|=8;break;case Rp:return t=Mn(12,n,e,i|2),t.elementType=Rp,t.lanes=s,t;case Np:return t=Mn(13,n,e,i),t.elementType=Np,t.lanes=s,t;case Lp:return t=Mn(19,n,e,i),t.elementType=Lp,t.lanes=s,t;case $_:return xh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U_:o=10;break e;case F_:o=9;break e;case fm:o=11;break e;case pm:o=14;break e;case Ti:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ds(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function xh(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=$_,t.lanes=n,t.stateNode={isHidden:!1},t}function sp(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function op(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$f(0),this.expirationTimes=$f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qm(t,e,n,r,i,s,o,a,l){return t=new VC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nm(s),t}function UC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function R5(t){if(!t)return Yi;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(un(n))return Rw(t,n,e)}return e}function N5(t,e,n,r,i,s,o,a,l){return t=Qm(n,r,!0,t,i,s,o,a,l),t.context=R5(null),n=t.current,r=en(),i=$i(n),s=qr(r,i),s.callback=e??null,Ui(n,s,i),t.current.lanes=i,Uc(t,i,r),dn(t,r),t}function kh(t,e,n,r){var i=e.current,s=en(),o=$i(i);return n=R5(n),e.context===null?e.context=n:e.pendingContext=n,e=qr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ui(i,e,o),t!==null&&(er(t,i,o,s),id(t,i,o)),o}function qd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function n2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xm(t,e){n2(t,e),(t=t.alternate)&&n2(t,e)}function FC(){return null}var L5=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ym(t){this._internalRoot=t}Ph.prototype.render=Ym.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));kh(t,e,null,null)};Ph.prototype.unmount=Ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hs(function(){kh(null,t,null,null)}),e[Yr]=null}};function Ph(t){this._internalRoot=t}Ph.prototype.unstable_scheduleHydration=function(t){if(t){var e=uw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ii.length&&e!==0&&e<Ii[n].priority;n++);Ii.splice(n,0,t),n===0&&hw(t)}};function Zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r2(){}function $C(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=qd(o);s.call(u)}}var o=N5(e,r,t,0,null,!1,!1,"",r2);return t._reactRootContainer=o,t[Yr]=o.current,dc(t.nodeType===8?t.parentNode:t),Hs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=qd(l);a.call(u)}}var l=Qm(t,0,!1,null,null,!1,!1,"",r2);return t._reactRootContainer=l,t[Yr]=l.current,dc(t.nodeType===8?t.parentNode:t),Hs(function(){kh(e,l,n,r)}),l}function Nh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qd(o);a.call(l)}}kh(e,o,t,i)}else o=$C(n,e,t,i,r);return qd(o)}lw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Il(e.pendingLanes);n!==0&&(ym(e,n|1),dn(e,ct()),!(ke&6)&&(sa=ct()+500,ss()))}break;case 13:Hs(function(){var r=Zr(t,1);if(r!==null){var i=en();er(r,t,1,i)}}),Xm(t,1)}};vm=function(t){if(t.tag===13){var e=Zr(t,134217728);if(e!==null){var n=en();er(e,t,134217728,n)}Xm(t,134217728)}};cw=function(t){if(t.tag===13){var e=$i(t),n=Zr(t,e);if(n!==null){var r=en();er(n,t,e,r)}Xm(t,e)}};uw=function(){return Me};dw=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Bp=function(t,e,n){switch(e){case"input":if(Dp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=bh(r);if(!i)throw Error(W(90));z_(r),Dp(r,i)}}}break;case"textarea":H_(t,n);break;case"select":e=n.value,e!=null&&Bo(t,!!n.multiple,e,!1)}};Y_=Wm;Z_=Hs;var jC={usingClientEntryPoint:!1,Events:[$c,Lo,bh,Q_,X_,Wm]},dl={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zC={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tw(t),t===null?null:t.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||FC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{vh=Fu.inject(zC),yr=Fu}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jC;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zm(e))throw Error(W(200));return UC(t,e,null,n)};Cn.createRoot=function(t,e){if(!Zm(t))throw Error(W(299));var n=!1,r="",i=L5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qm(t,1,!1,null,null,n,!1,r,i),t[Yr]=e.current,dc(t.nodeType===8?t.parentNode:t),new Ym(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=tw(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Hs(t)};Cn.hydrate=function(t,e,n){if(!Rh(e))throw Error(W(200));return Nh(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!Zm(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=L5;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=N5(e,null,t,1,n??null,i,!1,s,o),t[Yr]=e.current,dc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ph(e)};Cn.render=function(t,e,n){if(!Rh(e))throw Error(W(200));return Nh(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Rh(t))throw Error(W(40));return t._reactRootContainer?(Hs(function(){Nh(null,null,t,!1,function(){t._reactRootContainer=null,t[Yr]=null})}),!0):!1};Cn.unstable_batchedUpdates=Wm;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rh(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Nh(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function O5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O5)}catch(t){console.error(t)}}O5(),O_.exports=Cn;var Jm=O_.exports;const BC=b_(Jm),HC=E_({__proto__:null,default:BC},[Jm]);var i2=Jm;kp.createRoot=i2.createRoot,kp.hydrateRoot=i2.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ye(){return Ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ye.apply(this,arguments)}var dt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dt||(dt={}));const s2="popstate";function WC(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return wc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ws(i)}return GC(e,n,null,t)}function ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qC(){return Math.random().toString(36).substr(2,8)}function o2(t,e){return{usr:t.state,key:t.key,idx:e}}function wc(t,e,n,r){return n===void 0&&(n=null),Ye({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?os(e):e,{state:n,key:e&&e.key||r||qC()})}function Ws(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function os(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=dt.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Ye({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=dt.Pop;let P=d(),C=P==null?null:P-u;u=P,l&&l({action:a,location:I.location,delta:C})}function p(P,C){a=dt.Push;let v=wc(I.location,P,C);u=d()+1;let S=o2(v,u),D=I.createHref(v);try{o.pushState(S,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(D)}s&&l&&l({action:a,location:I.location,delta:1})}function g(P,C){a=dt.Replace;let v=wc(I.location,P,C);u=d();let S=o2(v,u),D=I.createHref(v);o.replaceState(S,"",D),s&&l&&l({action:a,location:I.location,delta:0})}function y(P){let C=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof P=="string"?P:Ws(P);return v=v.replace(/ $/,"%20"),ge(C,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,C)}let I={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(s2,h),l=P,()=>{i.removeEventListener(s2,h),l=null}},createHref(P){return e(i,P)},createURL:y,encodeLocation(P){let C=y(P);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:g,go(P){return o.go(P)}};return I}var Fe;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fe||(Fe={}));const KC=new Set(["lazy","caseSensitive","path","id","index","children"]);function QC(t){return t.index===!0}function Ec(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(ge(i.index!==!0||!i.children,"Cannot specify children on an index route"),ge(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),QC(i)){let l=Ye({},i,e(i),{id:a});return r[a]=l,l}else{let l=Ye({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Ec(i.children,e,o,r)),l}})}function Ss(t,e,n){return n===void 0&&(n="/"),dd(t,e,n,!1)}function dd(t,e,n,r){let i=typeof e=="string"?os(e):e,s=Aa(i.pathname||"/",n);if(s==null)return null;let o=M5(t);YC(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=lI(s);a=oI(o[l],u,r)}return a}function XC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function M5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ge(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Gr([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(ge(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),M5(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:iI(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of D5(s.path))i(s,o,l)}),e}function D5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=D5(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZC=/^:[\w-]+$/,JC=3,eI=2,tI=1,nI=10,rI=-2,a2=t=>t==="*";function iI(t,e){let n=t.split("/"),r=n.length;return n.some(a2)&&(r+=rI),e&&(r+=eI),n.filter(i=>!a2(i)).reduce((i,s)=>i+(ZC.test(s)?JC:s===""?tI:nI),r)}function sI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function oI(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=l2({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),p=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=l2({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Gr([s,h.pathname]),pathnameBase:dI(Gr([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Gr([s,h.pathnameBase]))}return o}function l2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let I=a[h]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const y=a[h];return g&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function aI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),oa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oa(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Aa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?os(t):t;return{pathname:n?n.startsWith("/")?n:uI(n,e):e,search:hI(r),hash:fI(i)}}function uI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ap(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Lh(t,e){let n=V5(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Oh(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=os(t):(i=Ye({},t),ge(!i.pathname||!i.pathname.includes("?"),ap("?","pathname","search",i)),ge(!i.pathname||!i.pathname.includes("#"),ap("#","pathname","hash",i)),ge(!i.search||!i.search.includes("#"),ap("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=cI(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Gr=t=>t.join("/").replace(/\/\/+/g,"/"),dI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class eg{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Mh(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const U5=["post","put","patch","delete"],pI=new Set(U5),mI=["get",...U5],gI=new Set(mI),yI=new Set([301,302,303,307,308]),vI=new Set([307,308]),lp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_I={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},hl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wI=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),F5="remix-router-transitions";function EI(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ge(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=O=>({hasErrorBoundary:N(O)})}else i=wI;let s={},o=Ec(t.routes,i,void 0,s),a,l=t.basename||"/",u=t.unstable_dataStrategy||SI,d=t.unstable_patchRoutesOnMiss,h=Ye({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),p=null,g=new Set,y=null,I=null,P=null,C=t.hydrationData!=null,v=Ss(o,t.history.location,l),S=null;if(v==null&&!d){let N=Zt(404,{pathname:t.history.location.pathname}),{matches:O,route:F}=v2(o);v=O,S={[F.id]:N}}v&&d&&Pr(v,o,t.history.location.pathname).active&&(v=null);let D;if(!v)D=!1,v=[];else if(v.some(N=>N.route.lazy))D=!1;else if(!v.some(N=>N.route.loader))D=!0;else if(h.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,O=t.hydrationData?t.hydrationData.errors:null,F=j=>j.route.loader?typeof j.route.loader=="function"&&j.route.loader.hydrate===!0?!1:N&&N[j.route.id]!==void 0||O&&O[j.route.id]!==void 0:!0;if(O){let j=v.findIndex(Q=>O[Q.route.id]!==void 0);D=v.slice(0,j+1).every(F)}else D=v.every(F)}else D=t.hydrationData!=null;let z,R={historyAction:t.history.action,location:t.history.location,matches:v,initialized:D,navigation:lp,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},T=dt.Pop,_=!1,b,A=!1,k=new Map,L=null,x=!1,be=!1,St=[],Yt=[],xe=new Map,K=0,ee=-1,ie=new Map,fe=new Set,pe=new Map,De=new Map,mt=new Set,At=new Map,xt=new Map,jn=new Map,Fa=!1;function If(){if(p=t.history.listen(N=>{let{action:O,location:F,delta:j}=N;if(Fa){Fa=!1;return}oa(xt.size===0||j!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Q=qa({currentLocation:R.location,nextLocation:F,historyAction:O});if(Q&&j!=null){Fa=!0,t.history.go(j*-1),ms(Q,{state:"blocked",location:F,proceed(){ms(Q,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),t.history.go(j)},reset(){let J=new Map(R.blockers);J.set(Q,hl),gt({blockers:J})}});return}return lr(O,F)}),n){FI(e,k);let N=()=>$I(e,k);e.addEventListener("pagehide",N),L=()=>e.removeEventListener("pagehide",N)}return R.initialized||lr(dt.Pop,R.location,{initialHydration:!0}),z}function lo(){p&&p(),L&&L(),g.clear(),b&&b.abort(),R.fetchers.forEach((N,O)=>ho(O)),R.blockers.forEach((N,O)=>po(O))}function co(N){return g.add(N),()=>g.delete(N)}function gt(N,O){O===void 0&&(O={}),R=Ye({},R,N);let F=[],j=[];h.v7_fetcherPersist&&R.fetchers.forEach((Q,J)=>{Q.state==="idle"&&(mt.has(J)?j.push(J):F.push(J))}),[...g].forEach(Q=>Q(R,{deletedFetchers:j,unstable_viewTransitionOpts:O.viewTransitionOpts,unstable_flushSync:O.flushSync===!0})),h.v7_fetcherPersist&&(F.forEach(Q=>R.fetchers.delete(Q)),j.forEach(Q=>ho(Q)))}function ar(N,O,F){var j,Q;let{flushSync:J}=F===void 0?{}:F,se=R.actionData!=null&&R.navigation.formMethod!=null&&Xn(R.navigation.formMethod)&&R.navigation.state==="loading"&&((j=N.state)==null?void 0:j._isRedirect)!==!0,q;O.actionData?Object.keys(O.actionData).length>0?q=O.actionData:q=null:se?q=R.actionData:q=null;let le=O.loaderData?g2(R.loaderData,O.loaderData,O.matches||[],O.errors):R.loaderData,ne=R.blockers;ne.size>0&&(ne=new Map(ne),ne.forEach((Ce,Ne)=>ne.set(Ne,hl)));let te=_===!0||R.navigation.formMethod!=null&&Xn(R.navigation.formMethod)&&((Q=N.state)==null?void 0:Q._isRedirect)!==!0;a&&(o=a,a=void 0),x||T===dt.Pop||(T===dt.Push?t.history.push(N,N.state):T===dt.Replace&&t.history.replace(N,N.state));let ve;if(T===dt.Pop){let Ce=k.get(R.location.pathname);Ce&&Ce.has(N.pathname)?ve={currentLocation:R.location,nextLocation:N}:k.has(N.pathname)&&(ve={currentLocation:N,nextLocation:R.location})}else if(A){let Ce=k.get(R.location.pathname);Ce?Ce.add(N.pathname):(Ce=new Set([N.pathname]),k.set(R.location.pathname,Ce)),ve={currentLocation:R.location,nextLocation:N}}gt(Ye({},O,{actionData:q,loaderData:le,historyAction:T,location:N,initialized:!0,navigation:lp,revalidation:"idle",restoreScrollPosition:Ka(N,O.matches||R.matches),preventScrollReset:te,blockers:ne}),{viewTransitionOpts:ve,flushSync:J===!0}),T=dt.Pop,_=!1,A=!1,x=!1,be=!1,St=[],Yt=[]}async function uo(N,O){if(typeof N=="number"){t.history.go(N);return}let F=b0(R.location,R.matches,l,h.v7_prependBasename,N,h.v7_relativeSplatPath,O==null?void 0:O.fromRouteId,O==null?void 0:O.relative),{path:j,submission:Q,error:J}=c2(h.v7_normalizeFormMethod,!1,F,O),se=R.location,q=wc(R.location,j,O&&O.state);q=Ye({},q,t.history.encodeLocation(q));let le=O&&O.replace!=null?O.replace:void 0,ne=dt.Push;le===!0?ne=dt.Replace:le===!1||Q!=null&&Xn(Q.formMethod)&&Q.formAction===R.location.pathname+R.location.search&&(ne=dt.Replace);let te=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,ve=(O&&O.unstable_flushSync)===!0,Ce=qa({currentLocation:se,nextLocation:q,historyAction:ne});if(Ce){ms(Ce,{state:"blocked",location:q,proceed(){ms(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),uo(N,O)},reset(){let Ne=new Map(R.blockers);Ne.set(Ce,hl),gt({blockers:Ne})}});return}return await lr(ne,q,{submission:Q,pendingError:J,preventScrollReset:te,replace:O&&O.replace,enableViewTransition:O&&O.unstable_viewTransition,flushSync:ve})}function $a(){if(vt(),gt({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){lr(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}lr(T||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation})}}async function lr(N,O,F){b&&b.abort(),b=null,T=N,x=(F&&F.startUninterruptedRevalidation)===!0,mo(R.location,R.matches),_=(F&&F.preventScrollReset)===!0,A=(F&&F.enableViewTransition)===!0;let j=a||o,Q=F&&F.overrideNavigation,J=Ss(j,O,l),se=(F&&F.flushSync)===!0,q=Pr(J,j,O.pathname);if(q.active&&q.matches&&(J=q.matches),!J){let{error:Ie,notFoundMatches:ot,route:Xe}=xr(O.pathname);ar(O,{matches:ot,loaderData:{},errors:{[Xe.id]:Ie}},{flushSync:se});return}if(R.initialized&&!be&&NI(R.location,O)&&!(F&&F.submission&&Xn(F.submission.formMethod))){ar(O,{matches:J},{flushSync:se});return}b=new AbortController;let le=Eo(t.history,O,b.signal,F&&F.submission),ne;if(F&&F.pendingError)ne=[Wl(J).route.id,{type:Fe.error,error:F.pendingError}];else if(F&&F.submission&&Xn(F.submission.formMethod)){let Ie=await Sf(le,O,F.submission,J,q.active,{replace:F.replace,flushSync:se});if(Ie.shortCircuited)return;if(Ie.pendingActionResult){let[ot,Xe]=Ie.pendingActionResult;if(yn(Xe)&&Mh(Xe.error)&&Xe.error.status===404){b=null,ar(O,{matches:Ie.matches,loaderData:{},errors:{[ot]:Xe.error}});return}}J=Ie.matches||J,ne=Ie.pendingActionResult,Q=cp(O,F.submission),se=!1,q.active=!1,le=Eo(t.history,le.url,le.signal)}let{shortCircuited:te,matches:ve,loaderData:Ce,errors:Ne}=await Af(le,O,J,q.active,Q,F&&F.submission,F&&F.fetcherSubmission,F&&F.replace,F&&F.initialHydration===!0,se,ne);te||(b=null,ar(O,Ye({matches:ve||J},y2(ne),{loaderData:Ce,errors:Ne})))}async function Sf(N,O,F,j,Q,J){J===void 0&&(J={}),vt();let se=VI(O,F);if(gt({navigation:se},{flushSync:J.flushSync===!0}),Q){let ne=await ys(j,O.pathname,N.signal);if(ne.type==="aborted")return{shortCircuited:!0};if(ne.type==="error"){let{error:te,notFoundMatches:ve,route:Ce}=ui(O.pathname,ne);return{matches:ve,pendingActionResult:[Ce.id,{type:Fe.error,error:te}]}}else if(ne.matches)j=ne.matches;else{let{notFoundMatches:te,error:ve,route:Ce}=xr(O.pathname);return{matches:te,pendingActionResult:[Ce.id,{type:Fe.error,error:ve}]}}}let q,le=Al(j,O);if(!le.route.action&&!le.route.lazy)q={type:Fe.error,error:Zt(405,{method:N.method,pathname:O.pathname,routeId:le.route.id})};else if(q=(await ci("action",N,[le],j))[0],N.signal.aborted)return{shortCircuited:!0};if(Rs(q)){let ne;return J&&J.replace!=null?ne=J.replace:ne=f2(q.response.headers.get("Location"),new URL(N.url),l)===R.location.pathname+R.location.search,await Ar(N,q,{submission:F,replace:ne}),{shortCircuited:!0}}if(Ps(q))throw Zt(400,{type:"defer-action"});if(yn(q)){let ne=Wl(j,le.route.id);return(J&&J.replace)!==!0&&(T=dt.Push),{matches:j,pendingActionResult:[ne.route.id,q]}}return{matches:j,pendingActionResult:[le.route.id,q]}}async function Af(N,O,F,j,Q,J,se,q,le,ne,te){let ve=Q||cp(O,J),Ce=J||se||E2(ve),Ne=!x&&(!h.v7_partialHydration||!le);if(j){if(Ne){let ze=ja(te);gt(Ye({navigation:ve},ze!==void 0?{actionData:ze}:{}),{flushSync:ne})}let de=await ys(F,O.pathname,N.signal);if(de.type==="aborted")return{shortCircuited:!0};if(de.type==="error"){let{error:ze,notFoundMatches:$t,route:Le}=ui(O.pathname,de);return{matches:$t,loaderData:{},errors:{[Le.id]:ze}}}else if(de.matches)F=de.matches;else{let{error:ze,notFoundMatches:$t,route:Le}=xr(O.pathname);return{matches:$t,loaderData:{},errors:{[Le.id]:ze}}}}let Ie=a||o,[ot,Xe]=u2(t.history,R,F,Ce,O,h.v7_partialHydration&&le===!0,h.unstable_skipActionErrorRevalidation,be,St,Yt,mt,pe,fe,Ie,l,te);if(gs(de=>!(F&&F.some(ze=>ze.route.id===de))||ot&&ot.some(ze=>ze.route.id===de)),ee=++K,ot.length===0&&Xe.length===0){let de=fo();return ar(O,Ye({matches:F,loaderData:{},errors:te&&yn(te[1])?{[te[0]]:te[1].error}:null},y2(te),de?{fetchers:new Map(R.fetchers)}:{}),{flushSync:ne}),{shortCircuited:!0}}if(Ne){let de={};if(!j){de.navigation=ve;let ze=ja(te);ze!==void 0&&(de.actionData=ze)}Xe.length>0&&(de.fetchers=za(Xe)),gt(de,{flushSync:ne})}Xe.forEach(de=>{xe.has(de.key)&&zn(de.key),de.controller&&xe.set(de.key,de.controller)});let di=()=>Xe.forEach(de=>zn(de.key));b&&b.signal.addEventListener("abort",di);let{loaderResults:cr,fetcherResults:Bn}=await yt(R.matches,F,ot,Xe,N);if(N.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",di),Xe.forEach(de=>xe.delete(de.key));let Rr=_2([...cr,...Bn]);if(Rr){if(Rr.idx>=ot.length){let de=Xe[Rr.idx-ot.length].key;fe.add(de)}return await Ar(N,Rr.result,{replace:q}),{shortCircuited:!0}}let{loaderData:ur,errors:Ft}=m2(R,F,ot,cr,te,Xe,Bn,At);At.forEach((de,ze)=>{de.subscribe($t=>{($t||de.done)&&At.delete(ze)})}),h.v7_partialHydration&&le&&R.errors&&Object.entries(R.errors).filter(de=>{let[ze]=de;return!ot.some($t=>$t.route.id===ze)}).forEach(de=>{let[ze,$t]=de;Ft=Object.assign(Ft||{},{[ze]:$t})});let An=fo(),hi=uu(ee),go=An||hi||Xe.length>0;return Ye({matches:F,loaderData:ur,errors:Ft},go?{fetchers:new Map(R.fetchers)}:{})}function ja(N){if(N&&!yn(N[1]))return{[N[0]]:N[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function za(N){return N.forEach(O=>{let F=R.fetchers.get(O.key),j=fl(void 0,F?F.data:void 0);R.fetchers.set(O.key,j)}),new Map(R.fetchers)}function cu(N,O,F,j){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xe.has(N)&&zn(N);let Q=(j&&j.unstable_flushSync)===!0,J=a||o,se=b0(R.location,R.matches,l,h.v7_prependBasename,F,h.v7_relativeSplatPath,O,j==null?void 0:j.relative),q=Ss(J,se,l),le=Pr(q,J,se);if(le.active&&le.matches&&(q=le.matches),!q){Sn(N,O,Zt(404,{pathname:se}),{flushSync:Q});return}let{path:ne,submission:te,error:ve}=c2(h.v7_normalizeFormMethod,!0,se,j);if(ve){Sn(N,O,ve,{flushSync:Q});return}let Ce=Al(q,ne);if(_=(j&&j.preventScrollReset)===!0,te&&Xn(te.formMethod)){xf(N,O,ne,Ce,q,le.active,Q,te);return}pe.set(N,{routeId:O,path:ne}),Ba(N,O,ne,Ce,q,le.active,Q,te)}async function xf(N,O,F,j,Q,J,se,q){vt(),pe.delete(N);function le(Le){if(!Le.route.action&&!Le.route.lazy){let pn=Zt(405,{method:q.formMethod,pathname:F,routeId:O});return Sn(N,O,pn,{flushSync:se}),!0}return!1}if(!J&&le(j))return;let ne=R.fetchers.get(N);fn(N,UI(q,ne),{flushSync:se});let te=new AbortController,ve=Eo(t.history,F,te.signal,q);if(J){let Le=await ys(Q,F,ve.signal);if(Le.type==="aborted")return;if(Le.type==="error"){let{error:pn}=ui(F,Le);Sn(N,O,pn,{flushSync:se});return}else if(Le.matches){if(Q=Le.matches,j=Al(Q,F),le(j))return}else{Sn(N,O,Zt(404,{pathname:F}),{flushSync:se});return}}xe.set(N,te);let Ce=K,Ie=(await ci("action",ve,[j],Q))[0];if(ve.signal.aborted){xe.get(N)===te&&xe.delete(N);return}if(h.v7_fetcherPersist&&mt.has(N)){if(Rs(Ie)||yn(Ie)){fn(N,wi(void 0));return}}else{if(Rs(Ie))if(xe.delete(N),ee>Ce){fn(N,wi(void 0));return}else return fe.add(N),fn(N,fl(q)),Ar(ve,Ie,{fetcherSubmission:q});if(yn(Ie)){Sn(N,O,Ie.error);return}}if(Ps(Ie))throw Zt(400,{type:"defer-action"});let ot=R.navigation.location||R.location,Xe=Eo(t.history,ot,te.signal),di=a||o,cr=R.navigation.state!=="idle"?Ss(di,R.navigation.location,l):R.matches;ge(cr,"Didn't find any matches after fetcher action");let Bn=++K;ie.set(N,Bn);let Rr=fl(q,Ie.data);R.fetchers.set(N,Rr);let[ur,Ft]=u2(t.history,R,cr,q,ot,!1,h.unstable_skipActionErrorRevalidation,be,St,Yt,mt,pe,fe,di,l,[j.route.id,Ie]);Ft.filter(Le=>Le.key!==N).forEach(Le=>{let pn=Le.key,Qa=R.fetchers.get(pn),hu=fl(void 0,Qa?Qa.data:void 0);R.fetchers.set(pn,hu),xe.has(pn)&&zn(pn),Le.controller&&xe.set(pn,Le.controller)}),gt({fetchers:new Map(R.fetchers)});let An=()=>Ft.forEach(Le=>zn(Le.key));te.signal.addEventListener("abort",An);let{loaderResults:hi,fetcherResults:go}=await yt(R.matches,cr,ur,Ft,Xe);if(te.signal.aborted)return;te.signal.removeEventListener("abort",An),ie.delete(N),xe.delete(N),Ft.forEach(Le=>xe.delete(Le.key));let de=_2([...hi,...go]);if(de){if(de.idx>=ur.length){let Le=Ft[de.idx-ur.length].key;fe.add(Le)}return Ar(Xe,de.result)}let{loaderData:ze,errors:$t}=m2(R,R.matches,ur,hi,void 0,Ft,go,At);if(R.fetchers.has(N)){let Le=wi(Ie.data);R.fetchers.set(N,Le)}uu(Bn),R.navigation.state==="loading"&&Bn>ee?(ge(T,"Expected pending action"),b&&b.abort(),ar(R.navigation.location,{matches:cr,loaderData:ze,errors:$t,fetchers:new Map(R.fetchers)})):(gt({errors:$t,loaderData:g2(R.loaderData,ze,cr,$t),fetchers:new Map(R.fetchers)}),be=!1)}async function Ba(N,O,F,j,Q,J,se,q){let le=R.fetchers.get(N);fn(N,fl(q,le?le.data:void 0),{flushSync:se});let ne=new AbortController,te=Eo(t.history,F,ne.signal);if(J){let Ie=await ys(Q,F,te.signal);if(Ie.type==="aborted")return;if(Ie.type==="error"){let{error:ot}=ui(F,Ie);Sn(N,O,ot,{flushSync:se});return}else if(Ie.matches)Q=Ie.matches,j=Al(Q,F);else{Sn(N,O,Zt(404,{pathname:F}),{flushSync:se});return}}xe.set(N,ne);let ve=K,Ne=(await ci("loader",te,[j],Q))[0];if(Ps(Ne)&&(Ne=await H5(Ne,te.signal,!0)||Ne),xe.get(N)===ne&&xe.delete(N),!te.signal.aborted){if(mt.has(N)){fn(N,wi(void 0));return}if(Rs(Ne))if(ee>ve){fn(N,wi(void 0));return}else{fe.add(N),await Ar(te,Ne);return}if(yn(Ne)){Sn(N,O,Ne.error);return}ge(!Ps(Ne),"Unhandled fetcher deferred data"),fn(N,wi(Ne.data))}}async function Ar(N,O,F){let{submission:j,fetcherSubmission:Q,replace:J}=F===void 0?{}:F;O.response.headers.has("X-Remix-Revalidate")&&(be=!0);let se=O.response.headers.get("Location");ge(se,"Expected a Location header on the redirect Response"),se=f2(se,new URL(N.url),l);let q=wc(R.location,se,{_isRedirect:!0});if(n){let Ne=!1;if(O.response.headers.has("X-Remix-Reload-Document"))Ne=!0;else if(tg.test(se)){const Ie=t.history.createURL(se);Ne=Ie.origin!==e.location.origin||Aa(Ie.pathname,l)==null}if(Ne){J?e.location.replace(se):e.location.assign(se);return}}b=null;let le=J===!0?dt.Replace:dt.Push,{formMethod:ne,formAction:te,formEncType:ve}=R.navigation;!j&&!Q&&ne&&te&&ve&&(j=E2(R.navigation));let Ce=j||Q;if(vI.has(O.response.status)&&Ce&&Xn(Ce.formMethod))await lr(le,q,{submission:Ye({},Ce,{formAction:se}),preventScrollReset:_});else{let Ne=cp(q,j);await lr(le,q,{overrideNavigation:Ne,fetcherSubmission:Q,preventScrollReset:_})}}async function ci(N,O,F,j){try{let Q=await AI(u,N,O,F,j,s,i);return await Promise.all(Q.map((J,se)=>{if(OI(J)){let q=J.result;return{type:Fe.redirect,response:PI(q,O,F[se].route.id,j,l,h.v7_relativeSplatPath)}}return kI(J)}))}catch(Q){return F.map(()=>({type:Fe.error,error:Q}))}}async function yt(N,O,F,j,Q){let[J,...se]=await Promise.all([F.length?ci("loader",Q,F,O):[],...j.map(q=>{if(q.matches&&q.match&&q.controller){let le=Eo(t.history,q.path,q.controller.signal);return ci("loader",le,[q.match],q.matches).then(ne=>ne[0])}else return Promise.resolve({type:Fe.error,error:Zt(404,{pathname:q.path})})})]);return await Promise.all([w2(N,F,J,J.map(()=>Q.signal),!1,R.loaderData),w2(N,j.map(q=>q.match),se,j.map(q=>q.controller?q.controller.signal:null),!0)]),{loaderResults:J,fetcherResults:se}}function vt(){be=!0,St.push(...gs()),pe.forEach((N,O)=>{xe.has(O)&&(Yt.push(O),zn(O))})}function fn(N,O,F){F===void 0&&(F={}),R.fetchers.set(N,O),gt({fetchers:new Map(R.fetchers)},{flushSync:(F&&F.flushSync)===!0})}function Sn(N,O,F,j){j===void 0&&(j={});let Q=Wl(R.matches,O);ho(N),gt({errors:{[Q.route.id]:F},fetchers:new Map(R.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function Ha(N){return h.v7_fetcherPersist&&(De.set(N,(De.get(N)||0)+1),mt.has(N)&&mt.delete(N)),R.fetchers.get(N)||_I}function ho(N){let O=R.fetchers.get(N);xe.has(N)&&!(O&&O.state==="loading"&&ie.has(N))&&zn(N),pe.delete(N),ie.delete(N),fe.delete(N),mt.delete(N),R.fetchers.delete(N)}function ps(N){if(h.v7_fetcherPersist){let O=(De.get(N)||0)-1;O<=0?(De.delete(N),mt.add(N)):De.set(N,O)}else ho(N);gt({fetchers:new Map(R.fetchers)})}function zn(N){let O=xe.get(N);ge(O,"Expected fetch controller: "+N),O.abort(),xe.delete(N)}function Wa(N){for(let O of N){let F=Ha(O),j=wi(F.data);R.fetchers.set(O,j)}}function fo(){let N=[],O=!1;for(let F of fe){let j=R.fetchers.get(F);ge(j,"Expected fetcher: "+F),j.state==="loading"&&(fe.delete(F),N.push(F),O=!0)}return Wa(N),O}function uu(N){let O=[];for(let[F,j]of ie)if(j<N){let Q=R.fetchers.get(F);ge(Q,"Expected fetcher: "+F),Q.state==="loading"&&(zn(F),ie.delete(F),O.push(F))}return Wa(O),O.length>0}function kf(N,O){let F=R.blockers.get(N)||hl;return xt.get(N)!==O&&xt.set(N,O),F}function po(N){R.blockers.delete(N),xt.delete(N)}function ms(N,O){let F=R.blockers.get(N)||hl;ge(F.state==="unblocked"&&O.state==="blocked"||F.state==="blocked"&&O.state==="blocked"||F.state==="blocked"&&O.state==="proceeding"||F.state==="blocked"&&O.state==="unblocked"||F.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+F.state+" -> "+O.state);let j=new Map(R.blockers);j.set(N,O),gt({blockers:j})}function qa(N){let{currentLocation:O,nextLocation:F,historyAction:j}=N;if(xt.size===0)return;xt.size>1&&oa(!1,"A router only supports one blocker at a time");let Q=Array.from(xt.entries()),[J,se]=Q[Q.length-1],q=R.blockers.get(J);if(!(q&&q.state==="proceeding")&&se({currentLocation:O,nextLocation:F,historyAction:j}))return J}function xr(N){let O=Zt(404,{pathname:N}),F=a||o,{matches:j,route:Q}=v2(F);return gs(),{notFoundMatches:j,route:Q,error:O}}function ui(N,O){let F=O.partialMatches,j=F[F.length-1].route,Q=Zt(400,{type:"route-discovery",routeId:j.id,pathname:N,message:O.error!=null&&"message"in O.error?O.error:String(O.error)});return{notFoundMatches:F,route:j,error:Q}}function gs(N){let O=[];return At.forEach((F,j)=>{(!N||N(j))&&(F.cancel(),O.push(j),At.delete(j))}),O}function kr(N,O,F){if(y=N,P=O,I=F||null,!C&&R.navigation===lp){C=!0;let j=Ka(R.location,R.matches);j!=null&&gt({restoreScrollPosition:j})}return()=>{y=null,P=null,I=null}}function Ga(N,O){return I&&I(N,O.map(j=>XC(j,R.loaderData)))||N.key}function mo(N,O){if(y&&P){let F=Ga(N,O);y[F]=P()}}function Ka(N,O){if(y){let F=Ga(N,O),j=y[F];if(typeof j=="number")return j}return null}function Pr(N,O,F){if(d)if(N){let j=N[N.length-1].route;if(j.path&&(j.path==="*"||j.path.endsWith("/*")))return{active:!0,matches:dd(O,F,l,!0)}}else return{active:!0,matches:dd(O,F,l,!0)||[]};return{active:!1,matches:null}}async function ys(N,O,F){let j=N,Q=j.length>0?j[j.length-1].route:null;for(;;){let J=a==null,se=a||o;try{await II(d,O,j,se,s,i,jn,F)}catch(te){return{type:"error",error:te,partialMatches:j}}finally{J&&(o=[...o])}if(F.aborted)return{type:"aborted"};let q=Ss(se,O,l),le=!1;if(q){let te=q[q.length-1].route;if(te.index)return{type:"success",matches:q};if(te.path&&te.path.length>0)if(te.path==="*")le=!0;else return{type:"success",matches:q}}let ne=dd(se,O,l,!0);if(!ne||j.map(te=>te.route.id).join("-")===ne.map(te=>te.route.id).join("-"))return{type:"success",matches:le?q:null};if(j=ne,Q=j[j.length-1].route,Q.path==="*")return{type:"success",matches:j}}}function kt(N){s={},a=Ec(N,i,void 0,s)}function du(N,O){let F=a==null;j5(N,O,a||o,s,i),F&&(o=[...o],gt({}))}return z={get basename(){return l},get future(){return h},get state(){return R},get routes(){return o},get window(){return e},initialize:If,subscribe:co,enableScrollRestoration:kr,navigate:uo,fetch:cu,revalidate:$a,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:Ha,deleteFetcher:ps,dispose:lo,getBlocker:kf,deleteBlocker:po,patchRoutes:du,_internalFetchControllers:xe,_internalActiveDeferreds:At,_internalSetRoutes:kt},z}function bI(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function b0(t,e,n,r,i,s,o,a){let l,u;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){u=h;break}}else l=e,u=e[e.length-1];let d=Oh(i||".",Lh(l,s),Aa(t.pathname,n)||t.pathname,a==="path");return i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&u&&u.route.index&&!ng(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Gr([n,d.pathname])),Ws(d)}function c2(t,e,n,r){if(!r||!bI(r))return{path:n};if(r.formMethod&&!DI(r.formMethod))return{path:n,error:Zt(405,{method:r.formMethod})};let i=()=>({path:n,error:Zt(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=z5(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Xn(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,y)=>{let[I,P]=y;return""+g+I+"="+P+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Xn(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}ge(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=T0(r.formData),u=r.formData;else if(r.body instanceof FormData)l=T0(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=p2(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=p2(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Xn(d.formMethod))return{path:n,submission:d};let h=os(n);return e&&h.search&&ng(h.search)&&l.append("index",""),h.search="?"+l,{path:Ws(h),submission:d}}function TI(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function u2(t,e,n,r,i,s,o,a,l,u,d,h,p,g,y,I){let P=I?yn(I[1])?I[1].error:I[1].data:void 0,C=t.createURL(e.location),v=t.createURL(i),S=I&&yn(I[1])?I[0]:void 0,D=S?TI(n,S):n,z=I?I[1].statusCode:void 0,R=o&&z&&z>=400,T=D.filter((b,A)=>{let{route:k}=b;if(k.lazy)return!0;if(k.loader==null)return!1;if(s)return typeof k.loader!="function"||k.loader.hydrate?!0:e.loaderData[k.id]===void 0&&(!e.errors||e.errors[k.id]===void 0);if(CI(e.loaderData,e.matches[A],b)||l.some(be=>be===b.route.id))return!0;let L=e.matches[A],x=b;return d2(b,Ye({currentUrl:C,currentParams:L.params,nextUrl:v,nextParams:x.params},r,{actionResult:P,unstable_actionStatus:z,defaultShouldRevalidate:R?!1:a||C.pathname+C.search===v.pathname+v.search||C.search!==v.search||$5(L,x)}))}),_=[];return h.forEach((b,A)=>{if(s||!n.some(St=>St.route.id===b.routeId)||d.has(A))return;let k=Ss(g,b.path,y);if(!k){_.push({key:A,routeId:b.routeId,path:b.path,matches:null,match:null,controller:null});return}let L=e.fetchers.get(A),x=Al(k,b.path),be=!1;p.has(A)?be=!1:u.includes(A)?be=!0:L&&L.state!=="idle"&&L.data===void 0?be=a:be=d2(x,Ye({currentUrl:C,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:P,unstable_actionStatus:z,defaultShouldRevalidate:R?!1:a})),be&&_.push({key:A,routeId:b.routeId,path:b.path,matches:k,match:x,controller:new AbortController})}),[T,_]}function CI(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function $5(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function d2(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function II(t,e,n,r,i,s,o,a){let l=[e,...n.map(u=>u.route.id)].join("-");try{let u=o.get(l);u||(u=t({path:e,matches:n,patch:(d,h)=>{a.aborted||j5(d,h,r,i,s)}}),o.set(l,u)),u&&LI(u)&&await u}finally{o.delete(l)}}function j5(t,e,n,r,i){if(t){var s;let o=r[t];ge(o,"No route found to patch children into: routeId = "+t);let a=Ec(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Ec(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function h2(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ge(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";oa(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!KC.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Ye({},e(i),{lazy:void 0}))}function SI(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function AI(t,e,n,r,i,s,o,a){let l=r.reduce((h,p)=>h.add(p.route.id),new Set),u=new Set,d=await t({matches:i.map(h=>{let p=l.has(h.route.id);return Ye({},h,{shouldLoad:p,resolve:y=>(u.add(h.route.id),p?xI(e,n,h,s,o,y,a):Promise.resolve({type:Fe.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(h=>ge(u.has(h.route.id),'`match.resolve()` was not called for route id "'+h.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((h,p)=>l.has(i[p].route.id))}async function xI(t,e,n,r,i,s,o){let a,l,u=d=>{let h,p=new Promise((I,P)=>h=P);l=()=>h(),e.signal.addEventListener("abort",l);let g=I=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...I!==void 0?[I]:[]),y;return s?y=s(I=>g(I)):y=(async()=>{try{return{type:"data",result:await g()}}catch(I){return{type:"error",result:I}}})(),Promise.race([y,p])};try{let d=n.route[t];if(n.route.lazy)if(d){let h,[p]=await Promise.all([u(d).catch(g=>{h=g}),h2(n.route,i,r)]);if(h!==void 0)throw h;a=p}else if(await h2(n.route,i,r),d=n.route[t],d)a=await u(d);else if(t==="action"){let h=new URL(e.url),p=h.pathname+h.search;throw Zt(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Fe.data,result:void 0};else if(d)a=await u(d);else{let h=new URL(e.url),p=h.pathname+h.search;throw Zt(404,{pathname:p})}ge(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Fe.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function kI(t){let{result:e,type:n,status:r}=t;if(B5(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Fe.error,error:a}}return n===Fe.error?{type:Fe.error,error:new eg(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Fe.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Fe.error)return{type:Fe.error,error:e,statusCode:Mh(e)?e.status:r};if(MI(e)){var i,s;return{type:Fe.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Fe.data,data:e,statusCode:r}}function PI(t,e,n,r,i,s){let o=t.headers.get("Location");if(ge(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!tg.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=b0(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function f2(t,e,n){if(tg.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Aa(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Eo(t,e,n,r){let i=t.createURL(z5(e)).toString(),s={signal:n};if(r&&Xn(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=T0(r.formData):s.body=r.formData}return new Request(i,s)}function T0(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function p2(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function RI(t,e,n,r,i,s){let o={},a=null,l,u=!1,d={},h=r&&yn(r[1])?r[1].error:void 0;return n.forEach((p,g)=>{let y=e[g].route.id;if(ge(!Rs(p),"Cannot handle redirect results in processLoaderData"),yn(p)){let I=p.error;h!==void 0&&(I=h,h=void 0),a=a||{};{let P=Wl(t,y);a[P.route.id]==null&&(a[P.route.id]=I)}o[y]=void 0,u||(u=!0,l=Mh(p.error)?p.error.status:500),p.headers&&(d[y]=p.headers)}else Ps(p)?(i.set(y,p.deferredData),o[y]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!u&&(l=p.statusCode),p.headers&&(d[y]=p.headers)):(o[y]=p.data,p.statusCode&&p.statusCode!==200&&!u&&(l=p.statusCode),p.headers&&(d[y]=p.headers))}),h!==void 0&&r&&(a={[r[0]]:h},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:d}}function m2(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=RI(e,n,r,i,a);for(let d=0;d<s.length;d++){let{key:h,match:p,controller:g}=s[d];ge(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let y=o[d];if(!(g&&g.signal.aborted))if(yn(y)){let I=Wl(t.matches,p==null?void 0:p.route.id);u&&u[I.route.id]||(u=Ye({},u,{[I.route.id]:y.error})),t.fetchers.delete(h)}else if(Rs(y))ge(!1,"Unhandled fetcher revalidation redirect");else if(Ps(y))ge(!1,"Unhandled fetcher deferred data");else{let I=wi(y.data);t.fetchers.set(h,I)}}return{loaderData:l,errors:u}}function g2(t,e,n,r){let i=Ye({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function y2(t){return t?yn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Wl(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function v2(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zt(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `children()` function for '+("route `"+r+"` threw the following error:\n"+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new eg(t||500,a,new Error(l),!0)}function _2(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Rs(n))return{result:n,idx:e}}}function z5(t){let e=typeof t=="string"?os(t):t;return Ws(Ye({},e,{hash:""}))}function NI(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function LI(t){return typeof t=="object"&&t!=null&&"then"in t}function OI(t){return B5(t.result)&&yI.has(t.result.status)}function Ps(t){return t.type===Fe.deferred}function yn(t){return t.type===Fe.error}function Rs(t){return(t&&t.type)===Fe.redirect}function MI(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function B5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function DI(t){return gI.has(t.toLowerCase())}function Xn(t){return pI.has(t.toLowerCase())}async function w2(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(h=>h.route.id===l.route.id),d=u!=null&&!$5(u,l)&&(s&&s[l.route.id])!==void 0;if(Ps(a)&&(i||d)){let h=r[o];ge(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await H5(a,h,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function H5(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Fe.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Fe.error,error:i}}return{type:Fe.data,data:t.deferredData.data}}}function ng(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Al(t,e){let n=typeof e=="string"?os(e).search:e.search;if(t[t.length-1].route.index&&ng(n||""))return t[t.length-1];let r=V5(t);return r[r.length-1]}function E2(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function cp(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function VI(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function fl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function UI(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function wi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function FI(t,e){try{let n=t.sessionStorage.getItem(F5);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function $I(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(F5,JSON.stringify(n))}catch(r){oa(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gd.apply(this,arguments)}const Dh=V.createContext(null),W5=V.createContext(null),as=V.createContext(null),rg=V.createContext(null),si=V.createContext({outlet:null,matches:[],isDataRoute:!1}),q5=V.createContext(null);function jI(t,e){let{relative:n}=e===void 0?{}:e;xa()||ge(!1);let{basename:r,navigator:i}=V.useContext(as),{hash:s,pathname:o,search:a}=K5(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Gr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function xa(){return V.useContext(rg)!=null}function ls(){return xa()||ge(!1),V.useContext(rg).location}function G5(t){V.useContext(as).static||V.useLayoutEffect(t)}function no(){let{isDataRoute:t}=V.useContext(si);return t?tS():zI()}function zI(){xa()||ge(!1);let t=V.useContext(Dh),{basename:e,future:n,navigator:r}=V.useContext(as),{matches:i}=V.useContext(si),{pathname:s}=ls(),o=JSON.stringify(Lh(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return G5(()=>{a.current=!0}),V.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=Oh(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Gr([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}const BI=V.createContext(null);function HI(t){let e=V.useContext(si).outlet;return e&&V.createElement(BI.Provider,{value:t},e)}function K5(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(as),{matches:i}=V.useContext(si),{pathname:s}=ls(),o=JSON.stringify(Lh(i,r.v7_relativeSplatPath));return V.useMemo(()=>Oh(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function WI(t,e,n,r){xa()||ge(!1);let{navigator:i}=V.useContext(as),{matches:s}=V.useContext(si),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=ls(),d;d=u;let h=d.pathname||"/",p=h;if(l!=="/"){let I=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(I.length).join("/")}let g=Ss(t,{pathname:p});return XI(g&&g.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Gr([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Gr([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r)}function qI(){let t=eS(),e=Mh(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const GI=V.createElement(qI,null);class KI extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(si.Provider,{value:this.props.routeContext},V.createElement(q5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QI(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(Dh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(si.Provider,{value:e},r)}function XI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||ge(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:g}=n,y=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,y=!1,I=null,P=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,I=h.route.errorElement||GI,l&&(u<0&&p===0?(y=!0,P=null):u===p&&(y=!0,P=h.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,p+1)),v=()=>{let S;return g?S=I:y?S=P:h.route.Component?S=V.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=d,V.createElement(QI,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?V.createElement(KI,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:v(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):v()},null)}var Q5=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Q5||{}),Kd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Kd||{});function YI(t){let e=V.useContext(Dh);return e||ge(!1),e}function ZI(t){let e=V.useContext(W5);return e||ge(!1),e}function JI(t){let e=V.useContext(si);return e||ge(!1),e}function X5(t){let e=JI(),n=e.matches[e.matches.length-1];return n.route.id||ge(!1),n.route.id}function eS(){var t;let e=V.useContext(q5),n=ZI(Kd.UseRouteError),r=X5(Kd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function tS(){let{router:t}=YI(Q5.UseNavigateStable),e=X5(Kd.UseNavigateStable),n=V.useRef(!1);return G5(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Gd({fromRouteId:e},s)))},[t,e])}function nS(t){let{to:e,replace:n,state:r,relative:i}=t;xa()||ge(!1);let{future:s,static:o}=V.useContext(as),{matches:a}=V.useContext(si),{pathname:l}=ls(),u=no(),d=Oh(e,Lh(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return V.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function rS(t){return HI(t.context)}function iS(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dt.Pop,navigator:s,static:o=!1,future:a}=t;xa()&&ge(!1);let l=e.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:l,navigator:s,static:o,future:Gd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=os(r));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:y="default"}=r,I=V.useMemo(()=>{let P=Aa(d,l);return P==null?null:{location:{pathname:P,search:h,hash:p,state:g,key:y},navigationType:i}},[l,d,h,p,g,y,i]);return I==null?null:V.createElement(as.Provider,{value:u},V.createElement(rg.Provider,{children:n,value:I}))}new Promise(()=>{});function sS(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:V.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:V.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:V.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bc.apply(this,arguments)}function oS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lS(t,e){return t.button===0&&(!e||e==="_self")&&!aS(t)}const cS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],uS="6";try{window.__reactRouterVersion=uS}catch{}function dS(t,e){return EI({basename:void 0,future:bc({},void 0,{v7_prependBasename:!0}),history:WC({window:void 0}),hydrationData:hS(),routes:t,mapRouteProperties:sS,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function hS(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=bc({},e,{errors:fS(e.errors)})),e}function fS(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new eg(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const pS=V.createContext({isTransitioning:!1}),mS=V.createContext(new Map),gS="startTransition",b2=N7[gS],yS="flushSync",T2=HC[yS];function vS(t){b2?b2(t):t()}function pl(t){T2?T2(t):t()}let _S=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function wS(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=V.useState(n.state),[o,a]=V.useState(),[l,u]=V.useState({isTransitioning:!1}),[d,h]=V.useState(),[p,g]=V.useState(),[y,I]=V.useState(),P=V.useRef(new Map),{v7_startTransition:C}=r||{},v=V.useCallback(T=>{C?vS(T):T()},[C]),S=V.useCallback((T,_)=>{let{deletedFetchers:b,unstable_flushSync:A,unstable_viewTransitionOpts:k}=_;b.forEach(x=>P.current.delete(x)),T.fetchers.forEach((x,be)=>{x.data!==void 0&&P.current.set(be,x.data)});let L=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||L){A?pl(()=>s(T)):v(()=>s(T));return}if(A){pl(()=>{p&&(d&&d.resolve(),p.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let x=n.window.document.startViewTransition(()=>{pl(()=>s(T))});x.finished.finally(()=>{pl(()=>{h(void 0),g(void 0),a(void 0),u({isTransitioning:!1})})}),pl(()=>g(x));return}p?(d&&d.resolve(),p.skipTransition(),I({state:T,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(a(T),u({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,p,d,P,v]);V.useLayoutEffect(()=>n.subscribe(S),[n,S]),V.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new _S)},[l]),V.useEffect(()=>{if(d&&o&&n.window){let T=o,_=d.promise,b=n.window.document.startViewTransition(async()=>{v(()=>s(T)),await _});b.finished.finally(()=>{h(void 0),g(void 0),a(void 0),u({isTransitioning:!1})}),g(b)}},[v,o,d,n.window]),V.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,p,i.location,o]),V.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),u({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),I(void 0))},[l.isTransitioning,y]),V.useEffect(()=>{},[]);let D=V.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,_,b)=>n.navigate(T,{state:_,preventScrollReset:b==null?void 0:b.preventScrollReset}),replace:(T,_,b)=>n.navigate(T,{replace:!0,state:_,preventScrollReset:b==null?void 0:b.preventScrollReset})}),[n]),z=n.basename||"/",R=V.useMemo(()=>({router:n,navigator:D,static:!1,basename:z}),[n,D,z]);return V.createElement(V.Fragment,null,V.createElement(Dh.Provider,{value:R},V.createElement(W5.Provider,{value:i},V.createElement(mS.Provider,{value:P.current},V.createElement(pS.Provider,{value:l},V.createElement(iS,{basename:z,location:i.location,navigationType:i.historyAction,navigator:D,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?V.createElement(ES,{routes:n.routes,future:n.future,state:i}):e))))),null)}function ES(t){let{routes:e,future:n,state:r}=t;return WI(e,void 0,r,n)}const bS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tc=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,p=oS(e,cS),{basename:g}=V.useContext(as),y,I=!1;if(typeof u=="string"&&TS.test(u)&&(y=u,bS))try{let S=new URL(window.location.href),D=u.startsWith("//")?new URL(S.protocol+u):new URL(u),z=Aa(D.pathname,g);D.origin===S.origin&&z!=null?u=z+D.search+D.hash:I=!0}catch{}let P=jI(u,{relative:i}),C=CS(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:h});function v(S){r&&r(S),S.defaultPrevented||C(S)}return V.createElement("a",bc({},p,{href:y||P,onClick:I||s?r:v,ref:n,target:l}))});var C2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(C2||(C2={}));var I2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(I2||(I2={}));function CS(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=no(),u=ls(),d=K5(t,{relative:o});return V.useCallback(h=>{if(lS(h,n)){h.preventDefault();let p=r!==void 0?r:Ws(u)===Ws(d);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}const IS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M12%202.25c-5.385%200-9.75%204.365-9.75%209.75s4.365%209.75%209.75%209.75%209.75-4.365%209.75-9.75S17.385%202.25%2012%202.25ZM12.75%209a.75.75%200%200%200-1.5%200v2.25H9a.75.75%200%200%200%200%201.5h2.25V15a.75.75%200%200%200%201.5%200v-2.25H15a.75.75%200%200%200%200-1.5h-2.25V9Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",SS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M5.337%2021.718a6.707%206.707%200%200%201-.533-.074.75.75%200%200%201-.44-1.223%203.73%203.73%200%200%200%20.814-1.686c.023-.115-.022-.317-.254-.543C3.274%2016.587%202.25%2014.41%202.25%2012c0-5.03%204.428-9%209.75-9s9.75%203.97%209.75%209c0%205.03-4.428%209-9.75%209-.833%200-1.643-.097-2.417-.279a6.721%206.721%200%200%201-4.246.997Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",AS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='M11.47%203.841a.75.75%200%200%201%201.06%200l8.69%208.69a.75.75%200%201%200%201.06-1.061l-8.689-8.69a2.25%202.25%200%200%200-3.182%200l-8.69%208.69a.75.75%200%201%200%201.061%201.06l8.69-8.689Z'%20/%3e%3cpath%20d='m12%205.432%208.159%208.159c.03.03.06.058.091.086v6.198c0%201.035-.84%201.875-1.875%201.875H15a.75.75%200%200%201-.75-.75v-4.5a.75.75%200%200%200-.75-.75h-3a.75.75%200%200%200-.75.75V21a.75.75%200%200%201-.75.75H5.625a1.875%201.875%200%200%201-1.875-1.875v-6.198a2.29%202.29%200%200%200%20.091-.086L12%205.432Z'%20/%3e%3c/svg%3e",xS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M5.337%2021.718a6.707%206.707%200%200%201-.533-.074.75.75%200%200%201-.44-1.223%203.73%203.73%200%200%200%20.814-1.686c.023-.115-.022-.317-.254-.543C3.274%2016.587%202.25%2014.41%202.25%2012c0-5.03%204.428-9%209.75-9s9.75%203.97%209.75%209c0%205.03-4.428%209-9.75%209-.833%200-1.643-.097-2.417-.279a6.721%206.721%200%200%201-4.246.997Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",kS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='m11.645%2020.91-.007-.003-.022-.012a15.247%2015.247%200%200%201-.383-.218%2025.18%2025.18%200%200%201-4.244-3.17C4.688%2015.36%202.25%2012.174%202.25%208.25%202.25%205.322%204.714%203%207.688%203A5.5%205.5%200%200%201%2012%205.052%205.5%205.5%200%200%201%2016.313%203c2.973%200%205.437%202.322%205.437%205.25%200%203.925-2.438%207.111-4.739%209.256a25.175%2025.175%200%200%201-4.244%203.17%2015.247%2015.247%200%200%201-.383.219l-.022.012-.007.004-.003.001a.752.752%200%200%201-.704%200l-.003-.001Z'%20/%3e%3c/svg%3e",PS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M16.5%203.75a1.5%201.5%200%200%201%201.5%201.5v13.5a1.5%201.5%200%200%201-1.5%201.5h-6a1.5%201.5%200%200%201-1.5-1.5V15a.75.75%200%200%200-1.5%200v3.75a3%203%200%200%200%203%203h6a3%203%200%200%200%203-3V5.25a3%203%200%200%200-3-3h-6a3%203%200%200%200-3%203V9A.75.75%200%201%200%209%209V5.25a1.5%201.5%200%200%201%201.5-1.5h6ZM5.78%208.47a.75.75%200%200%200-1.06%200l-3%203a.75.75%200%200%200%200%201.06l3%203a.75.75%200%200%200%201.06-1.06l-1.72-1.72H15a.75.75%200%200%200%200-1.5H4.06l1.72-1.72a.75.75%200%200%200%200-1.06Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",RS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='M12%209a3.75%203.75%200%201%200%200%207.5A3.75%203.75%200%200%200%2012%209Z'%20/%3e%3cpath%20fill-rule='evenodd'%20d='M9.344%203.071a49.52%2049.52%200%200%201%205.312%200c.967.052%201.83.585%202.332%201.39l.821%201.317c.24.383.645.643%201.11.71.386.054.77.113%201.152.177%201.432.239%202.429%201.493%202.429%202.909V18a3%203%200%200%201-3%203h-15a3%203%200%200%201-3-3V9.574c0-1.416.997-2.67%202.429-2.909.382-.064.766-.123%201.151-.178a1.56%201.56%200%200%200%201.11-.71l.822-1.315a2.942%202.942%200%200%201%202.332-1.39ZM6.75%2012.75a5.25%205.25%200%201%201%2010.5%200%205.25%205.25%200%200%201-10.5%200Zm12-1.5a.75.75%200%201%200%200-1.5.75.75%200%200%200%200%201.5Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",NS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20d='M5.85%203.5a.75.75%200%200%200-1.117-1%209.719%209.719%200%200%200-2.348%204.876.75.75%200%200%200%201.479.248A8.219%208.219%200%200%201%205.85%203.5ZM19.267%202.5a.75.75%200%201%200-1.118%201%208.22%208.22%200%200%201%201.987%204.124.75.75%200%200%200%201.48-.248A9.72%209.72%200%200%200%2019.266%202.5Z'%20/%3e%3cpath%20fill-rule='evenodd'%20d='M12%202.25A6.75%206.75%200%200%200%205.25%209v.75a8.217%208.217%200%200%201-2.119%205.52.75.75%200%200%200%20.298%201.206c1.544.57%203.16.99%204.831%201.243a3.75%203.75%200%201%200%207.48%200%2024.583%2024.583%200%200%200%204.83-1.244.75.75%200%200%200%20.298-1.205%208.217%208.217%200%200%201-2.118-5.52V9A6.75%206.75%200%200%200%2012%202.25ZM9.75%2018c0-.034%200-.067.002-.1a25.05%2025.05%200%200%200%204.496%200l.002.1a2.25%202.25%200%201%201-4.5%200Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",LS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M18.685%2019.097A9.723%209.723%200%200%200%2021.75%2012c0-5.385-4.365-9.75-9.75-9.75S2.25%206.615%202.25%2012a9.723%209.723%200%200%200%203.065%207.097A9.716%209.716%200%200%200%2012%2021.75a9.716%209.716%200%200%200%206.685-2.653Zm-12.54-1.285A7.486%207.486%200%200%201%2012%2015a7.486%207.486%200%200%201%205.855%202.812A8.224%208.224%200%200%201%2012%2020.25a8.224%208.224%200%200%201-5.855-2.438ZM15.75%209a3.75%203.75%200%201%201-7.5%200%203.75%203.75%200%200%201%207.5%200Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",OS="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='currentColor'%20class='w-6%20h-6'%3e%3cpath%20fill-rule='evenodd'%20d='M11.078%202.25c-.917%200-1.699.663-1.85%201.567L9.05%204.889c-.02.12-.115.26-.297.348a7.493%207.493%200%200%200-.986.57c-.166.115-.334.126-.45.083L6.3%205.508a1.875%201.875%200%200%200-2.282.819l-.922%201.597a1.875%201.875%200%200%200%20.432%202.385l.84.692c.095.078.17.229.154.43a7.598%207.598%200%200%200%200%201.139c.015.2-.059.352-.153.43l-.841.692a1.875%201.875%200%200%200-.432%202.385l.922%201.597a1.875%201.875%200%200%200%202.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178%201.071c.151.904.933%201.567%201.85%201.567h1.844c.916%200%201.699-.663%201.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875%201.875%200%200%200%202.28-.819l.923-1.597a1.875%201.875%200%200%200-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614%207.614%200%200%200%200-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875%201.875%200%200%200-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49%207.49%200%200%200-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875%201.875%200%200%200-1.85-1.567h-1.843ZM12%2015.75a3.75%203.75%200%201%200%200-7.5%203.75%203.75%200%200%200%200%207.5Z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",Ei={add:IS,comment:SS,home:AS,direct:xS,heart:kS,logout:PS,myphoto:RS,notification:NS,profile:LS,settings:OS};function Y5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Y5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function MS(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Y5(t))&&(r&&(r+=" "),r+=e);return r}const ig="-";function DS(t){const e=US(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(ig);return a[0]===""&&a.length!==1&&a.shift(),Z5(a,e)||VS(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function Z5(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Z5(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(ig);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const S2=/^\[(.+)\]$/;function VS(t){if(S2.test(t)){const e=S2.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function US(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return $S(Object.entries(t.classGroups),n).forEach(([s,o])=>{C0(o,r,s,e)}),r}function C0(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:A2(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(FS(i)){C0(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{C0(o,A2(e,s),n,r)})})}function A2(t,e){let n=t;return e.split(ig).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function FS(t){return t.isThemeGetter}function $S(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function jS(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const J5="!";function zS(t){const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length;function o(a){const l=[];let u=0,d=0,h;for(let P=0;P<a.length;P++){let C=a[P];if(u===0){if(C===i&&(r||a.slice(P,P+s)===e)){l.push(a.slice(d,P)),d=P+s;continue}if(C==="/"){h=P;continue}}C==="["?u++:C==="]"&&u--}const p=l.length===0?a:a.substring(d),g=p.startsWith(J5),y=g?p.substring(1):p,I=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:I}}return n?function(l){return n({className:l,parseClassName:o})}:o}function BS(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function HS(t){return{cache:jS(t.cacheSize),parseClassName:zS(t),...DS(t)}}const WS=/\s+/;function qS(t,e){const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(WS).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:u,maybePostfixModifierPosition:d}=n(o);let h=!!d,p=r(h?u.substring(0,d):u);if(!p){if(!h)return{isTailwindClass:!1,originalClassName:o};if(p=r(u),!p)return{isTailwindClass:!1,originalClassName:o};h=!1}const g=BS(a).join(":");return{isTailwindClass:!0,modifierId:l?g+J5:g,classGroupId:p,originalClassName:o,hasPostfixModifier:h}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:u}=o,d=a+l;return s.has(d)?!1:(s.add(d),i(l,u).forEach(h=>s.add(a+h)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function GS(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=e4(e))&&(r&&(r+=" "),r+=n);return r}function e4(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=e4(t[r]))&&(n&&(n+=" "),n+=e);return n}function KS(t,...e){let n,r,i,s=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return n=HS(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=qS(l,n);return i(l,d),d}return function(){return s(GS.apply(null,arguments))}}function He(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const t4=/^\[(?:([a-z-]+):)?(.+)\]$/i,QS=/^\d+\/\d+$/,XS=new Set(["px","full","screen"]),YS=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JS=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,e6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,t6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function Or(t){return Ns(t)||XS.has(t)||QS.test(t)}function yi(t){return ka(t,"length",c6)}function Ns(t){return!!t&&!Number.isNaN(Number(t))}function $u(t){return ka(t,"number",Ns)}function ml(t){return!!t&&Number.isInteger(Number(t))}function n6(t){return t.endsWith("%")&&Ns(t.slice(0,-1))}function he(t){return t4.test(t)}function vi(t){return YS.test(t)}const r6=new Set(["length","size","percentage"]);function i6(t){return ka(t,r6,n4)}function s6(t){return ka(t,"position",n4)}const o6=new Set(["image","url"]);function a6(t){return ka(t,o6,d6)}function l6(t){return ka(t,"",u6)}function gl(){return!0}function ka(t,e,n){const r=t4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function c6(t){return ZS.test(t)&&!JS.test(t)}function n4(){return!1}function u6(t){return e6.test(t)}function d6(t){return t6.test(t)}function h6(){const t=He("colors"),e=He("spacing"),n=He("blur"),r=He("brightness"),i=He("borderColor"),s=He("borderRadius"),o=He("borderSpacing"),a=He("borderWidth"),l=He("contrast"),u=He("grayscale"),d=He("hueRotate"),h=He("invert"),p=He("gap"),g=He("gradientColorStops"),y=He("gradientColorStopPositions"),I=He("inset"),P=He("margin"),C=He("opacity"),v=He("padding"),S=He("saturate"),D=He("scale"),z=He("sepia"),R=He("skew"),T=He("space"),_=He("translate"),b=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",he,e],L=()=>[he,e],x=()=>["",Or,yi],be=()=>["auto",Ns,he],St=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Yt=()=>["solid","dashed","dotted","double","none"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",he],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>[Ns,$u],pe=()=>[Ns,he];return{cacheSize:500,separator:":",theme:{colors:[gl],spacing:[Or,yi],blur:["none","",vi,he],brightness:fe(),borderColor:[t],borderRadius:["none","","full",vi,he],borderSpacing:L(),borderWidth:x(),contrast:fe(),grayscale:ee(),hueRotate:pe(),invert:ee(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[n6,yi],inset:k(),margin:k(),opacity:fe(),padding:L(),saturate:fe(),scale:fe(),sepia:ee(),skew:pe(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",he]}],container:["container"],columns:[{columns:[vi]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...St(),he]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[I]}],"inset-x":[{"inset-x":[I]}],"inset-y":[{"inset-y":[I]}],start:[{start:[I]}],end:[{end:[I]}],top:[{top:[I]}],right:[{right:[I]}],bottom:[{bottom:[I]}],left:[{left:[I]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ml,he]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",he]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",ml,he]}],"grid-cols":[{"grid-cols":[gl]}],"col-start-end":[{col:["auto",{span:["full",ml,he]},he]}],"col-start":[{"col-start":be()}],"col-end":[{"col-end":be()}],"grid-rows":[{"grid-rows":[gl]}],"row-start-end":[{row:["auto",{span:[ml,he]},he]}],"row-start":[{"row-start":be()}],"row-end":[{"row-end":be()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",he]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",he]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[P]}],mx:[{mx:[P]}],my:[{my:[P]}],ms:[{ms:[P]}],me:[{me:[P]}],mt:[{mt:[P]}],mr:[{mr:[P]}],mb:[{mb:[P]}],ml:[{ml:[P]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",he,e]}],"min-w":[{"min-w":[he,e,"min","max","fit"]}],"max-w":[{"max-w":[he,e,"none","full","min","max","fit","prose",{screen:[vi]},vi]}],h:[{h:[he,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[he,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vi,yi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",$u]}],"font-family":[{font:[gl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",he]}],"line-clamp":[{"line-clamp":["none",Ns,$u]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Or,he]}],"list-image":[{"list-image":["none",he]}],"list-style-type":[{list:["none","disc","decimal",he]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Yt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Or,yi]}],"underline-offset":[{"underline-offset":["auto",Or,he]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...St(),s6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",i6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},a6]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...Yt(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:Yt()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Yt()]}],"outline-offset":[{"outline-offset":[Or,he]}],"outline-w":[{outline:[Or,yi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:x()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Or,yi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",vi,l6]}],"shadow-color":[{shadow:[gl]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...xe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":xe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",vi,he]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[z]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",he]}],duration:[{duration:pe()}],ease:[{ease:["linear","in","out","in-out",he]}],delay:[{delay:pe()}],animate:[{animate:["none","spin","ping","pulse","bounce",he]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[ml,he]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",he]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Or,yi,$u]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const f6=KS(h6);function Tn(...t){return f6(MS(t))}function p6(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function m6(...t){return e=>t.forEach(n=>p6(n,e))}var sg=V.forwardRef((t,e)=>{const{children:n,...r}=t,i=V.Children.toArray(n),s=i.find(y6);if(s){const o=s.props.children,a=i.map(l=>l===s?V.Children.count(o)>1?V.Children.only(null):V.isValidElement(o)?o.props.children:null:l);return E.jsx(I0,{...r,ref:e,children:V.isValidElement(o)?V.cloneElement(o,void 0,a):null})}return E.jsx(I0,{...r,ref:e,children:n})});sg.displayName="Slot";var I0=V.forwardRef((t,e)=>{const{children:n,...r}=t;if(V.isValidElement(n)){const i=_6(n);return V.cloneElement(n,{...v6(r,n.props),ref:e?m6(e,i):i})}return V.Children.count(n)>1?V.Children.only(null):null});I0.displayName="SlotClone";var g6=({children:t})=>E.jsx(E.Fragment,{children:t});function y6(t){return V.isValidElement(t)&&t.type===g6}function v6(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function _6(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function r4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r4(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function w6(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=r4(t))&&(r&&(r+=" "),r+=e);return r}const x2=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,k2=w6,i4=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return k2(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const p=x2(d)||x2(h);return i[u][p]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...g}=d;return Object.entries(g).every(y=>{let[I,P]=y;return Array.isArray(P)?P.includes({...s,...a}[I]):{...s,...a}[I]===P})?[...u,h,p]:u},[]);return k2(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},S0=i4("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),sr=V.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?sg:"button";return E.jsx(o,{className:Tn(S0({variant:e,size:n,className:t})),ref:s,...i})});sr.displayName="Button";var P2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},E6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},o4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):E6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new b6;const p=s<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class b6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T6=function(t){const e=s4(t);return o4.encodeByteArray(e,!0)},Qd=function(t){return T6(t).replace(/\./g,"")},a4=function(t){try{return o4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=()=>C6().__FIREBASE_DEFAULTS__,S6=()=>{if(typeof process>"u"||typeof P2>"u")return;const t=P2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},A6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&a4(t[1]);return e&&JSON.parse(e)},Vh=()=>{try{return I6()||S6()||A6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l4=t=>{var e,n;return(n=(e=Vh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},x6=t=>{const e=l4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},c4=()=>{var t;return(t=Vh())===null||t===void 0?void 0:t.config},u4=t=>{var e;return(e=Vh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qd(JSON.stringify(n)),Qd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function N6(){var t;const e=(t=Vh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function O6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M6(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function D6(){return!N6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V6(){try{return typeof indexedDB=="object"}catch{return!1}}function U6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="FirebaseError";class oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=F6,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$6(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new oi(i,a,r)}}function $6(t,e){return t.replace(j6,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const j6=/\{\$([^}]+)}/g;function z6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(R2(s)&&R2(o)){if(!Xd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function R2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function kl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function B6(t,e){const n=new H6(t,e);return n.subscribe.bind(n)}class H6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");W6(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=up),i.error===void 0&&(i.error=up),i.complete===void 0&&(i.complete=up);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function up(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new k6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K6(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:G6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G6(t){return t===Is?void 0:t}function K6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const X6={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Y6=Te.INFO,Z6={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},J6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Z6[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=Y6,this._logHandler=J6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const eA=(t,e)=>e.some(n=>t instanceof n);let N2,L2;function tA(){return N2||(N2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nA(){return L2||(L2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d4=new WeakMap,A0=new WeakMap,h4=new WeakMap,dp=new WeakMap,ag=new WeakMap;function rA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&d4.set(n,t)}).catch(()=>{}),ag.set(e,t),e}function iA(t){if(A0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});A0.set(t,e)}let x0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return A0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sA(t){x0=t(x0)}function oA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hp(this),e,...n);return h4.set(r,e.sort?e.sort():[e]),zi(r)}:nA().includes(t)?function(...e){return t.apply(hp(this),e),zi(d4.get(this))}:function(...e){return zi(t.apply(hp(this),e))}}function aA(t){return typeof t=="function"?oA(t):(t instanceof IDBTransaction&&iA(t),eA(t,tA())?new Proxy(t,x0):t)}function zi(t){if(t instanceof IDBRequest)return rA(t);if(dp.has(t))return dp.get(t);const e=aA(t);return e!==t&&(dp.set(t,e),ag.set(e,t)),e}const hp=t=>ag.get(t);function lA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(zi(o.result),l.oldVersion,l.newVersion,zi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const cA=["get","getKey","getAll","getAllKeys","count"],uA=["put","add","delete","clear"],fp=new Map;function O2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fp.get(e))return fp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cA.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return fp.set(e,s),s}sA(t=>({...t,get:(e,n,r)=>O2(e,n)||t.get(e,n,r),has:(e,n)=>!!O2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const k0="@firebase/app",M2="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new og("@firebase/app"),fA="@firebase/app-compat",pA="@firebase/analytics-compat",mA="@firebase/analytics",gA="@firebase/app-check-compat",yA="@firebase/app-check",vA="@firebase/auth",_A="@firebase/auth-compat",wA="@firebase/database",EA="@firebase/database-compat",bA="@firebase/functions",TA="@firebase/functions-compat",CA="@firebase/installations",IA="@firebase/installations-compat",SA="@firebase/messaging",AA="@firebase/messaging-compat",xA="@firebase/performance",kA="@firebase/performance-compat",PA="@firebase/remote-config",RA="@firebase/remote-config-compat",NA="@firebase/storage",LA="@firebase/storage-compat",OA="@firebase/firestore",MA="@firebase/vertexai-preview",DA="@firebase/firestore-compat",VA="firebase",UA="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="[DEFAULT]",FA={[k0]:"fire-core",[fA]:"fire-core-compat",[mA]:"fire-analytics",[pA]:"fire-analytics-compat",[yA]:"fire-app-check",[gA]:"fire-app-check-compat",[vA]:"fire-auth",[_A]:"fire-auth-compat",[wA]:"fire-rtdb",[EA]:"fire-rtdb-compat",[bA]:"fire-fn",[TA]:"fire-fn-compat",[CA]:"fire-iid",[IA]:"fire-iid-compat",[SA]:"fire-fcm",[AA]:"fire-fcm-compat",[xA]:"fire-perf",[kA]:"fire-perf-compat",[PA]:"fire-rc",[RA]:"fire-rc-compat",[NA]:"fire-gcs",[LA]:"fire-gcs-compat",[OA]:"fire-fst",[DA]:"fire-fst-compat",[MA]:"fire-vertex","fire-js":"fire-js",[VA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new Map,$A=new Map,R0=new Map;function D2(t,e){try{t.container.addComponent(e)}catch(n){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function aa(t){const e=t.name;if(R0.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;R0.set(e,t);for(const n of Yd.values())D2(n,t);for(const n of $A.values())D2(n,t);return!0}function lg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new zc("app","Firebase",jA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=UA;function f4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:P0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bi.create("bad-app-name",{appName:String(i)});if(n||(n=c4()),!n)throw Bi.create("no-options");const s=Yd.get(i);if(s){if(Xd(n,s.options)&&Xd(r,s.config))return s;throw Bi.create("duplicate-app",{appName:i})}const o=new Q6(i);for(const l of R0.values())o.addComponent(l);const a=new zA(n,r,o);return Yd.set(i,a),a}function p4(t=P0){const e=Yd.get(t);if(!e&&t===P0&&c4())return f4();if(!e)throw Bi.create("no-app",{appName:t});return e}function Hi(t,e,n){var r;let i=(r=FA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(a.join(" "));return}aa(new qs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebase-heartbeat-database",HA=1,Cc="firebase-heartbeat-store";let pp=null;function m4(){return pp||(pp=lA(BA,HA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bi.create("idb-open",{originalErrorMessage:t.message})})),pp}async function WA(t){try{const n=(await m4()).transaction(Cc),r=await n.objectStore(Cc).get(g4(t));return await n.done,r}catch(e){if(e instanceof oi)Gs.warn(e.message);else{const n=Bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gs.warn(n.message)}}}async function V2(t,e){try{const r=(await m4()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,g4(t)),await r.done}catch(n){if(n instanceof oi)Gs.warn(n.message);else{const r=Bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gs.warn(r.message)}}}function g4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1024,GA=30*24*60*60*1e3;class KA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=U2();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=GA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=U2(),{heartbeatsToSend:r,unsentEntries:i}=QA(this._heartbeatsCache.heartbeats),s=Qd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function U2(){return new Date().toISOString().substring(0,10)}function QA(t,e=qA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),F2(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),F2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V6()?U6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return V2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return V2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function F2(t){return Qd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){aa(new qs("platform-logger",e=>new dA(e),"PRIVATE")),aa(new qs("heartbeat",e=>new KA(e),"PRIVATE")),Hi(k0,M2,t),Hi(k0,M2,"esm2017"),Hi("fire-js","")}YA("");var ZA="firebase",JA="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hi(ZA,JA,"app");function cg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function y4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ex=y4,v4=new zc("auth","Firebase",y4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new og("@firebase/auth");function tx(t,...e){Zd.logLevel<=Te.WARN&&Zd.warn(`Auth (${Pa}): ${t}`,...e)}function hd(t,...e){Zd.logLevel<=Te.ERROR&&Zd.error(`Auth (${Pa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw dg(t,...e)}function tr(t,...e){return dg(t,...e)}function ug(t,e,n){const r=Object.assign(Object.assign({},ex()),{[e]:n});return new zc("auth","Firebase",r).create(e,{appName:t.name})}function Kr(t){return ug(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nx(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fn(t,"argument-error"),ug(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return v4.create(t,...e)}function oe(t,e,...n){if(!t)throw dg(e,...n)}function Br(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hd(e),new Error(e)}function ei(t,e){t||Br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rx(){return $2()==="http:"||$2()==="https:"}function $2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rx()||L6()||"connection"in navigator)?navigator.onLine:!0}function sx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=R6()||O6()}get(){return ix()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Hc(3e4,6e4);function cs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ai(t,e,n,r,i={}){return w4(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Bc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),_4.fetch()(E4(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function w4(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ox),e);try{const i=new cx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ju(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ju(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ju(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ju(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ug(t,d,u);Fn(t,d)}}catch(i){if(i instanceof oi)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function Wc(t,e,n,r,i={}){const s=await ai(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function E4(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?hg(t.config,i):`${t.config.apiScheme}://${i}`}function lx(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tr(this.auth,"network-request-failed")),ax.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ju(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tr(t,e,r);return i.customData._tokenResponse=n,i}function j2(t){return t!==void 0&&t.enterprise!==void 0}class ux{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function dx(t,e){return ai(t,"GET","/v2/recaptchaConfig",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(t,e){return ai(t,"POST","/v1/accounts:delete",e)}async function b4(t,e){return ai(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fx(t,e=!1){const n=bt(t),r=await n.getIdToken(e),i=fg(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ql(mp(i.auth_time)),issuedAtTime:ql(mp(i.iat)),expirationTime:ql(mp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mp(t){return Number(t)*1e3}function fg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hd("JWT malformed, contained fewer than 3 sections"),null;try{const i=a4(n);return i?JSON.parse(i):(hd("Failed to decode base64 JWT payload"),null)}catch(i){return hd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function z2(t){const e=fg(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof oi&&px(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function px({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ql(this.lastLoginAt),this.creationTime=ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await la(t,b4(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?T4(s.providerUserInfo):[],a=yx(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function gx(t){const e=bt(t);await Jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function T4(t){return t.map(e=>{var{providerId:n}=e,r=cg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(t,e){const n=await w4(t,{},async()=>{const r=Bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=E4(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_4.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _x(t,e){return ai(t,"POST","/v2/accounts:revokeToken",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=z2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await vx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Qo;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=cg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new L0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await la(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fx(this,e)}reload(){return gx(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await la(this,hx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,C=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:D,isAnonymous:z,providerData:R,stsTokenManager:T}=n;oe(S&&T,e,"internal-error");const _=Qo.fromJSON(this.name,T);oe(typeof S=="string",e,"internal-error"),_i(h,e.name),_i(p,e.name),oe(typeof D=="boolean",e,"internal-error"),oe(typeof z=="boolean",e,"internal-error"),_i(g,e.name),_i(y,e.name),_i(I,e.name),_i(P,e.name),_i(C,e.name),_i(v,e.name);const b=new Hr({uid:S,auth:e,email:p,emailVerified:D,displayName:h,isAnonymous:z,photoURL:y,phoneNumber:g,tenantId:I,stsTokenManager:_,createdAt:C,lastLoginAt:v});return R&&Array.isArray(R)&&(b.providerData=R.map(A=>Object.assign({},A))),P&&(b._redirectEventId=P),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Qo;i.updateFromServerResponse(n);const s=new Hr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Jd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?T4(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Qo;a.updateFromIdToken(r);const l=new Hr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new L0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new Map;function Wr(t){ei(t instanceof Function,"Expected a class definition");let e=B2.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,B2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C4.type="NONE";const H2=C4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t,e,n){return`firebase:${t}:${e}:${n}`}class Xo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=fd(this.userKey,i.apiKey,s),this.fullPersistenceKey=fd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xo(Wr(H2),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Wr(H2);const o=fd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Hr._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Xo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Xo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k4(e))return"Blackberry";if(P4(e))return"Webos";if(pg(e))return"Safari";if((e.includes("chrome/")||S4(e))&&!e.includes("edge/"))return"Chrome";if(x4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function I4(t=Ut()){return/firefox\//i.test(t)}function pg(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S4(t=Ut()){return/crios\//i.test(t)}function A4(t=Ut()){return/iemobile/i.test(t)}function x4(t=Ut()){return/android/i.test(t)}function k4(t=Ut()){return/blackberry/i.test(t)}function P4(t=Ut()){return/webos/i.test(t)}function Uh(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wx(t=Ut()){var e;return Uh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ex(){return M6()&&document.documentMode===10}function R4(t=Ut()){return Uh(t)||x4(t)||P4(t)||k4(t)||/windows phone/i.test(t)||A4(t)}function bx(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t,e=[]){let n;switch(t){case"Browser":n=W2(Ut());break;case"Worker":n=`${W2(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(t,e={}){return ai(t,"GET","/v2/passwordPolicy",cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=6;class Sx{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ix,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q2(this),this.idTokenSubscription=new q2(this),this.beforeStateQueue=new Tx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await b4(this,{idToken:e}),r=await Hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Kr(this));const n=e?bt(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cx(this),n=new Sx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _x(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function us(t){return bt(t)}class q2{constructor(e){this.auth=e,this.observer=null,this.addObserver=B6(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xx(t){Fh=t}function L4(t){return Fh.loadJS(t)}function kx(){return Fh.recaptchaEnterpriseScript}function Px(){return Fh.gapiScript}function Rx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Nx="recaptcha-enterprise",Lx="NO_RECAPTCHA";class Ox{constructor(e){this.type=Nx,this.auth=us(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{dx(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new ux(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;j2(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Lx)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&j2(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=kx();l.length!==0&&(l+=a),L4(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function G2(t,e,n,r=!1){const i=new Ox(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function O0(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await G2(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await G2(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e){const n=lg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Xd(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function Dx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Vx(t,e,n){const r=us(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=O4(e),{host:o,port:a}=Ux(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Fx()}function O4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ux(t){const e=O4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:K2(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:K2(o)}}}function K2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Fx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,n){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}async function $x(t,e){return ai(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(t,e){return Wc(t,"POST","/v1/accounts:signInWithPassword",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(t,e){return Wc(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}async function Bx(t,e){return Wc(t,"POST","/v1/accounts:signInWithEmailLink",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends mg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ic(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ic(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O0(e,n,"signInWithPassword",jx);case"emailLink":return zx(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O0(e,r,"signUpPassword",$x);case"emailLink":return Bx(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e){return Wc(t,"POST","/v1/accounts:signInWithIdp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="http://localhost";class Ks extends mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=cg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ks(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yo(e,n)}buildRequest(){const e={requestUri:Hx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qx(t){const e=xl(kl(t)).link,n=e?xl(kl(e)).deep_link_id:null,r=xl(kl(t)).deep_link_id;return(r?xl(kl(r)).link:null)||r||n||e||t}class gg{constructor(e){var n,r,i,s,o,a;const l=xl(kl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=Wx((i=l.mode)!==null&&i!==void 0?i:null);oe(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qx(e);try{return new gg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.providerId=Ra.PROVIDER_ID}static credential(e,n){return Ic._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gg.parseLink(n);return oe(r,"argument-error"),Ic._fromEmailAndCode(e,r.code,r.tenantId)}}Ra.PROVIDER_ID="password";Ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends yg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends qc{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ks._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends qc{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.GITHUB_SIGN_IN_METHOD="github.com";xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends qc{constructor(){super("twitter.com")}static credential(e,n){return Ks._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(t,e){return Wc(t,"POST","/v1/accounts:signUp",cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Hr._fromIdTokenResponse(e,r,i),o=Q2(r);return new Qs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Q2(r);return new Qs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Q2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends oi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,eh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new eh(e,n,r,i)}}function M4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?eh._fromErrorAndOperation(t,s,e,r):s})}async function Kx(t,e,n=!1){const r=await la(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(Kr(r));const i="reauthenticate";try{const s=await la(t,M4(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=fg(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Qs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e,n=!1){if(Zn(t.app))return Promise.reject(Kr(t));const r="signIn",i=await M4(t,r,e),s=await Qs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Xx(t,e){return D4(us(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t){const e=us(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Yx(t,e,n){if(Zn(t.app))return Promise.reject(Kr(t));const r=us(t),o=await O0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gx).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&V4(t),l}),a=await Qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Zx(t,e,n){return Zn(t.app)?Promise.reject(Kr(t)):Xx(bt(t),Ra.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&V4(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(t,e){return ai(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=bt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await la(r,Jx(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function t8(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function n8(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function U4(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}function r8(t){return bt(t).signOut()}const th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(th,"1"),this.storage.removeItem(th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(){const t=Ut();return pg(t)||Uh(t)}const s8=1e3,o8=10;class $4 extends F4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=i8()&&bx(),this.fallbackToPolling=R4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Ex()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,o8):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},s8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$4.type="LOCAL";const a8=$4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4 extends F4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j4.type="SESSION";const z4=j4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new $h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await l8(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=vg("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function u8(t){_r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function d8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function f8(){return B4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="firebaseLocalStorageDb",p8=1,nh="firebaseLocalStorage",W4="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jh(t,e){return t.transaction([nh],e?"readwrite":"readonly").objectStore(nh)}function m8(){const t=indexedDB.deleteDatabase(H4);return new Gc(t).toPromise()}function M0(){const t=indexedDB.open(H4,p8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nh,{keyPath:W4})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nh)?e(r):(r.close(),await m8(),e(await M0()))})})}async function X2(t,e,n){const r=jh(t,!0).put({[W4]:e,value:n});return new Gc(r).toPromise()}async function g8(t,e){const n=jh(t,!1).get(e),r=await new Gc(n).toPromise();return r===void 0?null:r.value}function Y2(t,e){const n=jh(t,!0).delete(e);return new Gc(n).toPromise()}const y8=800,v8=3;class q4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await M0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>v8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(f8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await d8(),!this.activeServiceWorker)return;this.sender=new c8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await M0();return await X2(e,th,"1"),await Y2(e,th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>X2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>g8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Y2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=jh(i,!1).getAll();return new Gc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q4.type="LOCAL";const _8=q4;new Hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t,e){return e?Wr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function w8(t){return D4(t.auth,new _g(t),t.bypassAuthState)}function E8(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),Qx(n,new _g(t),t.bypassAuthState)}async function b8(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),Kx(n,new _g(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w8;case"linkViaPopup":case"linkViaRedirect":return b8;case"reauthViaPopup":case"reauthViaRedirect":return E8;default:Fn(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=new Hc(2e3,1e4);async function C8(t,e,n){if(Zn(t.app))return Promise.reject(tr(t,"operation-not-supported-in-this-environment"));const r=us(t);nx(t,e,yg);const i=G4(r,n);return new Ls(r,"signInViaPopup",e,i).executeNotNull()}class Ls extends K4{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ls.currentPopupAction&&Ls.currentPopupAction.cancel(),Ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T8.get())};e()}}Ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="pendingRedirect",pd=new Map;class S8 extends K4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const r=await A8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A8(t,e){const n=P8(e),r=k8(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function x8(t,e){pd.set(t._key(),e)}function k8(t){return Wr(t._redirectPersistence)}function P8(t){return fd(I8,t.config.apiKey,t.name)}async function R8(t,e,n=!1){if(Zn(t.app))return Promise.reject(Kr(t));const r=us(t),i=G4(r,e),o=await new S8(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=10*60*1e3;class L8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Q4(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N8&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z2(e))}saveEventToCache(e){this.cachedEventUids.add(Z2(e)),this.lastProcessedEventTime=Date.now()}}function Z2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Q4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function O8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M8(t,e={}){return ai(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V8=/^https?/;async function U8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await M8(t);for(const n of e)try{if(F8(n))return}catch{}Fn(t,"unauthorized-domain")}function F8(t){const e=N0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!V8.test(n))return!1;if(D8.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=new Hc(3e4,6e4);function J2(){const t=_r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j8(t){return new Promise((e,n)=>{var r,i,s;function o(){J2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J2(),n(tr(t,"network-request-failed"))},timeout:$8.get()})}if(!((i=(r=_r().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_r().gapi)===null||s===void 0)&&s.load)o();else{const a=Rx("iframefcb");return _r()[a]=()=>{gapi.load?o():n(tr(t,"network-request-failed"))},L4(`${Px()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw md=null,e})}let md=null;function z8(t){return md=md||j8(t),md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8=new Hc(5e3,15e3),H8="__/auth/iframe",W8="emulator/auth/iframe",q8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K8(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hg(e,W8):`https://${t.config.authDomain}/${H8}`,r={apiKey:e.apiKey,appName:t.name,v:Pa},i=G8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Bc(r).slice(1)}`}async function Q8(t){const e=await z8(t),n=_r().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:K8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=tr(t,"network-request-failed"),a=_r().setTimeout(()=>{s(o)},B8.get());function l(){_r().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y8=500,Z8=600,J8="_blank",e9="http://localhost";class ev{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t9(t,e,n,r=Y8,i=Z8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},X8),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ut().toLowerCase();n&&(a=S4(u)?J8:n),I4(u)&&(e=e||e9,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(wx(u)&&a!=="_self")return n9(e||"",a),new ev(null);const h=window.open(e||"",a,d);oe(h,t,"popup-blocked");try{h.focus()}catch{}return new ev(h)}function n9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="__/auth/handler",i9="emulator/auth/handler",s9=encodeURIComponent("fac");async function tv(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pa,eventId:i};if(e instanceof yg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",z6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof qc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${s9}=${encodeURIComponent(l)}`:"";return`${o9(t)}?${Bc(a).slice(1)}${u}`}function o9({config:t}){return t.emulator?hg(t,i9):`https://${t.authDomain}/${r9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="webStorageSupport";class a9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=z4,this._completeRedirectFn=R8,this._overrideRedirectResult=x8}async _openPopup(e,n,r,i){var s;ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await tv(e,n,r,N0(),i);return t9(e,o,vg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await tv(e,n,r,N0(),i);return u8(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ei(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Q8(e),r=new L8(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gp,{type:gp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gp];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=U8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R4()||pg()||Uh()}}const l9=a9;var nv="@firebase/auth",rv="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d9(t){aa(new qs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N4(t)},u=new Ax(r,i,s,l);return Dx(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),aa(new qs("auth-internal",e=>{const n=us(e.getProvider("auth").getImmediate());return(r=>new c9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hi(nv,rv,u9(t)),Hi(nv,rv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=5*60,f9=u4("authIdTokenMaxAge")||h9;let iv=null;const p9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>f9)return;const i=n==null?void 0:n.token;iv!==i&&(iv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function X4(t=p4()){const e=lg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Mx(t,{popupRedirectResolver:l9,persistence:[_8,a8,z4]}),r=u4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=p9(s.toString());n8(n,o,()=>o(n.currentUser)),t8(n,a=>o(a))}}const i=l4("auth");return i&&Vx(n,`http://${i}`),n}function m9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xx({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=tr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",m9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d9("Browser");var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,Y4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function b(){}b.prototype=_.prototype,T.D=_.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(A,k,L){for(var x=Array(arguments.length-2),be=2;be<arguments.length;be++)x[be-2]=arguments[be];return _.prototype[k].apply(A,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,b){b||(b=0);var A=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)A[k]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(k=0;16>k;++k)A[k]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=T.g[0],b=T.g[1],k=T.g[2];var L=T.g[3],x=_+(L^b&(k^L))+A[0]+3614090360&4294967295;_=b+(x<<7&4294967295|x>>>25),x=L+(k^_&(b^k))+A[1]+3905402710&4294967295,L=_+(x<<12&4294967295|x>>>20),x=k+(b^L&(_^b))+A[2]+606105819&4294967295,k=L+(x<<17&4294967295|x>>>15),x=b+(_^k&(L^_))+A[3]+3250441966&4294967295,b=k+(x<<22&4294967295|x>>>10),x=_+(L^b&(k^L))+A[4]+4118548399&4294967295,_=b+(x<<7&4294967295|x>>>25),x=L+(k^_&(b^k))+A[5]+1200080426&4294967295,L=_+(x<<12&4294967295|x>>>20),x=k+(b^L&(_^b))+A[6]+2821735955&4294967295,k=L+(x<<17&4294967295|x>>>15),x=b+(_^k&(L^_))+A[7]+4249261313&4294967295,b=k+(x<<22&4294967295|x>>>10),x=_+(L^b&(k^L))+A[8]+1770035416&4294967295,_=b+(x<<7&4294967295|x>>>25),x=L+(k^_&(b^k))+A[9]+2336552879&4294967295,L=_+(x<<12&4294967295|x>>>20),x=k+(b^L&(_^b))+A[10]+4294925233&4294967295,k=L+(x<<17&4294967295|x>>>15),x=b+(_^k&(L^_))+A[11]+2304563134&4294967295,b=k+(x<<22&4294967295|x>>>10),x=_+(L^b&(k^L))+A[12]+1804603682&4294967295,_=b+(x<<7&4294967295|x>>>25),x=L+(k^_&(b^k))+A[13]+4254626195&4294967295,L=_+(x<<12&4294967295|x>>>20),x=k+(b^L&(_^b))+A[14]+2792965006&4294967295,k=L+(x<<17&4294967295|x>>>15),x=b+(_^k&(L^_))+A[15]+1236535329&4294967295,b=k+(x<<22&4294967295|x>>>10),x=_+(k^L&(b^k))+A[1]+4129170786&4294967295,_=b+(x<<5&4294967295|x>>>27),x=L+(b^k&(_^b))+A[6]+3225465664&4294967295,L=_+(x<<9&4294967295|x>>>23),x=k+(_^b&(L^_))+A[11]+643717713&4294967295,k=L+(x<<14&4294967295|x>>>18),x=b+(L^_&(k^L))+A[0]+3921069994&4294967295,b=k+(x<<20&4294967295|x>>>12),x=_+(k^L&(b^k))+A[5]+3593408605&4294967295,_=b+(x<<5&4294967295|x>>>27),x=L+(b^k&(_^b))+A[10]+38016083&4294967295,L=_+(x<<9&4294967295|x>>>23),x=k+(_^b&(L^_))+A[15]+3634488961&4294967295,k=L+(x<<14&4294967295|x>>>18),x=b+(L^_&(k^L))+A[4]+3889429448&4294967295,b=k+(x<<20&4294967295|x>>>12),x=_+(k^L&(b^k))+A[9]+568446438&4294967295,_=b+(x<<5&4294967295|x>>>27),x=L+(b^k&(_^b))+A[14]+3275163606&4294967295,L=_+(x<<9&4294967295|x>>>23),x=k+(_^b&(L^_))+A[3]+4107603335&4294967295,k=L+(x<<14&4294967295|x>>>18),x=b+(L^_&(k^L))+A[8]+1163531501&4294967295,b=k+(x<<20&4294967295|x>>>12),x=_+(k^L&(b^k))+A[13]+2850285829&4294967295,_=b+(x<<5&4294967295|x>>>27),x=L+(b^k&(_^b))+A[2]+4243563512&4294967295,L=_+(x<<9&4294967295|x>>>23),x=k+(_^b&(L^_))+A[7]+1735328473&4294967295,k=L+(x<<14&4294967295|x>>>18),x=b+(L^_&(k^L))+A[12]+2368359562&4294967295,b=k+(x<<20&4294967295|x>>>12),x=_+(b^k^L)+A[5]+4294588738&4294967295,_=b+(x<<4&4294967295|x>>>28),x=L+(_^b^k)+A[8]+2272392833&4294967295,L=_+(x<<11&4294967295|x>>>21),x=k+(L^_^b)+A[11]+1839030562&4294967295,k=L+(x<<16&4294967295|x>>>16),x=b+(k^L^_)+A[14]+4259657740&4294967295,b=k+(x<<23&4294967295|x>>>9),x=_+(b^k^L)+A[1]+2763975236&4294967295,_=b+(x<<4&4294967295|x>>>28),x=L+(_^b^k)+A[4]+1272893353&4294967295,L=_+(x<<11&4294967295|x>>>21),x=k+(L^_^b)+A[7]+4139469664&4294967295,k=L+(x<<16&4294967295|x>>>16),x=b+(k^L^_)+A[10]+3200236656&4294967295,b=k+(x<<23&4294967295|x>>>9),x=_+(b^k^L)+A[13]+681279174&4294967295,_=b+(x<<4&4294967295|x>>>28),x=L+(_^b^k)+A[0]+3936430074&4294967295,L=_+(x<<11&4294967295|x>>>21),x=k+(L^_^b)+A[3]+3572445317&4294967295,k=L+(x<<16&4294967295|x>>>16),x=b+(k^L^_)+A[6]+76029189&4294967295,b=k+(x<<23&4294967295|x>>>9),x=_+(b^k^L)+A[9]+3654602809&4294967295,_=b+(x<<4&4294967295|x>>>28),x=L+(_^b^k)+A[12]+3873151461&4294967295,L=_+(x<<11&4294967295|x>>>21),x=k+(L^_^b)+A[15]+530742520&4294967295,k=L+(x<<16&4294967295|x>>>16),x=b+(k^L^_)+A[2]+3299628645&4294967295,b=k+(x<<23&4294967295|x>>>9),x=_+(k^(b|~L))+A[0]+4096336452&4294967295,_=b+(x<<6&4294967295|x>>>26),x=L+(b^(_|~k))+A[7]+1126891415&4294967295,L=_+(x<<10&4294967295|x>>>22),x=k+(_^(L|~b))+A[14]+2878612391&4294967295,k=L+(x<<15&4294967295|x>>>17),x=b+(L^(k|~_))+A[5]+4237533241&4294967295,b=k+(x<<21&4294967295|x>>>11),x=_+(k^(b|~L))+A[12]+1700485571&4294967295,_=b+(x<<6&4294967295|x>>>26),x=L+(b^(_|~k))+A[3]+2399980690&4294967295,L=_+(x<<10&4294967295|x>>>22),x=k+(_^(L|~b))+A[10]+4293915773&4294967295,k=L+(x<<15&4294967295|x>>>17),x=b+(L^(k|~_))+A[1]+2240044497&4294967295,b=k+(x<<21&4294967295|x>>>11),x=_+(k^(b|~L))+A[8]+1873313359&4294967295,_=b+(x<<6&4294967295|x>>>26),x=L+(b^(_|~k))+A[15]+4264355552&4294967295,L=_+(x<<10&4294967295|x>>>22),x=k+(_^(L|~b))+A[6]+2734768916&4294967295,k=L+(x<<15&4294967295|x>>>17),x=b+(L^(k|~_))+A[13]+1309151649&4294967295,b=k+(x<<21&4294967295|x>>>11),x=_+(k^(b|~L))+A[4]+4149444226&4294967295,_=b+(x<<6&4294967295|x>>>26),x=L+(b^(_|~k))+A[11]+3174756917&4294967295,L=_+(x<<10&4294967295|x>>>22),x=k+(_^(L|~b))+A[2]+718787259&4294967295,k=L+(x<<15&4294967295|x>>>17),x=b+(L^(k|~_))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+L&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var b=_-this.blockSize,A=this.B,k=this.h,L=0;L<_;){if(k==0)for(;L<=b;)i(this,T,L),L+=this.blockSize;if(typeof T=="string"){for(;L<_;)if(A[k++]=T.charCodeAt(L++),k==this.blockSize){i(this,A),k=0;break}}else for(;L<_;)if(A[k++]=T[L++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var b=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=b&255,b/=256;for(this.u(T),T=Array(16),_=b=0;4>_;++_)for(var A=0;32>A;A+=8)T[b++]=this.g[_]>>>A&255;return T};function s(T,_){var b=a;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=_(T)}function o(T,_){this.h=_;for(var b=[],A=!0,k=T.length-1;0<=k;k--){var L=T[k]|0;A&&L==_||(b[k]=L,A=!1)}this.g=b}var a={};function l(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return P(u(-T));for(var _=[],b=1,A=0;T>=b;A++)_[A]=T/b|0,b*=4294967296;return new o(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return P(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=u(Math.pow(_,8)),A=h,k=0;k<T.length;k+=8){var L=Math.min(8,T.length-k),x=parseInt(T.substring(k,k+L),_);8>L?(L=u(Math.pow(_,L)),A=A.j(L).add(u(x))):(A=A.j(b),A=A.add(u(x)))}return A}var h=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-P(this).m();for(var T=0,_=1,b=0;b<this.g.length;b++){var A=this.i(b);T+=(0<=A?A:4294967296+A)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(I(this))return"-"+P(this).toString(T);for(var _=u(Math.pow(T,6)),b=this,A="";;){var k=D(b,_).g;b=C(b,k.j(_));var L=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=k,y(b))return L+A;for(;6>L.length;)L="0"+L;A=L+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=C(this,T),I(T)?-1:y(T)?0:1};function P(T){for(var _=T.g.length,b=[],A=0;A<_;A++)b[A]=~T.g[A];return new o(b,~T.h).add(p)}t.abs=function(){return I(this)?P(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0,k=0;k<=_;k++){var L=A+(this.i(k)&65535)+(T.i(k)&65535),x=(L>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);A=x>>>16,L&=65535,x&=65535,b[k]=x<<16|L}return new o(b,b[b.length-1]&-2147483648?-1:0)};function C(T,_){return T.add(P(_))}t.j=function(T){if(y(this)||y(T))return h;if(I(this))return I(T)?P(this).j(P(T)):P(P(this).j(T));if(I(T))return P(this.j(P(T)));if(0>this.l(g)&&0>T.l(g))return u(this.m()*T.m());for(var _=this.g.length+T.g.length,b=[],A=0;A<2*_;A++)b[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<T.g.length;k++){var L=this.i(A)>>>16,x=this.i(A)&65535,be=T.i(k)>>>16,St=T.i(k)&65535;b[2*A+2*k]+=x*St,v(b,2*A+2*k),b[2*A+2*k+1]+=L*St,v(b,2*A+2*k+1),b[2*A+2*k+1]+=x*be,v(b,2*A+2*k+1),b[2*A+2*k+2]+=L*be,v(b,2*A+2*k+2)}for(A=0;A<_;A++)b[A]=b[2*A+1]<<16|b[2*A];for(A=_;A<2*_;A++)b[A]=0;return new o(b,0)};function v(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function S(T,_){this.g=T,this.h=_}function D(T,_){if(y(_))throw Error("division by zero");if(y(T))return new S(h,h);if(I(T))return _=D(P(T),_),new S(P(_.g),P(_.h));if(I(_))return _=D(T,P(_)),new S(P(_.g),_.h);if(30<T.g.length){if(I(T)||I(_))throw Error("slowDivide_ only works with positive integers.");for(var b=p,A=_;0>=A.l(T);)b=z(b),A=z(A);var k=R(b,1),L=R(A,1);for(A=R(A,2),b=R(b,2);!y(A);){var x=L.add(A);0>=x.l(T)&&(k=k.add(b),L=x),A=R(A,1),b=R(b,1)}return _=C(T,k.j(_)),new S(k,_)}for(k=h;0<=T.l(_);){for(b=Math.max(1,Math.floor(T.m()/_.m())),A=Math.ceil(Math.log(b)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),L=u(b),x=L.j(_);I(x)||0<x.l(T);)b-=A,L=u(b),x=L.j(_);y(L)&&(L=p),k=k.add(L),T=C(T,x)}return new S(k,T)}t.A=function(T){return D(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)&T.i(A);return new o(b,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)|T.i(A);return new o(b,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],A=0;A<_;A++)b[A]=this.i(A)^T.i(A);return new o(b,this.h^T.h)};function z(T){for(var _=T.g.length+1,b=[],A=0;A<_;A++)b[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(b,T.h)}function R(T,_){var b=_>>5;_%=32;for(var A=T.g.length-b,k=[],L=0;L<A;L++)k[L]=0<_?T.i(L+b)>>>_|T.i(L+b+1)<<32-_:T.i(L+b);return new o(k,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Y4=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Vs=o}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Z4,J4,Pl,e3,gd,D0,t3,n3,r3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,m){return c==Array.prototype||c==Object.prototype||(c[f]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var f=0;f<c.length;++f){var m=c[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var m=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var M=c[w];if(!(M in m))break e;m=m[M]}c=c[c.length-1],w=m[c],f=f(w),f!=w&&f!=null&&e(m,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var m=0,w=!1,M={next:function(){if(!w&&m<c.length){var $=m++;return{value:f($,c[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,m){return c.call.apply(c.bind,arguments)}function h(c,f,m){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,w),c.apply(f,M)}}return function(){return c.apply(f,arguments)}}function p(c,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(c,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function y(c,f){function m(){}m.prototype=f.prototype,c.aa=f.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(w,M,$){for(var G=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)G[Ve-2]=arguments[Ve];return f.prototype[M].apply(w,G)}}function I(c){const f=c.length;if(0<f){const m=Array(f);for(let w=0;w<f;w++)m[w]=c[w];return m}return[]}function P(c,f){for(let m=1;m<arguments.length;m++){const w=arguments[m];if(l(w)){const M=c.length||0,$=w.length||0;c.length=M+$;for(let G=0;G<$;G++)c[M+G]=w[G]}else c.push(w)}}class C{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(c){return/^[\s\xa0]*$/.test(c)}function S(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function D(c){return D[" "](c),c}D[" "]=function(){};var z=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function R(c,f,m){for(const w in c)f.call(m,c[w],w,c)}function T(c,f){for(const m in c)f.call(void 0,c[m],m,c)}function _(c){const f={};for(const m in c)f[m]=c[m];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(c,f){let m,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(m in w)c[m]=w[m];for(let $=0;$<b.length;$++)m=b[$],Object.prototype.hasOwnProperty.call(w,m)&&(c[m]=w[m])}}function k(c){var f=1;c=c.split(":");const m=[];for(;0<f&&c.length;)m.push(c.shift()),f--;return c.length&&m.push(c.join(":")),m}function L(c){a.setTimeout(()=>{throw c},0)}function x(){var c=ee;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class be{constructor(){this.h=this.g=null}add(f,m){const w=St.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var St=new C(()=>new Yt,c=>c.reset());class Yt{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,K=!1,ee=new be,ie=()=>{const c=a.Promise.resolve(void 0);xe=()=>{c.then(fe)}};var fe=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(m){L(m)}var f=St;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}K=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return c}();function At(c,f){if(De.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(z){e:{try{D(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else m=="mouseover"?f=c.fromElement:m=="mouseout"&&(f=c.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:xt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&At.aa.h.call(this)}}y(At,De);var xt={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var jn="closure_listenable_"+(1e6*Math.random()|0),Fa=0;function If(c,f,m,w,M){this.listener=c,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=M,this.key=++Fa,this.da=this.fa=!1}function lo(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function co(c){this.src=c,this.g={},this.h=0}co.prototype.add=function(c,f,m,w,M){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var G=ar(c,f,w,M);return-1<G?(f=c[G],m||(f.fa=!1)):(f=new If(f,this.src,$,!!w,M),f.fa=m,c.push(f)),f};function gt(c,f){var m=f.type;if(m in c.g){var w=c.g[m],M=Array.prototype.indexOf.call(w,f,void 0),$;($=0<=M)&&Array.prototype.splice.call(w,M,1),$&&(lo(f),c.g[m].length==0&&(delete c.g[m],c.h--))}}function ar(c,f,m,w){for(var M=0;M<c.length;++M){var $=c[M];if(!$.da&&$.listener==f&&$.capture==!!m&&$.ha==w)return M}return-1}var uo="closure_lm_"+(1e6*Math.random()|0),$a={};function lr(c,f,m,w,M){if(Array.isArray(f)){for(var $=0;$<f.length;$++)lr(c,f[$],m,w,M);return null}return m=ci(m),c&&c[jn]?c.K(f,m,u(w)?!!w.capture:!!w,M):Sf(c,f,m,!1,w,M)}function Sf(c,f,m,w,M,$){if(!f)throw Error("Invalid event type");var G=u(M)?!!M.capture:!!M,Ve=Ba(c);if(Ve||(c[uo]=Ve=new co(c)),m=Ve.add(f,m,w,G,$),m.proxy)return m;if(w=Af(),m.proxy=w,w.src=c,w.listener=m,c.addEventListener)mt||(M=G),M===void 0&&(M=!1),c.addEventListener(f.toString(),w,M);else if(c.attachEvent)c.attachEvent(cu(f.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Af(){function c(m){return f.call(c.src,c.listener,m)}const f=xf;return c}function ja(c,f,m,w,M){if(Array.isArray(f))for(var $=0;$<f.length;$++)ja(c,f[$],m,w,M);else w=u(w)?!!w.capture:!!w,m=ci(m),c&&c[jn]?(c=c.i,f=String(f).toString(),f in c.g&&($=c.g[f],m=ar($,m,w,M),-1<m&&(lo($[m]),Array.prototype.splice.call($,m,1),$.length==0&&(delete c.g[f],c.h--)))):c&&(c=Ba(c))&&(f=c.g[f.toString()],c=-1,f&&(c=ar(f,m,w,M)),(m=-1<c?f[c]:null)&&za(m))}function za(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[jn])gt(f.i,c);else{var m=c.type,w=c.proxy;f.removeEventListener?f.removeEventListener(m,w,c.capture):f.detachEvent?f.detachEvent(cu(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=Ba(f))?(gt(m,c),m.h==0&&(m.src=null,f[uo]=null)):lo(c)}}}function cu(c){return c in $a?$a[c]:$a[c]="on"+c}function xf(c,f){if(c.da)c=!0;else{f=new At(f,this);var m=c.listener,w=c.ha||c.src;c.fa&&za(c),c=m.call(w,f)}return c}function Ba(c){return c=c[uo],c instanceof co?c:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function ci(c){return typeof c=="function"?c:(c[Ar]||(c[Ar]=function(f){return c.handleEvent(f)}),c[Ar])}function yt(){pe.call(this),this.i=new co(this),this.M=this,this.F=null}y(yt,pe),yt.prototype[jn]=!0,yt.prototype.removeEventListener=function(c,f,m,w){ja(this,c,f,m,w)};function vt(c,f){var m,w=c.F;if(w)for(m=[];w;w=w.F)m.push(w);if(c=c.M,w=f.type||f,typeof f=="string")f=new De(f,c);else if(f instanceof De)f.target=f.target||c;else{var M=f;f=new De(w,c),A(f,M)}if(M=!0,m)for(var $=m.length-1;0<=$;$--){var G=f.g=m[$];M=fn(G,w,!0,f)&&M}if(G=f.g=c,M=fn(G,w,!0,f)&&M,M=fn(G,w,!1,f)&&M,m)for($=0;$<m.length;$++)G=f.g=m[$],M=fn(G,w,!1,f)&&M}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var m=c.g[f],w=0;w<m.length;w++)lo(m[w]);delete c.g[f],c.h--}}this.F=null},yt.prototype.K=function(c,f,m,w){return this.i.add(String(c),f,!1,m,w)},yt.prototype.L=function(c,f,m,w){return this.i.add(String(c),f,!0,m,w)};function fn(c,f,m,w){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,$=0;$<f.length;++$){var G=f[$];if(G&&!G.da&&G.capture==m){var Ve=G.listener,Pt=G.ha||G.src;G.fa&&gt(c.i,G),M=Ve.call(Pt,w)!==!1&&M}}return M&&!w.defaultPrevented}function Sn(c,f,m){if(typeof c=="function")m&&(c=p(c,m));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ha(c){c.g=Sn(()=>{c.g=null,c.i&&(c.i=!1,Ha(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class ho extends pe{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ha(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(c){pe.call(this),this.h=c,this.g={}}y(ps,pe);var zn=[];function Wa(c){R(c.g,function(f,m){this.g.hasOwnProperty(m)&&za(f)},c),c.g={}}ps.prototype.N=function(){ps.aa.N.call(this),Wa(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fo=a.JSON.stringify,uu=a.JSON.parse,kf=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function po(){}po.prototype.h=null;function ms(c){return c.h||(c.h=c.i())}function qa(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ui(){De.call(this,"d")}y(ui,De);function gs(){De.call(this,"c")}y(gs,De);var kr={},Ga=null;function mo(){return Ga=Ga||new yt}kr.La="serverreachability";function Ka(c){De.call(this,kr.La,c)}y(Ka,De);function Pr(c){const f=mo();vt(f,new Ka(f))}kr.STAT_EVENT="statevent";function ys(c,f){De.call(this,kr.STAT_EVENT,c),this.stat=f}y(ys,De);function kt(c){const f=mo();vt(f,new ys(f,c))}kr.Ma="timingevent";function du(c,f){De.call(this,kr.Ma,c),this.size=f}y(du,De);function N(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function O(){this.g=!0}O.prototype.xa=function(){this.g=!1};function F(c,f,m,w,M,$){c.info(function(){if(c.g)if($)for(var G="",Ve=$.split("&"),Pt=0;Pt<Ve.length;Pt++){var Pe=Ve[Pt].split("=");if(1<Pe.length){var jt=Pe[0];Pe=Pe[1];var zt=jt.split("_");G=2<=zt.length&&zt[1]=="type"?G+(jt+"="+Pe+"&"):G+(jt+"=redacted&")}}else G=null;else G=$;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+f+`
`+m+`
`+G})}function j(c,f,m,w,M,$,G){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+f+`
`+m+`
`+$+" "+G})}function Q(c,f,m,w){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+se(c,m)+(w?" "+w:"")})}function J(c,f){c.info(function(){return"TIMEOUT: "+f})}O.prototype.info=function(){};function se(c,f){if(!c.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var w=m[c];if(!(2>w.length)){var M=w[1];if(Array.isArray(M)&&!(1>M.length)){var $=M[0];if($!="noop"&&$!="stop"&&$!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return fo(m)}catch{return f}}var q={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ne;function te(){}y(te,po),te.prototype.g=function(){return new XMLHttpRequest},te.prototype.i=function(){return{}},ne=new te;function ve(c,f,m,w){this.j=c,this.i=f,this.l=m,this.R=w||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ce}function Ce(){this.i=null,this.g="",this.h=!1}var Ne={},Ie={};function ot(c,f,m){c.L=1,c.v=mu(Nr(f)),c.m=m,c.P=!0,Xe(c,null)}function Xe(c,f){c.F=Date.now(),Bn(c),c.A=Nr(c.v);var m=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),x1(m.i,"t",w),c.C=0,m=c.j.J,c.h=new Ce,c.g=q1(c.j,m?f:null,!c.m),0<c.O&&(c.M=new ho(p(c.Y,c,c.g),c.O)),f=c.U,m=c.g,w=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(zn[0]=M.toString()),M=zn);for(var $=0;$<M.length;$++){var G=lr(m,M[$],w||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Pr(),F(c.i,c.u,c.A,c.l,c.R,c.m)}ve.prototype.ca=function(c){c=c.target;const f=this.M;f&&Lr(c)==3?f.j():this.Y(c)},ve.prototype.Y=function(c){try{if(c==this.g)e:{const zt=Lr(this.g);var f=this.g.Ba();const _o=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||M1(this.g)))){this.J||zt!=4||f==7||(f==8||0>=_o?Pr(3):Pr(2)),ur(this);var m=this.g.Z();this.X=m;t:if(di(this)){var w=M1(this.g);c="";var M=w.length,$=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),Ft(this);var G="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,c+=this.h.i.decode(w[f],{stream:!($&&f==M-1)});w.length=0,this.h.g+=c,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=m==200,j(this.i,this.u,this.A,this.l,this.R,zt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Pt=this.g;if((Ve=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ve)){var Pe=Ve;break t}}Pe=null}if(m=Pe)Q(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hi(this,m);else{this.o=!1,this.s=3,kt(12),An(this),Ft(this);break e}}if(this.P){m=!0;let Hn;for(;!this.J&&this.C<G.length;)if(Hn=cr(this,G),Hn==Ie){zt==4&&(this.s=4,kt(14),m=!1),Q(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Ne){this.s=4,kt(15),Q(this.i,this.l,G,"[Invalid Chunk]"),m=!1;break}else Q(this.i,this.l,Hn,null),hi(this,Hn);if(di(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||G.length!=0||this.h.h||(this.s=1,kt(16),m=!1),this.o=this.o&&m,!m)Q(this.i,this.l,G,"[Invalid Chunked Response]"),An(this),Ft(this);else if(0<G.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Lf(jt),jt.M=!0,kt(11))}}else Q(this.i,this.l,G,null),hi(this,G);zt==4&&An(this),this.o&&!this.J&&(zt==4?z1(this.j,this):(this.o=!1,Bn(this)))}else d7(this.g),m==400&&0<G.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),An(this),Ft(this)}}}catch{}finally{}};function di(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cr(c,f){var m=c.C,w=f.indexOf(`
`,m);return w==-1?Ie:(m=Number(f.substring(m,w)),isNaN(m)?Ne:(w+=1,w+m>f.length?Ie:(f=f.slice(w,w+m),c.C=w+m,f)))}ve.prototype.cancel=function(){this.J=!0,An(this)};function Bn(c){c.S=Date.now()+c.I,Rr(c,c.I)}function Rr(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=N(p(c.ba,c),f)}function ur(c){c.B&&(a.clearTimeout(c.B),c.B=null)}ve.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(J(this.i,this.A),this.L!=2&&(Pr(),kt(17)),An(this),this.s=2,Ft(this)):Rr(this,this.S-c)};function Ft(c){c.j.G==0||c.J||z1(c.j,c)}function An(c){ur(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Wa(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function hi(c,f){try{var m=c.j;if(m.G!=0&&(m.g==c||Le(m.h,c))){if(!c.K&&Le(m.h,c)&&m.G==3){try{var w=m.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)wu(m),vu(m);else break e;Nf(m),kt(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=N(p(m.Za,m),6e3));if(1>=$t(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else _s(m,11)}else if((c.K||m.g==c)&&wu(m),!v(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let Pe=M[f];if(m.T=Pe[0],Pe=Pe[1],m.G==2)if(Pe[0]=="c"){m.K=Pe[1],m.ia=Pe[2];const jt=Pe[3];jt!=null&&(m.la=jt,m.j.info("VER="+m.la));const zt=Pe[4];zt!=null&&(m.Aa=zt,m.j.info("SVER="+m.Aa));const _o=Pe[5];_o!=null&&typeof _o=="number"&&0<_o&&(w=1.5*_o,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const Hn=c.g;if(Hn){const bu=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bu){var $=w.h;$.g||bu.indexOf("spdy")==-1&&bu.indexOf("quic")==-1&&bu.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(pn($,$.h),$.h=null))}if(w.D){const Of=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Of&&(w.ya=Of,Be(w.I,w.D,Of))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var G=c;if(w.qa=W1(w,w.J?w.ia:null,w.W),G.K){Qa(w.h,G);var Ve=G,Pt=w.L;Pt&&(Ve.I=Pt),Ve.B&&(ur(Ve),Bn(Ve)),w.g=G}else $1(w);0<m.i.length&&_u(m)}else Pe[0]!="stop"&&Pe[0]!="close"||_s(m,7);else m.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?_s(m,7):Rf(m):Pe[0]!="noop"&&m.l&&m.l.ta(Pe),m.v=0)}}Pr(4)}catch{}}var go=class{constructor(c,f){this.g=c,this.map=f}};function de(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ze(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $t(c){return c.h?1:c.g?c.g.size:0}function Le(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function pn(c,f){c.g?c.g.add(f):c.h=f}function Qa(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}de.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function hu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const m of c.g.values())f=f.concat(m.D);return f}return I(c.i)}function Xb(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],m=c.length,w=0;w<m;w++)f.push(c[w]);return f}f=[],m=0;for(w in c)f[m++]=c[w];return f}function Yb(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var m=0;m<c;m++)f.push(m);return f}f=[],m=0;for(const w in c)f[m++]=w;return f}}}function b1(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var m=Yb(c),w=Xb(c),M=w.length,$=0;$<M;$++)f.call(void 0,w[$],m&&m[$],c)}var T1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zb(c,f){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var w=c[m].indexOf("="),M=null;if(0<=w){var $=c[m].substring(0,w);M=c[m].substring(w+1)}else $=c[m];f($,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function vs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof vs){this.h=c.h,fu(this,c.j),this.o=c.o,this.g=c.g,pu(this,c.s),this.l=c.l;var f=c.i,m=new Za;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),C1(this,m),this.m=c.m}else c&&(f=String(c).match(T1))?(this.h=!1,fu(this,f[1]||"",!0),this.o=Xa(f[2]||""),this.g=Xa(f[3]||"",!0),pu(this,f[4]),this.l=Xa(f[5]||"",!0),C1(this,f[6]||"",!0),this.m=Xa(f[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}vs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ya(f,I1,!0),":");var m=this.g;return(m||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ya(f,I1,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Ya(m,m.charAt(0)=="/"?t7:e7,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Ya(m,r7)),c.join("")};function Nr(c){return new vs(c)}function fu(c,f,m){c.j=m?Xa(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function pu(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function C1(c,f,m){f instanceof Za?(c.i=f,i7(c.i,c.h)):(m||(f=Ya(f,n7)),c.i=new Za(f,c.h))}function Be(c,f,m){c.i.set(f,m)}function mu(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Xa(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ya(c,f,m){return typeof c=="string"?(c=encodeURI(c).replace(f,Jb),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Jb(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var I1=/[#\/\?@]/g,e7=/[#\?:]/g,t7=/[#\?]/g,n7=/[#\?@]/g,r7=/#/g;function Za(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function fi(c){c.g||(c.g=new Map,c.h=0,c.i&&Zb(c.i,function(f,m){c.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Za.prototype,t.add=function(c,f){fi(this),this.i=null,c=yo(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(f),this.h+=1,this};function S1(c,f){fi(c),f=yo(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function A1(c,f){return fi(c),f=yo(c,f),c.g.has(f)}t.forEach=function(c,f){fi(this),this.g.forEach(function(m,w){m.forEach(function(M){c.call(f,M,w,this)},this)},this)},t.na=function(){fi(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let w=0;w<f.length;w++){const M=c[w];for(let $=0;$<M.length;$++)m.push(f[w])}return m},t.V=function(c){fi(this);let f=[];if(typeof c=="string")A1(this,c)&&(f=f.concat(this.g.get(yo(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)f=f.concat(c[m])}return f},t.set=function(c,f){return fi(this),this.i=null,c=yo(this,c),A1(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function x1(c,f,m){S1(c,f),0<m.length&&(c.i=null,c.g.set(yo(c,f),I(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var w=f[m];const $=encodeURIComponent(String(w)),G=this.V(w);for(w=0;w<G.length;w++){var M=$;G[w]!==""&&(M+="="+encodeURIComponent(String(G[w]))),c.push(M)}}return this.i=c.join("&")};function yo(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function i7(c,f){f&&!c.j&&(fi(c),c.i=null,c.g.forEach(function(m,w){var M=w.toLowerCase();w!=M&&(S1(this,w),x1(this,M,m))},c)),c.j=f}function s7(c,f){const m=new O;if(a.Image){const w=new Image;w.onload=g(pi,m,"TestLoadImage: loaded",!0,f,w),w.onerror=g(pi,m,"TestLoadImage: error",!1,f,w),w.onabort=g(pi,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=g(pi,m,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else f(!1)}function o7(c,f){const m=new O,w=new AbortController,M=setTimeout(()=>{w.abort(),pi(m,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:w.signal}).then($=>{clearTimeout(M),$.ok?pi(m,"TestPingServer: ok",!0,f):pi(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),pi(m,"TestPingServer: error",!1,f)})}function pi(c,f,m,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(m)}catch{}}function a7(){this.g=new kf}function l7(c,f,m){const w=m||"";try{b1(c,function(M,$){let G=M;u(M)&&(G=fo(M)),f.push(w+$+"="+encodeURIComponent(G))})}catch(M){throw f.push(w+"type="+encodeURIComponent("_badmap")),M}}function Ja(c){this.l=c.Ub||null,this.j=c.eb||!1}y(Ja,po),Ja.prototype.g=function(){return new gu(this.l,this.j)},Ja.prototype.i=function(c){return function(){return c}}({});function gu(c,f){yt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(gu,yt),t=gu.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,tl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,el(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,tl(this)),this.g&&(this.readyState=3,tl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;k1(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function k1(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?el(this):tl(this),this.readyState==3&&k1(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,el(this))},t.Qa=function(c){this.g&&(this.response=c,el(this))},t.ga=function(){this.g&&el(this)};function el(c){c.readyState=4,c.l=null,c.j=null,c.v=null,tl(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=f.next();return c.join(`\r
`)};function tl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function P1(c){let f="";return R(c,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function Pf(c,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=P1(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Be(c,f,m))}function rt(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(rt,yt);var c7=/^https?$/i,u7=["POST","PUT"];t=rt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ne.g(),this.v=this.o?ms(this.o):ms(ne),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch($){R1(this,$);return}if(c=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)m.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())m.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find($=>$.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(u7,f,void 0))||w||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,G]of m)this.g.setRequestHeader($,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O1(this),this.u=!0,this.g.send(c),this.u=!1}catch($){R1(this,$)}};function R1(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,N1(c),yu(c)}function N1(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),yu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yu(this,!0)),rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?L1(this):this.bb())},t.bb=function(){L1(this)};function L1(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Lr(c)!=4||c.Z()!=2)){if(c.u&&Lr(c)==4)Sn(c.Ea,0,c);else if(vt(c,"readystatechange"),Lr(c)==4){c.h=!1;try{const G=c.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=G===0){var M=String(c.D).match(T1)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),w=!c7.test(M?M.toLowerCase():"")}m=w}if(m)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var $=2<Lr(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",N1(c)}}finally{yu(c)}}}}function yu(c,f){if(c.g){O1(c);const m=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||vt(c,"ready");try{m.onreadystatechange=w}catch{}}}function O1(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),uu(f)}};function M1(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function d7(c){const f={};c=(c.g&&2<=Lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(v(c[w]))continue;var m=k(c[w]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const $=f[M]||[];f[M]=$,$.push(m)}T(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nl(c,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||f}function D1(c){this.Aa=0,this.i=[],this.j=new O,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nl("baseRetryDelayMs",5e3,c),this.cb=nl("retryDelaySeedMs",1e4,c),this.Wa=nl("forwardChannelMaxRetries",2,c),this.wa=nl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new de(c&&c.concurrentRequestLimit),this.Da=new a7,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=D1.prototype,t.la=8,t.G=1,t.connect=function(c,f,m,w){kt(0),this.W=c,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=W1(this,null,this.W),_u(this)};function Rf(c){if(V1(c),c.G==3){var f=c.U++,m=Nr(c.I);if(Be(m,"SID",c.K),Be(m,"RID",f),Be(m,"TYPE","terminate"),rl(c,m),f=new ve(c,c.j,f),f.L=2,f.v=mu(Nr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=q1(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Bn(f)}H1(c)}function vu(c){c.g&&(Lf(c),c.g.cancel(),c.g=null)}function V1(c){vu(c),c.u&&(a.clearTimeout(c.u),c.u=null),wu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function _u(c){if(!ze(c.h)&&!c.s){c.s=!0;var f=c.Ga;xe||ie(),K||(xe(),K=!0),ee.add(f,c),c.B=0}}function h7(c,f){return $t(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=N(p(c.Ga,c,f),B1(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const M=new ve(this,this.j,c);let $=this.o;if(this.S&&($?($=_($),A($,this.S)):$=this.S),this.m!==null||this.O||(M.H=$,$=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=F1(this,M,f),m=Nr(this.I),Be(m,"RID",c),Be(m,"CVER",22),this.D&&Be(m,"X-HTTP-Session-Id",this.D),rl(this,m),$&&(this.O?f="headers="+encodeURIComponent(String(P1($)))+"&"+f:this.m&&Pf(m,this.m,$)),pn(this.h,M),this.Ua&&Be(m,"TYPE","init"),this.P?(Be(m,"$req",f),Be(m,"SID","null"),M.T=!0,ot(M,m,null)):ot(M,m,f),this.G=2}}else this.G==3&&(c?U1(this,c):this.i.length==0||ze(this.h)||U1(this))};function U1(c,f){var m;f?m=f.l:m=c.U++;const w=Nr(c.I);Be(w,"SID",c.K),Be(w,"RID",m),Be(w,"AID",c.T),rl(c,w),c.m&&c.o&&Pf(w,c.m,c.o),m=new ve(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),f&&(c.i=f.D.concat(c.i)),f=F1(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pn(c.h,m),ot(m,w,f)}function rl(c,f){c.H&&R(c.H,function(m,w){Be(f,w,m)}),c.l&&b1({},function(m,w){Be(f,w,m)})}function F1(c,f,m){m=Math.min(c.i.length,m);var w=c.l?p(c.l.Na,c.l,c):null;e:{var M=c.i;let $=-1;for(;;){const G=["count="+m];$==-1?0<m?($=M[0].g,G.push("ofs="+$)):$=0:G.push("ofs="+$);let Ve=!0;for(let Pt=0;Pt<m;Pt++){let Pe=M[Pt].g;const jt=M[Pt].map;if(Pe-=$,0>Pe)$=Math.max(0,M[Pt].g-100),Ve=!1;else try{l7(jt,G,"req"+Pe+"_")}catch{w&&w(jt)}}if(Ve){w=G.join("&");break e}}}return c=c.i.splice(0,m),f.D=c,w}function $1(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;xe||ie(),K||(xe(),K=!0),ee.add(f,c),c.v=0}}function Nf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=N(p(c.Fa,c),B1(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,j1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=N(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),vu(this),j1(this))};function Lf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function j1(c){c.g=new ve(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Nr(c.qa);Be(f,"RID","rpc"),Be(f,"SID",c.K),Be(f,"AID",c.T),Be(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(f,"TO",c.ja),Be(f,"TYPE","xmlhttp"),rl(c,f),c.m&&c.o&&Pf(f,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=mu(Nr(f)),m.m=null,m.P=!0,Xe(m,c)}t.Za=function(){this.C!=null&&(this.C=null,vu(this),Nf(this),kt(19))};function wu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function z1(c,f){var m=null;if(c.g==f){wu(c),Lf(c),c.g=null;var w=2}else if(Le(c.h,f))m=f.D,Qa(c.h,f),w=1;else return;if(c.G!=0){if(f.o)if(w==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=c.B;w=mo(),vt(w,new du(w,m)),_u(c)}else $1(c);else if(M=f.s,M==3||M==0&&0<f.X||!(w==1&&h7(c,f)||w==2&&Nf(c)))switch(m&&0<m.length&&(f=c.h,f.i=f.i.concat(m)),M){case 1:_s(c,5);break;case 4:_s(c,10);break;case 3:_s(c,6);break;default:_s(c,2)}}}function B1(c,f){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*f}function _s(c,f){if(c.j.info("Error code "+f),f==2){var m=p(c.fb,c),w=c.Xa;const M=!w;w=new vs(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fu(w,"https"),mu(w),M?s7(w.toString(),m):o7(w.toString(),m)}else kt(2);c.G=0,c.l&&c.l.sa(f),H1(c),V1(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function H1(c){if(c.G=0,c.ka=[],c.l){const f=hu(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,I(c.i),c.i.length=0),c.l.ra()}}function W1(c,f,m){var w=m instanceof vs?Nr(m):new vs(m);if(w.g!="")f&&(w.g=f+"."+w.g),pu(w,w.s);else{var M=a.location;w=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var $=new vs(null);w&&fu($,w),f&&($.g=f),M&&pu($,M),m&&($.l=m),w=$}return m=c.D,f=c.ya,m&&f&&Be(w,m,f),Be(w,"VER",c.la),rl(c,w),w}function q1(c,f,m){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new rt(new Ja({eb:m})):new rt(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function G1(){}t=G1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Eu(){}Eu.prototype.g=function(c,f){return new mn(c,f)};function mn(c,f){yt.call(this),this.g=new D1(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!v(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new vo(this)}y(mn,yt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Rf(this.g)},mn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=fo(c),c=m);f.i.push(new go(f.Ya++,c)),f.G==3&&_u(f)},mn.prototype.N=function(){this.g.l=null,delete this.j,Rf(this.g),delete this.g,mn.aa.N.call(this)};function K1(c){ui.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const m in f){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}y(K1,ui);function Q1(){gs.call(this),this.status=1}y(Q1,gs);function vo(c){this.g=c}y(vo,G1),vo.prototype.ua=function(){vt(this.g,"a")},vo.prototype.ta=function(c){vt(this.g,new K1(c))},vo.prototype.sa=function(c){vt(this.g,new Q1)},vo.prototype.ra=function(){vt(this.g,"b")},Eu.prototype.createWebChannel=Eu.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,r3=function(){return new Eu},n3=function(){return mo()},t3=kr,D0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},q.NO_ERROR=0,q.TIMEOUT=8,q.HTTP_ERROR=6,gd=q,le.COMPLETE="complete",e3=le,qa.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Pl=qa,J4=Ja,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,Z4=rt}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});const ov="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new og("@firebase/firestore");function yl(){return Xs.logLevel}function Z(t,...e){if(Xs.logLevel<=Te.DEBUG){const n=e.map(wg);Xs.debug(`Firestore (${Na}): ${t}`,...n)}}function ti(t,...e){if(Xs.logLevel<=Te.ERROR){const n=e.map(wg);Xs.error(`Firestore (${Na}): ${t}`,...n)}}function ca(t,...e){if(Xs.logLevel<=Te.WARN){const n=e.map(wg);Xs.warn(`Firestore (${Na}): ${t}`,...n)}}function wg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: `+t;throw ti(e),new Error(e)}function je(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class y9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v9{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new i3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new qt(e)}}class _9{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class w9{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _9(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string"),this.R=n.token,new E9(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=T9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function ua(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Et(0,0))}static max(){return new ce(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends Sc{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const C9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Sc{construct(e,n,r){return new Ot(e,n,r)}static isValidIdentifier(e){return C9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(qe.fromString(e))}static fromName(e){return new re(qe.fromString(e).popFirst(5))}static empty(){return new re(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new qe(e.slice()))}}function I9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new Et(n+1,0):new Et(n,r));return new Zi(i,re.empty(),e)}function S9(t){return new Zi(t.readTime,t.key,-1)}class Zi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zi(ce.min(),re.empty(),-1)}static max(){return new Zi(ce.max(),re.empty(),-1)}}function A9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==x9)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function P9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Eg.oe=-1;function zh(t){return t==null}function rh(t){return t===0&&1/t==-1/0}function R9(t){return typeof t=="number"&&Number.isInteger(t)&&!rh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bu(this.root,e,this.comparator,!0)}}class Bu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Lt.RED,this.left=i??Lt.EMPTY,this.right=s??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Lt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Lt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lv(this.data.getIterator())}getIteratorFrom(e){return new lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new _n([])}unionWith(e){let n=new Dt(Ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new a3("Invalid base64 string: "+s):s}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const N9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(t){if(je(!!t),typeof t=="string"){let e=0;const n=N9.exec(t);if(je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ys(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tg(t){const e=t.mapValue.fields.__previous_value__;return bg(e)?Tg(e):e}function Ac(t){const e=Ji(t.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class xc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bg(t)?4:O9(t)?9007199254740991:10:ae()}function Cr(t,e){if(t===e)return!0;const n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ac(t).isEqual(Ac(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ji(i.timestampValue),a=Ji(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ys(i.bytesValue).isEqual(Ys(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ht(i.geoPointValue.latitude)===ht(s.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ht(i.integerValue)===ht(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ht(i.doubleValue),a=ht(s.doubleValue);return o===a?rh(o)===rh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(av(o)!==av(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Cr(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function kc(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function da(t,e){if(t===e)return 0;const n=Zs(t),r=Zs(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ht(s.integerValue||s.doubleValue),l=ht(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cv(t.timestampValue,e.timestampValue);case 4:return cv(Ac(t),Ac(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ys(s),l=Ys(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Re(a[u],l[u]);if(d!==0)return d}return Re(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Re(ht(s.latitude),ht(o.latitude));return a!==0?a:Re(ht(s.longitude),ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const d=da(a[u],l[u]);if(d)return d}return Re(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Hu.mapValue&&o===Hu.mapValue)return 0;if(s===Hu.mapValue)return 1;if(o===Hu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Re(l[h],d[h]);if(p!==0)return p;const g=da(a[l[h]],u[d[h]]);if(g!==0)return g}return Re(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ae()}}function cv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Ji(t),r=Ji(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function ha(t){return V0(t)}function V0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=V0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${V0(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function uv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function U0(t){return!!t&&"integerValue"in t}function Cg(t){return!!t&&"arrayValue"in t}function dv(t){return!!t&&"nullValue"in t}function hv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yd(t){return!!t&&"mapValue"in t}function Gl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ro(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Gl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function O9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=Ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Gl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];yd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ro(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new on(Gl(this.value))}}function l3(t){const e=[];return ro(t.fields,(n,r)=>{const i=new Ot([n]);if(yd(r)){const s=l3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Kt(e,0,ce.min(),ce.min(),ce.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new Kt(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new Kt(e,2,n,ce.min(),ce.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Kt(e,3,n,ce.min(),ce.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.position=e,this.inclusive=n}}function fv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=da(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function M9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{}class pt extends c3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new V9(e,n,r):n==="array-contains"?new $9(e,r):n==="in"?new j9(e,r):n==="not-in"?new z9(e,r):n==="array-contains-any"?new B9(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new U9(e,r):new F9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(da(n,this.value)):n!==null&&Zs(this.value)===Zs(n)&&this.matchesComparison(da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends c3{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new or(e,n)}matches(e){return u3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function u3(t){return t.op==="and"}function d3(t){return D9(t)&&u3(t)}function D9(t){for(const e of t.filters)if(e instanceof or)return!1;return!0}function F0(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+ha(t.value);if(d3(t))return t.filters.map(e=>F0(e)).join(",");{const e=t.filters.map(n=>F0(n)).join(",");return`${t.op}(${e})`}}function h3(t,e){return t instanceof pt?function(r,i){return i instanceof pt&&r.op===i.op&&r.field.isEqual(i.field)&&Cr(r.value,i.value)}(t,e):t instanceof or?function(r,i){return i instanceof or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&h3(o,i.filters[a]),!0):!1}(t,e):void ae()}function f3(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${ha(n.value)}`}(t):t instanceof or?function(n){return n.op.toString()+" {"+n.getFilters().map(f3).join(" ,")+"}"}(t):"Filter"}class V9 extends pt{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class U9 extends pt{constructor(e,n){super(e,"in",n),this.keys=p3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class F9 extends pt{constructor(e,n){super(e,"not-in",n),this.keys=p3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p3(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class $9 extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cg(n)&&kc(n.arrayValue,this.value)}}class j9 extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kc(this.value.arrayValue,n)}}class z9 extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!kc(this.value.arrayValue,n)}}class B9 extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function mv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new H9(t,e,n,r,i,s,o)}function Ig(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>F0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ha(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ha(r)).join(",")),e.ue=n}return e.ue}function Sg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pv(t.startAt,e.startAt)&&pv(t.endAt,e.endAt)}function $0(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function W9(t,e,n,r,i,s,o,a){return new La(t,e,n,r,i,s,o,a)}function m3(t){return new La(t)}function gv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function g3(t){return t.collectionGroup!==null}function Kl(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dt(Ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Pc(s,r))}),n.has(Ot.keyField().canonicalString())||e.ce.push(new Pc(Ot.keyField(),r))}return e.ce}function wr(t){const e=ue(t);return e.le||(e.le=q9(e,Kl(t))),e.le}function q9(t,e){if(t.limitType==="F")return mv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pc(i.field,s)});const n=t.endAt?new ih(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ih(t.startAt.position,t.startAt.inclusive):null;return mv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function j0(t,e){const n=t.filters.concat([e]);return new La(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function z0(t,e,n){return new La(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bh(t,e){return Sg(wr(t),wr(e))&&t.limitType===e.limitType}function y3(t){return`${Ig(wr(t))}|lt:${t.limitType}`}function Co(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>f3(i)).join(", ")}]`),zh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ha(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ha(i)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function Hh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Kl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=fv(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Kl(r),i)||r.endAt&&!function(o,a,l){const u=fv(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Kl(r),i))}(t,e)}function G9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v3(t){return(e,n)=>{let r=!1;for(const i of Kl(t)){const s=K9(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function K9(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?da(l,u):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return o3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9=new nt(re.comparator);function ni(){return Q9}const _3=new nt(re.comparator);function Rl(...t){let e=_3;for(const n of t)e=e.insert(n.key,n);return e}function w3(t){let e=_3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Os(){return Ql()}function E3(){return Ql()}function Ql(){return new Oa(t=>t.toString(),(t,e)=>t.isEqual(e))}const X9=new nt(re.comparator),Y9=new Dt(re.comparator);function Ee(...t){let e=Y9;for(const n of t)e=e.add(n);return e}const Z9=new Dt(Re);function J9(){return Z9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function T3(t){return{integerValue:""+t}}function ek(t,e){return R9(e)?T3(e):b3(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function tk(t,e,n){return t instanceof sh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bg(s)&&(s=Tg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Rc?I3(t,e):t instanceof Nc?S3(t,e):function(i,s){const o=C3(i,s),a=yv(o)+yv(i.Pe);return U0(o)&&U0(i.Pe)?T3(a):b3(i.serializer,a)}(t,e)}function nk(t,e,n){return t instanceof Rc?I3(t,e):t instanceof Nc?S3(t,e):n}function C3(t,e){return t instanceof oh?function(r){return U0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class sh extends Wh{}class Rc extends Wh{constructor(e){super(),this.elements=e}}function I3(t,e){const n=A3(e);for(const r of t.elements)n.some(i=>Cr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Nc extends Wh{constructor(e){super(),this.elements=e}}function S3(t,e){let n=A3(e);for(const r of t.elements)n=n.filter(i=>!Cr(i,r));return{arrayValue:{values:n}}}class oh extends Wh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function yv(t){return ht(t.integerValue||t.doubleValue)}function A3(t){return Cg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rc&&i instanceof Rc||r instanceof Nc&&i instanceof Nc?ua(r.elements,i.elements,Cr):r instanceof oh&&i instanceof oh?Cr(r.Pe,i.Pe):r instanceof sh&&i instanceof sh}(t.transform,e.transform)}class ik{constructor(e,n){this.version=e,this.transformResults=n}}class Er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qh{}function x3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new P3(t.key,Er.none()):new Xc(t.key,t.data,Er.none());{const n=t.data,r=on.empty();let i=new Dt(Ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ds(t.key,r,new _n(i.toArray()),Er.none())}}function sk(t,e,n){t instanceof Xc?function(i,s,o){const a=i.value.clone(),l=_v(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(i,s,o){if(!vd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_v(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(k3(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xl(t,e,n,r){return t instanceof Xc?function(s,o,a,l){if(!vd(s.precondition,o))return a;const u=s.value.clone(),d=wv(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ds?function(s,o,a,l){if(!vd(s.precondition,o))return a;const u=wv(s.fieldTransforms,l,o),d=o.data;return d.setAll(k3(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return vd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ok(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=C3(r.transform,i||null);s!=null&&(n===null&&(n=on.empty()),n.set(r.field,s))}return n||null}function vv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ua(r,i,(s,o)=>rk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xc extends qh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ds extends qh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function k3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _v(t,e,n){const r=new Map;je(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,nk(o,a,n[i]))}return r}function wv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,tk(s,o,e))}return r}class P3 extends qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ak extends qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E3();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=x3(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(n,r)=>vv(n,r))&&ua(this.baseMutations,e.baseMutations,(n,r)=>vv(n,r))}}class Ag{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length);let i=function(){return X9}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ag(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Se;function dk(t){switch(t){default:return ae();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function R3(t){if(t===void 0)return ti("GRPC error has no .code"),B.UNKNOWN;switch(t){case ut.OK:return B.OK;case ut.CANCELLED:return B.CANCELLED;case ut.UNKNOWN:return B.UNKNOWN;case ut.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ut.INTERNAL:return B.INTERNAL;case ut.UNAVAILABLE:return B.UNAVAILABLE;case ut.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ut.NOT_FOUND:return B.NOT_FOUND;case ut.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ut.ABORTED:return B.ABORTED;case ut.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ut.DATA_LOSS:return B.DATA_LOSS;default:return ae()}}(Se=ut||(ut={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new Vs([4294967295,4294967295],0);function Ev(t){const e=hk().encode(t),n=new Y4;return n.update(e),new Uint8Array(n.digest())}function bv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vs([n,r],0),new Vs([i,s],0)]}class xg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nl(`Invalid padding: ${n}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Vs.fromNumber(r)));return i.compare(fk)===1&&(i=new Vs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ev(e),[r,i]=bv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new xg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Ev(e),[r,i]=bv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Yc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gh(ce.min(),i,new nt(Re),ni(),Ee())}}class Yc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yc(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class N3{constructor(e,n){this.targetId=e,this.me=n}}class L3{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Tv{constructor(){this.fe=0,this.ge=Iv(),this.pe=Xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Yc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Iv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pk{constructor(e){this.Le=e,this.Be=new Map,this.ke=ni(),this.qe=Cv(),this.Qe=new nt(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if($0(s))if(r===0){const o=new re(s.path);this.Ue(n,o,Kt.newNoDocument(o,ce.min()))}else je(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ys(r).toUint8Array()}catch(l){if(l instanceof a3)return ca("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new xg(o,i,s)}catch(l){return ca(l instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&$0(a.target)){const l=new re(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Kt.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Ee();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Gh(e,n,this.Qe,this.ke,r);return this.ke=ni(),this.qe=Cv(),this.Qe=new nt(Re),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Tv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dt(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Tv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cv(){return new nt(re.comparator)}function Iv(){return new nt(re.comparator)}const mk={asc:"ASCENDING",desc:"DESCENDING"},gk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yk={and:"AND",or:"OR"};class vk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function B0(t,e){return t.useProto3Json||zh(e)?e:{value:e}}function ah(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _k(t,e){return ah(t,e.toTimestamp())}function br(t){return je(!!t),ce.fromTimestamp(function(n){const r=Ji(n);return new Et(r.seconds,r.nanos)}(t))}function kg(t,e){return H0(t,e).canonicalString()}function H0(t,e){const n=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function M3(t){const e=qe.fromString(t);return je($3(e)),e}function W0(t,e){return kg(t.databaseId,e.path)}function yp(t,e){const n=M3(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(V3(n))}function D3(t,e){return kg(t.databaseId,e)}function wk(t){const e=M3(t);return e.length===4?qe.emptyPath():V3(e)}function q0(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function V3(t){return je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sv(t,e,n){return{name:W0(t,e),fields:n.value.mapValue.fields}}function Ek(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(je(d===void 0||typeof d=="string"),Xt.fromBase64String(d||"")):(je(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?B.UNKNOWN:R3(u.code);return new Y(d,u.message||"")}(o);n=new L3(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yp(t,r.document.name),s=br(r.document.updateTime),o=r.document.createTime?br(r.document.createTime):ce.min(),a=new on({mapValue:{fields:r.document.fields}}),l=Kt.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new _d(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yp(t,r.document),s=r.readTime?br(r.readTime):ce.min(),o=Kt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _d([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yp(t,r.document),s=r.removedTargetIds||[];n=new _d([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new uk(i,s),a=r.targetId;n=new N3(a,o)}}return n}function bk(t,e){let n;if(e instanceof Xc)n={update:Sv(t,e.key,e.value)};else if(e instanceof P3)n={delete:W0(t,e.key)};else if(e instanceof ds)n={update:Sv(t,e.key,e.data),updateMask:Rk(e.fieldMask)};else{if(!(e instanceof ak))return ae();n={verify:W0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof sh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_k(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function Tk(t,e){return t&&t.length>0?(je(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?br(i.updateTime):br(s);return o.isEqual(ce.min())&&(o=br(s)),new ik(o,i.transformResults||[])}(n,e))):[]}function Ck(t,e){return{documents:[D3(t,e.path)]}}function Ik(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D3(t,i);const s=function(u){if(u.length!==0)return F3(or.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Io(p.field),direction:xk(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=B0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Sk(t){let e=wk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=U3(h);return p instanceof or&&d3(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new Pc(So(y.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,zh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new ih(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,g=h.values||[];return new ih(g,p)}(n.endAt)),W9(e,i,o,s,a,"F",l,u)}function Ak(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U3(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=So(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=So(n.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=So(n.unaryFilter.field);return pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=So(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return pt.create(So(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return or.create(n.compositeFilter.filters.map(r=>U3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function xk(t){return mk[t]}function kk(t){return gk[t]}function Pk(t){return yk[t]}function Io(t){return{fieldPath:t.canonicalString()}}function So(t){return Ot.fromServerFormat(t.fieldPath)}function F3(t){return t instanceof pt?function(n){if(n.op==="=="){if(hv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NAN"}};if(dv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NAN"}};if(dv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(n.field),op:kk(n.op),value:n.value}}}(t):t instanceof or?function(n){const r=n.getFilters().map(i=>F3(i));return r.length===1?r[0]:{compositeFilter:{op:Pk(n.op),filters:r}}}(t):ae()}function Rk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,r,i,s=ce.min(),o=ce.min(),a=Xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.ct=e}}function Lk(t){const e=Sk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?z0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this._n=new Mk}addToCollectionParentIndex(e,n){return this._n.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Zi.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class Mk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new fa(0)}static Ln(){return new fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.changes=new Oa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xl(r.mutation,i,_n.empty(),Et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=Os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Rl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ni();const o=Ql(),a=function(){return Ql()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ds)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Xl(d.mutation,u,d.mutation.getFieldMask(),Et.now())):o.set(u.key,_n.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new Vk(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ql();let i=new nt((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||_n.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||Ee()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=E3();d.forEach(p=>{if(!s.has(p)){const g=x3(n.get(p),r.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve(Os());let a=-1,l=s;return o.next(u=>H.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?H.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ee())).next(d=>({batchId:a,changes:w3(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=Rl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Rl();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,l=>{const u=function(h,p){return new La(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Kt.newInvalidDocument(d)))});let a=Rl();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Xl(d.mutation,u,_n.empty(),Et.now()),Hh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return H.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:br(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Lk(i.bundledQuery),readTime:br(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.overlays=new nt(re.comparator),this.hr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=Os(),s=n.length+1,o=new re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new nt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Os(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Os(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return H.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ck(n,r));let s=this.hr.get(n);s===void 0&&(s=Ee(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Pr=new Dt(Tt.Ir),this.Tr=new Dt(Tt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Tt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new re(new qe([])),r=new Tt(n,e),i=new Tt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new re(new qe([])),r=new Tt(n,e),i=new Tt(n,e+1);let s=Ee();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Tt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return re.comparator(e.key,n.key)||Re(e.pr,n.pr)}static Er(e,n){return Re(e.pr,n.pr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Dt(Tt.Ir)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lk(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Tt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),i=new Tt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(Re);return n.forEach(i=>{const s=new Tt(i,0),o=new Tt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),H.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;re.isDocumentKey(s)||(s=s.child(""));const o=new Tt(new re(s),0);let a=new Dt(Re);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},o),H.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){je(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return H.forEach(n.mutations,i=>{const s=new Tt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Tt(n,0),i=this.wr.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.vr=e,this.docs=function(){return new nt(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Kt.newInvalidDocument(n))}getEntries(e,n){let r=ni();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Kt.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ni();const o=n.path,a=new re(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||A9(S9(d),r)<=0||(i.has(d.key)||Hh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Fr(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Bk(this)}getSize(e){return H.resolve(this.size)}}class Bk extends Dk{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.persistence=e,this.Mr=new Oa(n=>Ig(n),Sg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Pg,this.targetCount=0,this.Lr=fa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),H.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new fa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.qn(n),H.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.Br={},this.overlays={},this.kr=new Eg(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Hk(this),this.indexManager=new Ok,this.remoteDocumentCache=function(i){return new zk(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Nk(n),this.$r=new Fk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $k,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new jk(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new qk(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return H.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class qk extends k9{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.zr=new Pg,this.jr=null}static Hr(e){return new Rg(e)}get Jr(){if(this.jr)return this.jr;throw ae()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),H.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Jr,r=>{const i=re.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return H.or([()=>H.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ng(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return D6()?8:P9(Ut())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Gk;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(yl()<=Te.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),H.resolve()):(yl()<=Te.DEBUG&&Z("QueryEngine","Query:",Co(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(yl()<=Te.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(n))):H.resolve())}ji(e,n){if(gv(n))return H.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=z0(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ee(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,z0(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,i){return gv(n)||i.isEqual(ce.min())?H.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?H.resolve(null):(yl()<=Te.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Co(n)),this.es(e,o,n,I9(i,-1)).next(a=>a))})}Zi(e,n){let r=new Dt(v3(e));return n.forEach((i,s)=>{Hh(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return yl()<=Te.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Co(n)),this.zi.getDocumentsMatchingQuery(e,n,Zi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new nt(Re),this.rs=new Oa(s=>Ig(s),Sg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uk(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Xk(t,e,n,r){return new Qk(t,e,n,r)}async function j3(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ee();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function Yk(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,p=h.keys();let g=H.resolve();return p.forEach(y=>{g=g.next(()=>d.getEntry(l,y)).next(I=>{const P=u.docVersions.get(y);je(P!==null),I.version.compareTo(P)<0&&(h.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),d.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function z3(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Zk(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Xt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(I,P,C){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(p,g,d)&&a.push(n.Qr.updateTargetData(s,g))});let l=ni(),u=Ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Jk(s,o,e.documentUpdates).next(d=>{l=d.cs,u=d.ls})),!r.isEqual(ce.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ns=i,s))}function Jk(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ni();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:i}})}function eP(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tP(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ni(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function G0(t,e,n){const r=ue(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qc(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Av(t,e,n){const r=ue(t);let i=ce.min(),s=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=ue(l),p=h.rs.get(d);return p!==void 0?H.resolve(h.ns.get(p)):h.Qr.getTargetData(u,d)}(r,o,wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:Ee())).next(a=>(nP(r,G9(e),a),{documents:a,hs:s})))}function nP(t,e,n){let r=t.ss.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class xv{constructor(){this.activeTargetIds=J9()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rP{constructor(){this.no=new xv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new xv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu=null;function vp(){return Wu===null?Wu=function(){return 268435456+Math.round(2147483648*Math.random())}():Wu++,"0x"+Wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class aP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=vp(),l=this.vo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(n,l,u,i).then(d=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ca("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=sP[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=vp();return new Promise((o,a)=>{const l=new Z4;l.setWithCredentials(!0),l.listenOnce(e3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gd.NO_ERROR:const d=l.getResponseJson();Z(Wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case gd.TIMEOUT:Z(Wt,`RPC '${e}' ${s} timed out`),a(new Y(B.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const h=l.getStatus();if(Z(Wt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(P){const C=P.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(C)>=0?C:B.UNKNOWN}(g.status);a(new Y(y,g.message))}else a(new Y(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(B.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{Z(Wt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Z(Wt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Oo(e,n,r){const i=vp(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=r3(),a=n3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new J4({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Z(Wt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,g=!1;const y=new oP({lo:P=>{g?Z(Wt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(Z(Wt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),Z(Wt,`RPC '${e}' stream ${i} sending:`,P),h.send(P))},ho:()=>h.close()}),I=(P,C,v)=>{P.listen(C,S=>{try{v(S)}catch(D){setTimeout(()=>{throw D},0)}})};return I(h,Pl.EventType.OPEN,()=>{g||(Z(Wt,`RPC '${e}' stream ${i} transport opened.`),y.mo())}),I(h,Pl.EventType.CLOSE,()=>{g||(g=!0,Z(Wt,`RPC '${e}' stream ${i} transport closed`),y.po())}),I(h,Pl.EventType.ERROR,P=>{g||(g=!0,ca(Wt,`RPC '${e}' stream ${i} transport errored:`,P),y.po(new Y(B.UNAVAILABLE,"The operation could not be completed")))}),I(h,Pl.EventType.MESSAGE,P=>{var C;if(!g){const v=P.data[0];je(!!v);const S=v,D=S.error||((C=S[0])===null||C===void 0?void 0:C.error);if(D){Z(Wt,`RPC '${e}' stream ${i} received error:`,D);const z=D.status;let R=function(b){const A=ut[b];if(A!==void 0)return R3(A)}(z),T=D.message;R===void 0&&(R=B.INTERNAL,T="Unknown error status: "+z+" with message "+D.message),g=!0,y.po(new Y(R,T)),h.close()}else Z(Wt,`RPC '${e}' stream ${i} received:`,v),y.yo(v)}}),I(a,t3.STAT_EVENT,P=>{P.stat===D0.PROXY?Z(Wt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===D0.NOPROXY&&Z(Wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){return new vk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new B3(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new Y(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lP extends H3{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=Ek(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?br(o.readTime):ce.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=q0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=$0(l)?{documents:Ck(s,l)}:{query:Ik(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=O3(s,o.resumeToken);const u=B0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=ah(s,o.snapshotVersion.toTimestamp());const u=B0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Ak(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=q0(this.serializer),n.removeTarget=e,this.i_(n)}}class cP extends H3{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=Tk(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.A_(r,n)}return je(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=q0(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bk(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,H0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(B.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,H0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(B.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class dP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ti(n),this.y_=!1):Z("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{io(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ue(l);u.M_.add(4),await Zc(u),u.N_.set("Unknown"),u.M_.delete(4),await Qh(u)}(this))})}),this.N_=new dP(r,i)}}async function Qh(t){if(io(t))for(const e of t.x_)await e(!0)}async function Zc(t){for(const e of t.x_)await e(!1)}function W3(t,e){const n=ue(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Dg(n)?Mg(n):Ma(n).Xo()&&Og(n,e))}function Lg(t,e){const n=ue(t),r=Ma(n);n.F_.delete(e),r.Xo()&&q3(n,e),n.F_.size===0&&(r.Xo()?r.n_():io(n)&&n.N_.set("Unknown"))}function Og(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ma(t).P_(e)}function q3(t,e){t.L_.xe(e),Ma(t).I_(e)}function Mg(t){t.L_=new pk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ma(t).start(),t.N_.w_()}function Dg(t){return io(t)&&!Ma(t).Zo()&&t.F_.size>0}function io(t){return ue(t).M_.size===0}function G3(t){t.L_=void 0}async function fP(t){t.N_.set("Online")}async function pP(t){t.F_.forEach((e,n)=>{Og(t,e)})}async function mP(t,e){G3(t),Dg(t)?(t.N_.D_(e),Mg(t)):t.N_.set("Unknown")}async function gP(t,e,n){if(t.N_.set("Online"),e instanceof L3&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lh(t,r)}else if(e instanceof _d?t.L_.Ke(e):e instanceof N3?t.L_.He(e):t.L_.We(e),!n.isEqual(ce.min()))try{const r=await z3(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.F_.get(u);d&&s.F_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.F_.get(l);if(!d)return;s.F_.set(l,d.withResumeToken(Xt.EMPTY_BYTE_STRING,d.snapshotVersion)),q3(s,l);const h=new Ni(d.target,l,u,d.sequenceNumber);Og(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await lh(t,r)}}async function lh(t,e,n){if(!Qc(e))throw e;t.M_.add(1),await Zc(t),t.N_.set("Offline"),n||(n=()=>z3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Qh(t)})}function K3(t,e){return e().catch(n=>lh(t,n,e))}async function Xh(t){const e=ue(t),n=es(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;yP(e);)try{const i=await eP(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,vP(e,i)}catch(i){await lh(e,i)}Q3(e)&&X3(e)}function yP(t){return io(t)&&t.v_.length<10}function vP(t,e){t.v_.push(e);const n=es(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Q3(t){return io(t)&&!es(t).Zo()&&t.v_.length>0}function X3(t){es(t).start()}async function _P(t){es(t).V_()}async function wP(t){const e=es(t);for(const n of t.v_)e.d_(n.mutations)}async function EP(t,e,n){const r=t.v_.shift(),i=Ag.from(r,e,n);await K3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Xh(t)}async function bP(t,e){e&&es(t).E_&&await async function(r,i){if(function(o){return dk(o)&&o!==B.ABORTED}(i.code)){const s=r.v_.shift();es(r).t_(),await K3(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Xh(r)}}(t,e),Q3(t)&&X3(t)}async function Pv(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=io(n);n.M_.add(3),await Zc(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Qh(n)}async function TP(t,e){const n=ue(t);e?(n.M_.delete(2),await Qh(n)):e||(n.M_.add(2),await Zc(n),n.N_.set("Unknown"))}function Ma(t){return t.B_||(t.B_=function(n,r,i){const s=ue(n);return s.f_(),new lP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:fP.bind(null,t),To:pP.bind(null,t),Ao:mP.bind(null,t),h_:gP.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Dg(t)?Mg(t):t.N_.set("Unknown")):(await t.B_.stop(),G3(t))})),t.B_}function es(t){return t.k_||(t.k_=function(n,r,i){const s=ue(n);return s.f_(),new cP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:_P.bind(null,t),Ao:bP.bind(null,t),R_:wP.bind(null,t),A_:EP.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Xh(t)):(await t.k_.stop(),t.v_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Vg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(t,e){if(ti("AsyncQueue",`${e}: ${t}`),Qc(t))return new Y(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Rl(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new Zo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.q_=new nt(re.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ae():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class pa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pa(e,n,Zo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class IP{constructor(){this.queries=new Oa(e=>y3(e),Bh),this.onlineState="Unknown",this.z_=new Set}}async function SP(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new CP,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ug(o,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&Fg(n)}async function AP(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xP(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Fg(n)}function kP(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function Fg(t){t.z_.forEach(e=>{e.next()})}var K0,Nv;(Nv=K0||(K0={})).J_="default",Nv.Cache="cache";class PP{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==K0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.key=e}}class Z3{constructor(e){this.key=e}}class RP{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ee(),this.mutatedKeys=Ee(),this.Ia=v3(e),this.Ta=new Zo(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new Rv,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),g=Hh(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?y!==I&&(r.track({type:3,doc:g}),P=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),P=!0,(l&&this.Ia(g,l)>0||u&&this.Ia(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),P=!0):p&&!g&&(r.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(g?(o=o.add(g),s=I?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,h)=>function(g,y){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return I(g)-I(y)}(d.type,h.type)||this.Ia(d.doc,h.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new pa(this.query,e.Ta,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Rv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ee(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Z3(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Y3(r))}),n}pa(e){this.la=e.hs,this.Pa=Ee();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return pa.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class NP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LP{constructor(e){this.key=e,this.wa=!1}}class OP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Oa(a=>y3(a),Bh),this.Da=new Map,this.Ca=new Set,this.va=new nt(re.comparator),this.Fa=new Map,this.Ma=new Pg,this.xa={},this.Oa=new Map,this.Na=fa.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function MP(t,e,n=!0){const r=iE(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await J3(r,e,n,!0),i}async function DP(t,e){const n=iE(t);await J3(n,e,!0,!1)}async function J3(t,e,n,r){const i=await tP(t.localStore,wr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await VP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&W3(t.remoteStore,i),a}async function VP(t,e,n,r,i){t.Ba=(h,p,g)=>async function(I,P,C,v){let S=P.view.da(C);S.Xi&&(S=await Av(I.localStore,P.query,!1).then(({documents:T})=>P.view.da(T,S)));const D=v&&v.targetChanges.get(P.targetId),z=v&&v.targetMismatches.get(P.targetId)!=null,R=P.view.applyChanges(S,I.isPrimaryClient,D,z);return Ov(I,P.targetId,R.fa),R.snapshot}(t,h,p,g);const s=await Av(t.localStore,e,!0),o=new RP(e,s.hs),a=o.da(s.documents),l=Yc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Ov(t,n,u.fa);const d=new NP(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot}async function UP(t,e,n){const r=ue(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Bh(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await G0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Lg(r.remoteStore,i.targetId),Q0(r,i.targetId)}).catch(Kc)):(Q0(r,i.targetId),await G0(r.localStore,i.targetId,!0))}async function FP(t,e){const n=ue(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lg(n.remoteStore,r.targetId))}async function $P(t,e,n){const r=GP(t);try{const i=await function(o,a){const l=ue(o),u=Et.now(),d=a.reduce((g,y)=>g.add(y.key),Ee());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=ni(),I=Ee();return l.os.getEntries(g,d).next(P=>{y=P,y.forEach((C,v)=>{v.isValidDocument()||(I=I.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(P=>{h=P;const C=[];for(const v of a){const S=ok(v,h.get(v.key).overlayedDocument);S!=null&&C.push(new ds(v.key,S,l3(S.value.mapValue),Er.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,C,a)}).next(P=>{p=P;const C=P.applyToLocalDocumentSet(h,I);return l.documentOverlayCache.saveOverlays(g,P.batchId,C)})}).then(()=>({batchId:p.batchId,changes:w3(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.xa[o.currentUser.toKey()];u||(u=new nt(Re)),u=u.insert(a,l),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,n),await Jc(r,i.changes),await Xh(r.remoteStore)}catch(i){const s=Ug(i,"Failed to persist write");n.reject(s)}}async function eE(t,e){const n=ue(t);try{const r=await Zk(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?je(o.wa):i.removedDocuments.size>0&&(je(o.wa),o.wa=!1))}),await Jc(n,r,e)}catch(r){await Kc(r)}}function Lv(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const p of h.U_)p.j_(a)&&(u=!0)}),u&&Fg(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jP(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new nt(re.comparator);o=o.insert(s,Kt.newNoDocument(s,ce.min()));const a=Ee().add(s),l=new Gh(ce.min(),new Map,new nt(Re),o,a);await eE(r,l),r.va=r.va.remove(s),r.Fa.delete(e),$g(r)}else await G0(r.localStore,e,!1).then(()=>Q0(r,e,n)).catch(Kc)}async function zP(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await Yk(n.localStore,e);nE(n,r,null),tE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jc(n,i)}catch(i){await Kc(i)}}async function BP(t,e,n){const r=ue(t);try{const i=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(je(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);nE(r,e,n),tE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jc(r,i)}catch(i){await Kc(i)}}function tE(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function nE(t,e,n){const r=ue(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Q0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||rE(t,r)})}function rE(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Lg(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),$g(t))}function Ov(t,e,n){for(const r of n)r instanceof Y3?(t.Ma.addReference(r.key,e),HP(t,r)):r instanceof Z3?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||rE(t,r.key)):ae()}function HP(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.Ca.add(r),$g(t))}function $g(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new re(qe.fromString(e)),r=t.Na.next();t.Fa.set(r,new LP(n)),t.va=t.va.insert(n,r),W3(t.remoteStore,new Ni(wr(m3(n.path)),r,"TargetPurposeLimboResolution",Eg.oe))}}async function Jc(t,e,n){const r=ue(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Ng.Ki(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,u){const d=ue(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>H.forEach(u,p=>H.forEach(p.qi,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>H.forEach(p.Qi,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!Qc(h))throw h;Z("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const g=d.ns.get(p),y=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(y);d.ns=d.ns.insert(p,I)}}}(r.localStore,s))}async function WP(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await j3(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new Y(B.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jc(n,r.us)}}function qP(t,e){const n=ue(t),r=n.Fa.get(e);if(r&&r.wa)return Ee().add(r.key);{let i=Ee();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function iE(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jP.bind(null,e),e.Sa.h_=xP.bind(null,e.eventManager),e.Sa.ka=kP.bind(null,e.eventManager),e}function GP(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BP.bind(null,e),e}class Mv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Kh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Xk(this.persistence,new Kk,e.initialUser,this.serializer)}createPersistence(e){return new Wk(Rg.Hr,this.serializer)}createSharedClientState(e){return new rP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class KP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WP.bind(null,this.syncEngine),await TP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IP}()}createDatastore(e){const n=Kh(e.databaseInfo.databaseId),r=function(s){return new aP(s)}(e.databaseInfo);return function(s,o,a,l){return new uP(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new hP(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Lv(this.syncEngine,n,0),function(){return kv.D()?new kv:new iP}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new OP(i,s,o,a,l,u);return d&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ue(r);Z("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Zc(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qt.UNAUTHENTICATED,this.clientId=s3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ug(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wp(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await j3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZP(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Pv(e.remoteStore,i)),t._onlineComponents=e}function YP(t){return t.name==="FirebaseError"?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function ZP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await wp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!YP(n))throw n;ca("Error using user provided cache. Falling back to memory cache: "+n),await wp(t,new Mv)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await wp(t,new Mv);return t._offlineComponents}async function sE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Dv(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Dv(t,new KP))),t._onlineComponents}function JP(t){return sE(t).then(e=>e.syncEngine)}async function eR(t){const e=await sE(t),n=e.eventManager;return n.onListen=MP.bind(null,e.syncEngine),n.onUnlisten=UP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=FP.bind(null,e.syncEngine),n}function tR(t,e,n={}){const r=new Wi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new QP({next:p=>{o.enqueueAndForget(()=>AP(s,h)),p.fromCache&&l.source==="server"?u.reject(new Y(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new PP(a,d,{includeMetadataChanges:!0,ra:!0});return SP(s,h)}(await eR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e,n){if(!n)throw new Y(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nR(t,e,n,r){if(e===!0&&r===!0)throw new Y(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uv(t){if(!re.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fv(t){if(re.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function ma(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yh(t);throw new Y(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g9;switch(r.type){case"firstParty":return new w9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Vv.get(n);r&&(Z("ComponentProvider","Removing Datastore"),Vv.delete(n),r.terminate())}(this),Promise.resolve()}}function rR(t,e,n,r={}){var i;const s=(t=ma(t,Zh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=qt.MOCK_USER;else{a=P6(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Y(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new qt(u)}t._authCredentials=new y9(new i3(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class qi extends so{constructor(e,n,r){super(e,n,m3(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new re(e))}withConverter(e){return new qi(this.firestore,e,this._path)}}function oo(t,e,...n){if(t=bt(t),aE("collection","path",e),t instanceof Zh){const r=qe.fromString(e,...n);return Fv(r),new qi(t,null,r)}{if(!(t instanceof En||t instanceof qi))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Fv(r),new qi(t.firestore,null,r)}}function Jh(t,e,...n){if(t=bt(t),arguments.length===1&&(e=s3.newId()),aE("doc","path",e),t instanceof Zh){const r=qe.fromString(e,...n);return Uv(r),new En(t,null,new re(r))}{if(!(t instanceof En||t instanceof qi))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Uv(r),new En(t.firestore,t instanceof qi?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new B3(this,"async_queue_retry"),this.hu=()=>{const n=_p();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=_p();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=_p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Wi;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Qc(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ti("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Vg.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ae()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}class ef extends Zh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new iR}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cE(this),this._firestoreClient.terminate()}}function sR(t,e){const n=typeof t=="object"?t:p4(),r=typeof t=="string"?t:"(default)",i=lg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=x6("firestore");s&&rR(i,...s)}return i}function lE(t){return t._firestoreClient||cE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cE(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new L9(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,oE(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new XP(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga(Xt.fromBase64String(e))}catch(n){throw new Y(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ga(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^__.*__$/;class aR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}class uE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Bg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ch(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(dE(this.fu)&&oR.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class lR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kh(e)}Fu(e,n,r,i=!1){return new Bg({fu:e,methodName:n,vu:r,path:Ot.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hg(t){const e=t._freezeSettings(),n=Kh(t._databaseId);return new lR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cR(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Wg("Data must be an object, but it was:",o,r);const a=hE(r,o);let l,u;if(s.merge)l=new _n(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=X0(e,h,n);if(!o.contains(p))throw new Y(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);pE(d,p)||d.push(p)}l=new _n(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new aR(new on(a),l,u)}class nf extends jg{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nf}}function uR(t,e,n,r){const i=t.Fu(1,e,n);Wg("Data must be an object, but it was:",i,r);const s=[],o=on.empty();ro(r,(l,u)=>{const d=qg(e,l,n);u=bt(u);const h=i.Su(d);if(u instanceof nf)s.push(d);else{const p=eu(u,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new _n(s);return new uE(o,a,i.fieldTransforms)}function dR(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[X0(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(X0(e,s[p])),l.push(s[p+1]);const u=[],d=on.empty();for(let p=a.length-1;p>=0;--p)if(!pE(u,a[p])){const g=a[p];let y=l[p];y=bt(y);const I=o.Su(g);if(y instanceof nf)u.push(g);else{const P=eu(y,I);P!=null&&(u.push(g),d.set(g,P))}}const h=new _n(u);return new uE(d,h,o.fieldTransforms)}function hR(t,e,n,r=!1){return eu(n,t.Fu(r?4:3,e))}function eu(t,e){if(fE(t=bt(t)))return Wg("Unsupported field value:",e,t),hE(t,e);if(t instanceof jg)return function(r,i){if(!dE(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=eu(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ek(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Et.fromDate(r);return{timestampValue:ah(i.serializer,s)}}if(r instanceof Et){const s=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ah(i.serializer,s)}}if(r instanceof zg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ga)return{bytesValue:O3(i.serializer,r._byteString)};if(r instanceof En){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Yh(r)}`)}(t,e)}function hE(t,e){const n={};return o3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(t,(r,i)=>{const s=eu(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function fE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof zg||t instanceof ga||t instanceof En||t instanceof jg)}function Wg(t,e,n){if(!fE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Yh(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function X0(t,e,n){if((e=bt(e))instanceof tf)return e._internalPath;if(typeof e=="string")return qg(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}const fR=new RegExp("[~\\*/\\[\\]]");function qg(t,e,n){if(e.search(fR)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tf(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(B.INVALID_ARGUMENT,a+t+l)}function pE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pR extends mE{data(){return super.data()}}function rf(t,e){return typeof e=="string"?qg(t,e):e instanceof tf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class gE extends Gg{}function sf(t,e,...n){let r=[];e instanceof Gg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Qg).length,a=s.filter(l=>l instanceof of).length;if(o>1||o>0&&a>0)throw new Y(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class of extends gE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new of(e,n,r)}_apply(e){const n=this._parse(e);return yE(e._query,n),new so(e.firestore,e.converter,j0(e._query,n))}_parse(e){const n=Hg(e.firestore);return function(s,o,a,l,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){zv(h,d);const g=[];for(const y of h)g.push(jv(l,s,y));p={arrayValue:{values:g}}}else p=jv(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||zv(h,d),p=hR(a,o,h,d==="in"||d==="not-in");return pt.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kg(t,e,n){const r=e,i=rf("where",t);return of._create(i,r,n)}class Qg extends Gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)yE(o,l),o=j0(o,l)}(e._query,n),new so(e.firestore,e.converter,j0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xg extends gE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pc(s,o)}(e._query,this._field,this._direction);return new so(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new La(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function gR(t,e="asc"){const n=e,r=rf("orderBy",t);return Xg._create(r,n)}function jv(t,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new Y(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g3(e)&&n.indexOf("/")!==-1)throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!re.isDocumentKey(r))throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uv(t,new re(r))}if(n instanceof En)return uv(t,n._key);throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yh(n)}.`)}function zv(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yE(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yR{convertValue(e,n="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ro(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new zg(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){const n=Ji(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);je($3(r));const i=new xc(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(n)||ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _R extends mE{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wd extends _R{data(e={}){return super.data(e)}}class wR{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wd(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new wd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new wd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:ER(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ER(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class bR extends yR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function tu(t){t=ma(t,so);const e=ma(t.firestore,ef),n=lE(e),r=new bR(e);return mR(t._query),tR(n,t._query).then(i=>new wR(e,r,t,i))}function Yg(t,e,n,...r){t=ma(t,En);const i=ma(t.firestore,ef),s=Hg(i);let o;return o=typeof(e=bt(e))=="string"||e instanceof tf?dR(s,"updateDoc",t._key,e,n,r):uR(s,"updateDoc",t._key,e),_E(i,[o.toMutation(t._key,Er.exists(!0))])}function vE(t,e){const n=ma(t.firestore,ef),r=Jh(t),i=vR(t.converter,e);return _E(n,[cR(Hg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}function _E(t,e){return function(r,i){const s=new Wi;return r.asyncQueue.enqueueAndForget(async()=>$P(await JP(r),i,s)),s.promise}(lE(t),e)}(function(e,n=!0){(function(i){Na=i})(Pa),aa(new qs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ef(new v9(r.getProvider("auth-internal")),new b9(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hi(ov,"4.6.4",e),Hi(ov,"4.6.4","esm2017")})();const TR={apiKey:"AIzaSyBdGUifgqve2r3-VImFab7_rSGd4jB1G-0",authDomain:"photogram-a78f5.firebaseapp.com",projectId:"photogram-a78f5",storageBucket:"photogram-a78f5.appspot.com",messagingSenderId:"515394875975",appId:"1:515394875975:web:9cb31f91ed9bc8df057762"},wE=f4(TR),nu=X4(wE),Ir=sR(wE),EE=(t,e)=>Zx(nu,t,e),bE=(t,e)=>Yx(nu,t,e),TE=()=>{r8(nu)},CE=()=>{const t=new $r;return C8(nu,t)},IE=t=>(console.log("The user profile info is: ",t),e8(t.user,{displayName:t.displayName,photoURL:t.photoURL})),SE=V.createContext({user:null,logIn:EE,signUp:bE,logOut:TE,googleSignIn:CE,updateProfileInfo:IE}),CR=({children:t})=>{const[e,n]=V.useState(null);V.useEffect(()=>{const i=U4(nu,s=>(s&&n(s),()=>{i()}))});const r={user:e,logIn:EE,signUp:bE,logOut:TE,googleSignIn:CE,updateProfileInfo:IE};return E.jsx(SE.Provider,{value:r,children:t})},Sr=()=>V.useContext(SE),IR=[{name:"Home",link:"/",icon:Ei.home},{name:"Add Photos",link:"/create-post",icon:Ei.add},{name:"My Photos",link:"/my-photos",icon:Ei.myphoto},{name:"Profile",link:"/profile",icon:Ei.profile},{name:"Notifications",link:"#",icon:Ei.notification},{name:"Direct",link:"#",icon:Ei.direct},{name:"Settings",link:"#",icon:Ei.settings}];function SR({}){const{pathname:t}=ls(),{logOut:e}=Sr();return E.jsxs("nav",{className:"max-w-sm w-full h-screen flex flex-col space-x-7 relative",children:[E.jsx("div",{className:"flex justify-center m-5",children:E.jsx("div",{className:"text-lg text-white",children:"PhotoGram"})}),IR.map(n=>E.jsx(Tc,{to:n.link,className:Tn(S0({variant:"default"}),t===n.link?"bg-white text-white-800 rounded-l-full hover:bg-white":"bg-transparent rounded-l-full hover:bg-slate-950 duration-300 hover:text-white","justify-start mb-2"),children:E.jsxs("div",{className:"flex",children:[E.jsx("span",{children:E.jsx("img",{src:n.icon,className:"w-5 h-5 mr-2",style:{filter:`${t===n.link?"invert(0)":"invert(1)"}`}})}),E.jsx("span",{children:n.name})]})},n.name)),E.jsx(Tc,{to:"/login",onClick:e,className:Tn(S0({variant:"default"}),t==="/login"?"bg-white text-white-800 rounded-l-full hover:bg-white":"bg-transparent rounded-l-full hover:bg-slate-950 duration-300 hover:text-white","justify-start"),children:E.jsxs("div",{className:"flex",children:[E.jsx("span",{children:E.jsx("img",{src:Ei.logout,className:"w-5 h-5 mr-2",style:{filter:`${t==="/login"?"invert(0)":"invert(1)"}`}})}),E.jsx("span",{children:"Logout"})]})})]})}const AR="/assets/image1-CoqYZn9M.jpg",xR="/assets/image2-n_CPjltO.jpg",kR="/assets/image3-DgA0XuPA.jpg",PR="/assets/image4-C82QDRdx.jpg",RR="/assets/image5-DZOQ_6Ay.jpg",NR="/assets/image6-D7ViGmDS.jpg",LR="/assets/image7-Bo2YHah9.jpg",OR="/assets/avatar-YAMwZbe4.png",Ue={img1:AR,img2:xR,img3:kR,img4:PR,img5:RR,img6:NR,img7:LR,avtDefault:OR},af="users",MR=t=>{try{return vE(oo(Ir,af),t)}catch(e){console.log(e)}},DR=async t=>{try{const e=sf(oo(Ir,af),Kg("userId","==",t)),n=await tu(e);let r={};return n.size>0?(n.forEach(i=>{const s=i.data();r={id:i.id,...s}}),r):(console.log("No such document"),null)}catch(e){console.log(e)}},VR=async(t,e)=>{const n=Jh(Ir,af,t);return Yg(n,{...e})},UR=async t=>{try{const e=await tu(oo(Ir,af)),n=[];if(e.size>0)return e.forEach(r=>{const i=r.data(),s={id:r.id,...i};n.push(s)}),n.filter(r=>r.userId!=t);console.log("No such documents")}catch(e){console.log(e)}};function FR({}){const{user:t}=Sr(),[e,n]=V.useState([]),r=async s=>{const o=await UR(s)||[];n(o)};V.useEffect(()=>{(t==null?void 0:t.uid)!=null&&r(t.uid)},[]);const i=()=>e.map(s=>E.jsxs("div",{className:"flex flex-row items-center justify-start border-gray-400 mb-4",children:[E.jsx("span",{className:"mr-2",children:E.jsx("img",{src:s.photoURL?s.photoURL:Ue.avtDefault,alt:"avatar",className:"size-10 rounded-full border-2 border-yellow-200 object-cover"})}),E.jsx("span",{className:"text-xs",children:s.displayName?s.displayName:"Guest_User"}),E.jsx(sr,{className:"h-6 text-xs p-3 py-2 bg-slate-700 last-of-type:ml-auto",children:"Follow"})]}));return E.jsxs("div",{className:"text-white py-8 px-3",children:[E.jsx(Tc,{to:"/profile",children:E.jsxs("div",{className:"flex flex-row items-center border-b border-gray-400 pb-4 mb-4 cursor-pointer",children:[E.jsx("span",{className:"mr-2",children:E.jsx("img",{src:t!=null&&t.photoURL?t.photoURL:Ue.avtDefault,alt:"avatar",className:"size-10 rounded-full border-2 border-yellow-200 object-cover"})}),E.jsx("span",{className:"text-xs",children:t!=null&&t.displayName?t.displayName:"Guest_User"})]})}),E.jsx("h3",{className:"text-sm text-slate-300",children:"Suggested Friends"}),E.jsx("div",{className:"my-4",children:e.length>0?i():""})]})}function ru({children:t}){return E.jsxs("div",{className:"flex bg-white",children:[E.jsx("aside",{className:"flex gap-x-4 bg-slate-800 fixed top-0 left-0 z-40 lg:w-60 h-screen",children:E.jsx(SR,{})}),E.jsx("div",{className:"flex-1 lg:ml-60 ml-36 lg:mr-60 p-8",children:t}),E.jsx("aside",{className:"lg:w-60 h-screen lg:block hidden bg-slate-800 fixed top-0 right-0 z-40",children:E.jsx(FR,{})})]})}const lf=V.forwardRef(({className:t,...e},n)=>E.jsx("div",{ref:n,className:Tn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));lf.displayName="Card";const cf=V.forwardRef(({className:t,...e},n)=>E.jsx("div",{ref:n,className:Tn("flex flex-col space-y-1.5 p-6",t),...e}));cf.displayName="CardHeader";const uf=V.forwardRef(({className:t,...e},n)=>E.jsx("h3",{ref:n,className:Tn("text-2xl font-semibold leading-none tracking-tight",t),...e}));uf.displayName="CardTitle";const Zg=V.forwardRef(({className:t,...e},n)=>E.jsx("p",{ref:n,className:Tn("text-sm text-muted-foreground",t),...e}));Zg.displayName="CardDescription";const df=V.forwardRef(({className:t,...e},n)=>E.jsx("div",{ref:n,className:Tn("p-6 pt-0",t),...e}));df.displayName="CardContent";const hf=V.forwardRef(({className:t,...e},n)=>E.jsx("div",{ref:n,className:Tn("flex items-center p-6 pt-0",t),...e}));hf.displayName="CardFooter";/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AE=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>V.createElement("svg",{ref:l,...jR,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:AE("lucide",i),...a},[...o.map(([u,d])=>V.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=(t,e)=>{const n=V.forwardRef(({className:r,...i},s)=>V.createElement(zR,{ref:s,iconNode:e,className:AE(`lucide-${$R(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=ff("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ff("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=ff("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=ff("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ya="posts",qR=t=>vE(oo(Ir,ya),t),GR=async()=>{try{const t=sf(oo(Ir,ya),gR("date","desc")),e=await tu(t),n=[];if(e.size>0)return e.forEach(r=>{const i=r.data(),s={id:r.id,...i};n.push(s)}),n;console.log("No such document")}catch(t){console.log(t)}},xE=t=>{const e=sf(oo(Ir,ya),Kg("userId","==",t));return tu(e)},KR=(t,e,n)=>{const r=Jh(Ir,ya,t);return Yg(r,{likes:n,userlikes:e})},QR=async t=>{var r;const e=sf(oo(Ir,ya),Kg("userId","==",(r=t.user)==null?void 0:r.uid)),n=await tu(e);n.size>0?n.forEach(i=>{const s=Jh(Ir,ya,i.id);Yg(s,{username:t.displayName,photoURL:t.photoURL})}):console.log("The user doesn't have anu post")};function XR({data:t}){var s;const{user:e}=Sr(),[n,r]=V.useState({likes:t.likes,isLike:!!((s=t.userlikes)!=null&&s.includes(e.uid))}),i=async o=>{var a,l;r({likes:o?n.likes+1:n.likes-1,isLike:!n.isLike}),o?(a=t.userlikes)==null||a.push(e.uid):(l=t.userlikes)==null||l.splice(t.userlikes.indexOf(e.uid),1),await KR(t.id,t.userlikes,o?n.likes+1:n.likes-1)};return E.jsxs(lf,{className:"mb-6",children:[E.jsx(cf,{className:"flex flex-col p-3",children:E.jsxs(uf,{className:"flex justify-start items-center text-sm text-center",children:[E.jsx("span",{className:"mr-2",children:E.jsx("img",{className:"size-10 border-2 border-slate-800 rounded-full object-cover",src:t.photoURL})}),E.jsx("span",{children:t.username})]})}),E.jsx(df,{className:"p-0",children:E.jsx("img",{src:t.photos?t.photos[0].cdnUrl:""})}),E.jsxs(hf,{className:"flex flex-col p-3 mx-1",children:[E.jsxs("div",{className:"w-full flex justify-between mb-3",children:[E.jsx(Jg,{className:Tn("stroke-slate-600","cursor-pointer",n.isLike?"fill-red-500 stroke-transparent":"fill-none"),onClick:()=>i(!n.isLike)}),E.jsx(BR,{})]}),E.jsxs("div",{className:"w-full text-sm font-medium",children:[n.likes," Likes"]}),E.jsx("div",{className:"w-full text-sm",children:t.caption})]})]})}function YR(){return E.jsxs("div",{className:"flex justify-between",children:[E.jsx("img",{className:"size-20 border-4 border-slate-800 rounded-full object-cover",src:Ue.img1,alt:Ue.img1}),E.jsx("img",{className:"size-20 border-4 border-slate-800 rounded-full object-cover",src:Ue.img2,alt:Ue.img2}),E.jsx("img",{className:"size-20 border-4 border-slate-800 rounded-full object-cover",src:Ue.img3,alt:Ue.img3}),E.jsx("img",{className:"size-20 border-4 border-slate-800 rounded-full object-cover",src:Ue.img4,alt:Ue.img4}),E.jsx("img",{className:"size-20 border-4 border-slate-800 rounded-full object-cover",src:Ue.img5,alt:Ue.img5}),E.jsx("img",{className:"size-20 border-4 border-slate-800 rounded-full object-cover",src:Ue.img6,alt:Ue.img6}),E.jsx("img",{className:"size-20 border-4 border-slate-800 rounded-full object-cover",src:Ue.img7,alt:Ue.img7})]})}const Qr=V.forwardRef(({className:t,type:e,...n},r)=>E.jsx("input",{type:e,className:Tn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Qr.displayName="Input";function ZR({}){const{user:t}=Sr(),[e,n]=V.useState([]),r=async()=>{const s=await GR()||[];console.log("Array response: ",s),n(s)};V.useEffect(()=>{t!=null&&r()},[]);const i=()=>e.map(s=>E.jsx(XR,{data:s},s.id));return E.jsx(ru,{children:E.jsxs("div",{className:"flex flex-col",children:[E.jsxs("div",{className:"w-full relative mb-6 text-2xl text-gray-600",children:[E.jsx(Qr,{className:"h-10 border-2 border-gray-300 bg-white px-5 pr-16 rounded-sm text-base focus:outline",placeholder:"search",type:"search",name:"search"}),E.jsx(sr,{type:"submit",className:"absolute right-1 top-0 bg-transparent",children:E.jsx(WR,{className:"size-5 text-gray-400"})})]}),E.jsxs("div",{className:"mb-5 overflow-y-auto",children:[E.jsx("h2",{className:"mb-5",children:"Stories"}),E.jsx(YR,{})]}),E.jsxs("div",{className:"mb-5",children:[E.jsx("h2",{className:"mb-5",children:"Feed"}),E.jsx("div",{className:"w-full flex justify-center",children:E.jsx("div",{className:"max-w-sm flex flex-col rounded-sm overflow-hidden",children:e?i():E.jsx("div",{children:"...loading"})})})]})]})})}var JR=Object.defineProperty,eN=(t,e,n)=>e in t?JR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e1=(t,e,n)=>(eN(t,typeof e!="symbol"?e+"":e,n),n);function tN(t){let e=n=>{var r;for(let i in n)((r=n[i])==null?void 0:r.constructor)===Object&&(n[i]=e(n[i]));return{...n}};return e(t)}var Oe=class{constructor(t){t.constructor===Object?this.store=tN(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,e){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+e)}read(t){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(Oe.warn("read",t),null):this.store[t]}has(t){return this._storeIsProxy?this.store[t]!==void 0:this.store.hasOwnProperty(t)}add(t,e,n=!1){!n&&Object.keys(this.store).includes(t)||(this.store[t]=e,this.notify(t))}pub(t,e){if(!this._storeIsProxy&&!this.store.hasOwnProperty(t)){Oe.warn("publish",t);return}this.store[t]=e,this.notify(t)}multiPub(t){for(let e in t)this.pub(e,t[e])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(e=>{e(this.store[t])})}sub(t,e,n=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(Oe.warn("subscribe",t),null):(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(e),n&&e(this.store[t]),{remove:()=>{this.callbackMap[t].delete(e),this.callbackMap[t].size||delete this.callbackMap[t]},callback:e})}static registerCtx(t,e=Symbol()){let n=Oe.globalStore.get(e);return n?console.warn('State: context UID "'+e+'" already in use'):(n=new Oe(t),Oe.globalStore.set(e,n)),n}static deleteCtx(t){Oe.globalStore.delete(t)}static getCtx(t,e=!0){return Oe.globalStore.get(t)||(e&&console.warn('State: wrong context UID - "'+t+'"'),null)}};Oe.globalStore=new Map;var me=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),kE="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",nN=kE.length-1,iu=class{static generate(t="XXXXXXXXX-XXX"){let e="";for(let n=0;n<t.length;n++)e+=t[n]==="-"?t[n]:kE.charAt(Math.random()*nN);return e}};function PE(t,e,n){let r=!0,i,s=e.split(".");return s.forEach((o,a)=>{a<s.length-1?t=t[o]:i=o}),t?t[i]=n:r=!1,r}function rN(t){return t.split("-").map((e,n)=>e&&n?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,n)=>e&&n?e.toUpperCase():e).join("")}function iN(t,e){[...t.querySelectorAll(`[${me.REPEAT_ATTR}]`)].forEach(n=>{let r=n.getAttribute(me.REPEAT_ITEM_TAG_ATTR),i;if(r&&(i=window.customElements.get(r)),!i){i=class extends e.BaseComponent{constructor(){super(),r||(this.style.display="contents")}};let o=n.innerHTML;i.template=o,i.reg(r)}for(;n.firstChild;)n.firstChild.remove();let s=n.getAttribute(me.REPEAT_ATTR);e.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let a=[...n.children],l,u=d=>{d.forEach((p,g)=>{if(a[g])if(a[g].set$)setTimeout(()=>{a[g].set$(p)});else for(let y in p)a[g][y]=p[y];else{l||(l=new DocumentFragment);let y=new i;Object.assign(y.init$,p),l.appendChild(y)}}),l&&n.appendChild(l);let h=a.slice(d.length,a.length);for(let p of h)p.remove()};if(o.constructor===Array)u(o);else if(o.constructor===Object){let d=[];for(let h in o){let p=o[h];Object.defineProperty(p,"_KEY_",{value:h,enumerable:!0}),d.push(p)}u(d)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(me.REPEAT_ATTR),n.removeAttribute(me.REPEAT_ITEM_TAG_ATTR)})}var Bv="__default__";function sN(t,e){if(e.shadowRoot)return;let n=[...t.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||Bv;r[s]={slot:i,fr:document.createDocumentFragment()}}),e.initChildren.forEach(i=>{var s;let o=Bv;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),(s=r[o])==null||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})}function oN(t,e){[...t.querySelectorAll(`[${me.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(me.EL_REF_ATTR);e.ref[r]=n,n.removeAttribute(me.EL_REF_ATTR)})}function aN(t,e){[...t.querySelectorAll(`[${me.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(me.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=rN(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let o=s.split(":").map(d=>d.trim()),a=o[0],l;a.indexOf(me.ATTR_BIND_PRFX)===0&&(l=!0,a=a.replace(me.ATTR_BIND_PRFX,""));let u=o[1].split(",").map(d=>d.trim());for(let d of u){let h;d.startsWith("!!")?(h="double",d=d.replace("!!","")):d.startsWith("!")&&(h="single",d=d.replace("!","")),e.sub(d,p=>{h==="double"?p=!!p:h==="single"&&(p=!p),l?(p==null?void 0:p.constructor)===Boolean?p?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,p):PE(n,a,p)||(n[me.SET_LATER_KEY]||(n[me.SET_LATER_KEY]=Object.create(null)),n[me.SET_LATER_KEY][a]=p)})}}),n.removeAttribute(me.BIND_ATTR)})}var Ed="{{",Ll="}}",lN="skip-text";function cN(t){let e,n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!((s=i.parentElement)!=null&&s.hasAttribute(lN))&&i.textContent.includes(Ed)&&i.textContent.includes(Ll)&&1}});for(;e=r.nextNode();)n.push(e);return n}var uN=function(t,e){cN(t).forEach(r=>{let i=[],s;for(;r.textContent.includes(Ll);)r.textContent.startsWith(Ed)?(s=r.textContent.indexOf(Ll)+Ll.length,r.splitText(s),i.push(r)):(s=r.textContent.indexOf(Ed),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace(Ed,"").replace(Ll,"");o.textContent="",e.sub(a,l=>{o.textContent=l})})})},dN=[iN,sN,oN,aN,uN],uh="'",va='"',hN=/\\([0-9a-fA-F]{1,6} ?)/g;function fN(t){return(t[0]===va||t[0]===uh)&&(t[t.length-1]===va||t[t.length-1]===uh)}function pN(t){return(t[0]===va||t[0]===uh)&&(t=t.slice(1)),(t[t.length-1]===va||t[t.length-1]===uh)&&(t=t.slice(0,-1)),t}function mN(t){let e="",n="";for(var r=0;r<t.length;r++){const i=t[r+1];t[r]==="\\"&&i==='"'?(e+='\\"',r++):t[r]==='"'&&n!=="\\"?e+='\\"':e+=t[r],n=t[r]}return e}function gN(t){let e=t;fN(t)&&(e=pN(e),e=e.replace(hN,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),e=e.replaceAll(`\\
`,"\\n"),e=mN(e),e=va+e+va);try{return JSON.parse(e)}catch{throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${t}`)}}var Hv=0,bo=null,Mr=null,bi=class extends HTMLElement{constructor(){super(),e1(this,"updateCssData",()=>{var t;this.dropCssDataCache(),(t=this.__boundCssProps)==null||t.forEach(e=>{let n=this.getCssData(this.__extractCssName(e),!0);n!==null&&this.$[e]!==n&&(this.$[e]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return bi}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,(t=this.initCallback)==null||t.call(this))}render(t,e=this.renderShadow){let n;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(me.USE_TPL);if(i){let s=this.getRootNode(),o=(s==null?void 0:s.querySelector(i))||document.querySelector(i);o?t=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(t==null?void 0:t.constructor)===DocumentFragment)n=t;else if((t==null?void 0:t.constructor)===String){let i=document.createElement("template");i.innerHTML=t,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(e&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=iu.generate(),this.style.setProperty(me.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(me.CSS_CTX_PROP,!0)}get ctxName(){var t;let e=((t=this.getAttribute(me.CTX_NAME_ATTR))==null?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=Oe.registerCtx({},this)),this.__localCtx}get nodeCtx(){return Oe.getCtx(this.ctxName,!1)||Oe.registerCtx({},this.ctxName)}static __parseProp(t,e){let n,r;if(t.startsWith(me.EXT_DATA_CTX_PRFX))n=e.nodeCtx,r=t.replace(me.EXT_DATA_CTX_PRFX,"");else if(t.includes(me.NAMED_DATA_CTX_SPLTR)){let i=t.split(me.NAMED_DATA_CTX_SPLTR);n=Oe.getCtx(i[0]),r=i[1]}else n=e.localCtx,r=t;return{ctx:n,name:r}}sub(t,e,n=!0){let r=s=>{this.isConnected&&e(s)},i=bi.__parseProp(t,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(t){let e=bi.__parseProp(t,this);e.ctx.notify(e.name)}has(t){let e=bi.__parseProp(t,this);return e.ctx.has(e.name)}add(t,e,n=!1){let r=bi.__parseProp(t,this);r.ctx.add(r.name,e,n)}add$(t,e=!1){for(let n in t)this.add(n,t[n],e)}get $(){if(!this.__stateProxy){let t=Object.create(null);this.__stateProxy=new Proxy(t,{set:(e,n,r)=>{let i=bi.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(e,n)=>{let r=bi.__parseProp(n,this);return r.ctx.read(r.name)}})}return this.__stateProxy}set$(t,e=!1){for(let n in t){let r=t[n];e||![String,Number,Boolean].includes(r==null?void 0:r.constructor)?this.$[n]=r:this.$[n]!==r&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(me.CTX_OWNER_ATTR)&&this.getAttribute(me.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let e of Object.values(t))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(me.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(me.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(me.NAMED_DATA_CTX_SPLTR)){let n=e.split(me.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=Oe.getCtx(r,!1);s||(s=Oe.registerCtx({},r)),s.add(i,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=(t=this.getAttribute(me.CTX_NAME_ATTR))==null?void 0:t.trim();if(e&&this.style.setProperty(me.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[me.SET_LATER_KEY]){for(let n in this[me.SET_LATER_KEY])PE(this,n,this[me.SET_LATER_KEY][n]);delete this[me.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of dN)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n==null?void 0:n.querySelector(`link[${me.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(me.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);Mr==null||Mr.delete(this.updateCssData),Mr!=null&&Mr.size||(bo==null||bo.disconnect(),bo=null,Mr=null)},100)))}static reg(t,e=!1){t||(Hv++,t=`${me.AUTO_TAG_PRFX}-${Hv}`),this.__tag=t;let n=window.customElements.get(t);if(n){!e&&n!==this&&console.warn([`Element with tag name "${t}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(t,e?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,e,n){var r;if(e===n)return;let i=(r=this.constructor.__attrDesc)==null?void 0:r[t];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[t]=n}getCssData(t,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=gN(n)}catch{!e&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((e,n)=>n===0?"":e).join("--")}__initStyleAttrObserver(){Mr||(Mr=new Set),Mr.add(this.updateCssData),bo||(bo=new MutationObserver(t=>{t[0].type==="attributes"&&Mr.forEach(e=>{e()})}),bo.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let n=this.getCssData(this.__extractCssName(t),!0);n===null&&(n=e),this.add(t,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,e,n){let r="__"+t;this[r]=this[t],Object.defineProperty(this,t,{set:i=>{this[r]=i,n?window.setTimeout(()=>{e==null||e(i)}):e==null||e(i)},get:()=>this[r]}),this[t]=this[r]}static set shadowStyles(t){let e=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(t){if(!this.__rootStylesLink){let e=new Blob([t],{type:"text/css"}),n=URL.createObjectURL(e),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},pf=bi;e1(pf,"template");function RE(t,e){for(let n in e)n.includes("-")?t.style.setProperty(n,e[n]):t.style[n]=e[n]}function yN(t,e){for(let n in e)e[n].constructor===Boolean?e[n]?t.setAttribute(n,""):t.removeAttribute(n):t.setAttribute(n,e[n])}function NE(t={tag:"div"}){let e=document.createElement(t.tag);if(t.attributes&&yN(e,t.attributes),t.styles&&RE(e,t.styles),t.properties)for(let n in t.properties)e[n]=t.properties[n];return t.processors&&t.processors.forEach(n=>{n(e)}),t.children&&t.children.forEach(n=>{let r=NE(n);e.appendChild(r)}),e}var LE="idb-store-ready",vN="symbiote-db",_N="symbiote-idb-update_",wN=class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(LE,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return _N+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,e){this.name=t,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=n=>{this.db=n.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=r=>{this._notifyWhenReady(r)}},this.request.onsuccess=n=>{this.db=n.target.result,this._notifyWhenReady(n)},this.request.onerror=n=>{console.error(n)},this._subscriptionsMap={},this._updateHandler=n=>{n.key===this.name&&this._subscriptionsMap[n.newValue]&&this._subscriptionsMap[n.newValue].forEach(async i=>{i(await this.read(n.newValue))})},this._localUpdateHandler=n=>{this._updateHandler(n.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((r,i)=>{n.onsuccess=s=>{var o;(o=s.target.result)!=null&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${t}"`))},n.onerror=s=>{i(s)}})}write(t,e,n=!1){let r={_key:t,_value:e},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(t),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(t,e=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((i,s)=>{r.onsuccess=o=>{e||this._notifySubscribers(t),i(o)},r.onerror=o=>{s(o)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{e.onsuccess=i=>{let s=i.target.result;n(s.map(o=>o._value))},e.onerror=i=>{r(i)}})}subscribe(t,e){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let n=this._subscriptionsMap[t];return n.add(e),{remove:()=>{n.delete(e),n.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,OE.clear(this.name)}},OE=class{static get readyEventName(){return LE}static open(t=vN,e="store"){let n=t+"/"+e;return this._reg[n]||(this._reg[n]=new wN(t,e)),this._reg[n]}static clear(t){window.indexedDB.deleteDatabase(t);for(let e in this._reg)e.split("/")[0]===t&&delete this._reg[e]}};e1(OE,"_reg",Object.create(null));const t1="blocks",n1="0.46.3",ME=t=>{if(typeof t!="string"||!t)return"";let e=t.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},r1=(...t)=>t.filter(e=>typeof e=="string"&&e).map(e=>ME(e)).join("/-/"),ts=(...t)=>{let e=r1(...t);return e?`-/${e}/`:""};function i1(t){let e=new URL(t),n=e.pathname+e.search+e.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function DE(t){let e=new URL(t),{pathname:n}=e;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}function VE(t){let e=UE(t),n=new URL(e),r=n.pathname.indexOf("/-/");return r===-1?"":n.pathname.substring(r).slice(1)}function EN(t){return VE(t).split("/-/").filter(Boolean).map(n=>ME(n))}function UE(t){let e=new URL(t),n=i1(t),r=FE(n)?$E(n).pathname:n;return e.pathname=e.pathname.replace(r,""),e.search="",e.hash="",e.toString()}function FE(t){return t.startsWith("http")}function $E(t){let e=new URL(t);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const On=(t,e,n)=>{let r=new URL(UE(t));if(n=n||i1(t),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),FE(n)){let i=$E(n);r.pathname=r.pathname+(e||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(e||"")+(n||"");return r.toString()},Lc=(t,e)=>{let n=new URL(t);return n.pathname=e+"/",n.toString()},ns=(t,e=",")=>t.trim().split(e).map(n=>n.trim()).filter(n=>n.length>0),kn=Object.freeze({brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0,mirror:!1,flip:!1,crop:void 0}),jE=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function bN(t,e){if(typeof e=="number"){const n=e;return kn[t]!==n?`${t}/${n}`:""}if(typeof e=="boolean"){const n=e;return kn[t]!==n?`${t}`:""}if(t==="filter"&&e){const{name:n,amount:r}=e;return kn.filter===r?"":`${t}/${n}/${r}`}if(t==="crop"&&e){let{dimensions:n,coords:r}=e;return`${t}/${n.join("x")}/${r.join(",")}`}return""}function mf(t){return r1(...jE.filter(e=>typeof t[e]<"u"&&t[e]!==null).map(e=>{let n=t[e];return bN(e,n)}).filter(e=>!!e))}const zE=r1("format/auto","progressive/yes"),Dr=([t])=>typeof t<"u"?Number(t):void 0,Wv=()=>!0,TN=([t,e])=>({name:t,amount:typeof e<"u"?Number(e):100}),CN=([t,e])=>{if(!/\d+x\d+/.test(t)||!/\d+,\d+/.test(e))throw new Error("Crop by aspect ratio, percentage or alignment shortcuts is not supported.");return{dimensions:ns(t,"x").map(Number),coords:ns(e).map(Number)}},IN=Object.freeze({enhance:Dr,brightness:Dr,exposure:Dr,gamma:Dr,contrast:Dr,saturation:Dr,vibrance:Dr,warmth:Dr,filter:TN,mirror:Wv,flip:Wv,rotate:Dr,crop:CN});function SN(t){const e={};for(const n of t){const[r,...i]=n.split("/");if(!jE.includes(r))continue;const s=r,o=IN[s];try{const a=o(i);e[s]=a}catch(a){console.warn([`Failed to parse URL operation "${n}". It will be ignored.`,a instanceof Error?`Error message: "${a.message}"`:a,"If you need this functionality, please feel free to open an issue at https://github.com/uploadcare/blocks/issues/new"].join(`
`))}}return e}const lt=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),Tr=[lt.CROP,lt.TUNING,lt.FILTERS],AN=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],xN=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],kN=["rotate","mirror","flip"],_a=Object.freeze({brightness:{zero:kn.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:kn.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:kn.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:kn.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:kn.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:kn.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:kn.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:kn.enhance,range:[0,100],keypointsNumber:1},filter:{zero:kn.filter,range:[0,100],keypointsNumber:1}}),PN=t=>t?t.split(",").map(e=>e.trim()):[],s1=t=>t?t.join(","):"",RN="https://ucarecdn.com",NN="https://upload.uploadcare.com",LN="https://social.uploadcare.com",Gi={pubkey:"",multiple:!0,multipleMin:0,multipleMax:Number.MAX_SAFE_INTEGER,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,cameraCapture:"",sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:s1(Tr),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",imageShrink:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:RN,baseUrl:NN,socialBaseUrl:LN,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",debug:!1,metadata:null,localeName:"en",localeDefinitionOverride:null,secureUploadsExpireThreshold:10*60*1e3,secureUploadsSignatureResolver:null,secureDeliveryProxyUrlResolver:null,iconHrefResolver:null,fileValidators:[],collectionValidators:[]},ON=20,at=Object.freeze({FILE_ADDED:"file-added",FILE_REMOVED:"file-removed",FILE_UPLOAD_START:"file-upload-start",FILE_UPLOAD_PROGRESS:"file-upload-progress",FILE_UPLOAD_SUCCESS:"file-upload-success",FILE_UPLOAD_FAILED:"file-upload-failed",FILE_URL_CHANGED:"file-url-changed",MODAL_OPEN:"modal-open",MODAL_CLOSE:"modal-close",DONE_CLICK:"done-click",UPLOAD_CLICK:"upload-click",ACTIVITY_CHANGE:"activity-change",COMMON_UPLOAD_START:"common-upload-start",COMMON_UPLOAD_PROGRESS:"common-upload-progress",COMMON_UPLOAD_SUCCESS:"common-upload-success",COMMON_UPLOAD_FAILED:"common-upload-failed",CHANGE:"change",GROUP_CREATED:"group-created"});class MN{constructor(e){U(this,"_timeoutStore",new Map);U(this,"_targets",new Set);U(this,"_debugPrint",null);this._debugPrint=e}bindTarget(e){this._targets.add(e)}unbindTarget(e){this._targets.delete(e)}_dispatch(e,n){var r;for(const i of this._targets)i.dispatchEvent(new CustomEvent(e,{detail:n}));(r=this._debugPrint)==null||r.call(this,()=>{const i=n&&typeof n=="object"?{...n}:n;return[`event "${e}"`,i]})}emit(e,n,{debounce:r}={}){if(typeof r!="number"&&!r){this._dispatch(e,typeof n=="function"?n():n);return}this._timeoutStore.has(e)&&window.clearTimeout(this._timeoutStore.get(e));const i=typeof r=="number"?r:ON,s=window.setTimeout(()=>{this._dispatch(e,typeof n=="function"?n():n),this._timeoutStore.delete(e)},i);this._timeoutStore.set(e,s)}}function $n(t,e){let n;const r=(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),e)};return r.cancel=()=>{clearTimeout(n)},r}const qv="--uploadcare-blocks-window-height";class dh{static registerClient(e){this.clientsRegistry.size===0&&this.attachTracker(),this.clientsRegistry.add(e)}static unregisterClient(e){this.clientsRegistry.delete(e),this.clientsRegistry.size===0&&this.detachTracker()}static attachTracker(){window.addEventListener("resize",this.flush,{passive:!0,capture:!0}),this.flush()}static detachTracker(){window.removeEventListener("resize",this.flush,{capture:!0}),document.documentElement.style.removeProperty(qv)}}U(dh,"clientsRegistry",new Set),U(dh,"flush",$n(()=>{document.documentElement.style.setProperty(qv,`${window.innerHeight}px`)},100));const DN=t=>{var r;const e=new Intl.Locale(t);let n="ltr";return typeof e.getTextInfo=="function"&&e.getTextInfo().direction?n=e.getTextInfo().direction:"textInfo"in e&&((r=e.textInfo)!=null&&r.direction)&&(n=e.textInfo.direction),n},BE=(t,e)=>new Intl.PluralRules(t).select(e),VN=t=>t,Y0="{{",HE="}}",Gv="plural:";function Z0(t,e,n={}){var o;let{openToken:r=Y0,closeToken:i=HE,transform:s=VN}=n;for(let a in e){let l=(o=e[a])==null?void 0:o.toString();t=t.replaceAll(r+a+i,typeof l=="string"?s(l):l)}return t}function UN(t){const e=[];let n=t.indexOf(Y0);for(;n!==-1;){const r=t.indexOf(HE,n),i=t.substring(n+2,r);if(i.startsWith(Gv)){const s=t.substring(n+2,r).replace(Gv,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));e.push({variable:i,pluralKey:o,countVariable:a})}n=t.indexOf(Y0,r)}return e}const FN=({element:t,attribute:e,onSuccess:n,onTimeout:r,timeout:i=300})=>{const s=t.getAttribute(e);if(s!==null){n(s);return}const o=new MutationObserver(u=>{const d=u[u.length-1];l(d)});o.observe(t,{attributes:!0,attributeFilter:[e]});const a=setTimeout(()=>{o.disconnect(),r()},i),l=u=>{const d=t.getAttribute(e);u.type==="attributes"&&u.attributeName===e&&d!==null&&(clearTimeout(a),o.disconnect(),n(d))}};function Kv(t){return Object.prototype.toString.call(t)==="[object Object]"}const $N=/\W|_/g;function jN(t){return t.split($N).map((e,n)=>e.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function Qv(t,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(t)?t.map(n=>li(n,{ignoreKeys:e})):t}function li(t,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(t))return Qv(t,{ignoreKeys:e});if(!Kv(t))return t;const n={};for(const r of Object.keys(t)){let i=t[r];if(e.includes(r)){n[r]=i;continue}Kv(i)?i=li(i,{ignoreKeys:e}):Array.isArray(i)&&(i=Qv(i,{ignoreKeys:e})),n[jN(r)]=i}return n}const zN=t=>new Promise(e=>setTimeout(e,t));function WE({libraryName:t,libraryVersion:e,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";if(typeof n=="string")return n;if(typeof n=="function")return n({publicKey:r,libraryName:t,libraryVersion:e,languageName:s,integration:i});const o=[t,e,r].filter(Boolean).join("/"),a=[s,i].filter(Boolean).join("; ");return`${o} (${a})`}const BN={factor:2,time:100};function HN(t,e=BN){let n=0;function r(i){const s=Math.round(e.time*e.factor**n);return i({attempt:n,retry:a=>zN(a??s).then(()=>(n+=1,r(i)))})}return r(t)}class o1 extends Error{}class su extends o1{constructor(n){super();U(this,"originalProgressEvent");this.name="NetworkError",this.message="Network error",Object.setPrototypeOf(this,su.prototype),this.originalProgressEvent=n}}const gf=(t,e)=>{t&&(t.aborted?Promise.resolve().then(e):t.addEventListener("abort",()=>e(),{once:!0}))};class Js extends o1{constructor(n="Request canceled"){super(n);U(this,"isCancel",!0);this.name="CancelError",Object.setPrototypeOf(this,Js.prototype)}}const WN=500,qE=({check:t,interval:e=WN,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;gf(r,()=>{o&&clearTimeout(o),s(new Js("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new Js("Timed out"))},n));const l=()=>{try{Promise.resolve(t(r)).then(u=>{u?(a&&clearTimeout(a),i(u)):o=setTimeout(l,e)}).catch(u=>{a&&clearTimeout(a),s(u)})}catch(u){a&&clearTimeout(a),s(u)}};o=setTimeout(l,0)}),Ae={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:50*1024*1024,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,multipartMinLastPartSize:1024*1024,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},yf="application/octet-stream",GE="original",hs=({method:t,url:e,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,u=(t==null?void 0:t.toUpperCase())||"GET";let d=!1;l.open(u,e,!0),r&&Object.entries(r).forEach(h=>{const[p,g]=h;typeof g<"u"&&!Array.isArray(g)&&l.setRequestHeader(p,g)}),l.responseType="text",gf(i,()=>{d=!0,l.abort(),a(new Js)}),l.onload=()=>{if(l.status!=200)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const h={method:u,url:e,data:n,headers:r||void 0,signal:i,onProgress:s},p=l.getAllResponseHeaders().trim().split(/[\r\n]+/),g={};p.forEach(function(P){const C=P.split(": "),v=C.shift(),S=C.join(": ");v&&typeof v<"u"&&(g[v]=S)});const y=l.response,I=l.status;o({request:h,data:y,headers:g,status:I})}},l.onerror=h=>{d||a(new su(h))},s&&typeof s=="function"&&(l.upload.onprogress=h=>{h.lengthComputable?s({isComputable:!0,value:h.loaded/h.total}):s({isComputable:!1})}),n?l.send(n):l.send()});function qN(t,...e){return t}const GN=({name:t})=>t?[t]:[],KN=qN;var QN=()=>new FormData;const KE=t=>!1,vf=t=>typeof Blob<"u"&&t instanceof Blob,_f=t=>typeof File<"u"&&t instanceof File,wf=t=>!!t&&typeof t=="object"&&!Array.isArray(t)&&"uri"in t&&typeof t.uri=="string",Da=t=>vf(t)||_f(t)||KE()||wf(t),XN=t=>typeof t=="string"||typeof t=="number"||typeof t>"u",YN=t=>!!t&&typeof t=="object"&&!Array.isArray(t),ZN=t=>!!t&&typeof t=="object"&&"data"in t&&Da(t.data);function QE(t,e,n){if(Array.isArray(n))for(const r of n)QE(t,`${e}[]`,r);else if(ZN(n)){const{name:r,contentType:i}=n,s=KN(n.data,r,i??yf),o=GN({name:r,contentType:i});t.push([e,s,...o])}else if(YN(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&t.push([`${e}[${r}]`,String(i)]);else XN(n)&&n&&t.push([e,n.toString()])}function JN(t){const e=[];for(const[n,r]of Object.entries(t))QE(e,n,r);return e}function Ef(t){const e=QN(),n=JN(t);for(const r of n){const[i,s,...o]=r;e.append(i,s,...o)}return e}class hn extends o1{constructor(n,r,i,s,o){super();U(this,"code");U(this,"request");U(this,"response");U(this,"headers");this.name="UploadError",this.message=n,this.code=r,this.request=i,this.response=s,this.headers=o,Object.setPrototypeOf(this,hn.prototype)}}const eL=t=>{const e=new URLSearchParams;for(const[n,r]of Object.entries(t))r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>e.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{e.append(`${n}[]`,i)}):typeof r=="string"&&r?e.set(n,r):typeof r=="number"&&e.set(n,r.toString());return e.toString()},ri=(t,e,n)=>{const r=new URL(t);return r.pathname=(r.pathname+e).replace("//","/"),n&&(r.search=eL(n)),r.toString()};var tL="6.14.1";const nL="UploadcareUploadClient",rL=tL;function ao(t){return WE({libraryName:nL,libraryVersion:rL,...t})}const iL="RequestThrottledError",Xv=15e3,sL=1e3;function oL(t){const{headers:e}=t||{};if(!e||typeof e["retry-after"]!="string")return Xv;const n=parseInt(e["retry-after"],10);return Number.isFinite(n)?n*1e3:Xv}function fs(t,e){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=e;return HN(({attempt:i,retry:s})=>t().catch(o=>{if("response"in o&&(o==null?void 0:o.code)===iL&&i<n)return s(oL(o));if(o instanceof su&&i<r)return s((i+1)*sL);throw o}))}const XE=t=>{let e="";return(vf(t)||_f(t)||wf(t))&&(e=t.type),e||yf},YE=t=>{let e="";return _f(t)&&t.name?e=t.name:vf(t)||KE()?e="":wf(t)&&t.name&&(e=t.name),e||GE};function a1(t){return typeof t>"u"||t==="auto"?"auto":t?"1":"0"}function aL(t,{publicKey:e,fileName:n,contentType:r,baseURL:i=Ae.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:u,source:d="local",integration:h,userAgent:p,retryThrottledRequestMaxTimes:g=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:y=Ae.retryNetworkErrorMaxTimes,metadata:I}){return fs(()=>hs({method:"POST",url:ri(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":ao({publicKey:e,integration:h,userAgent:p})},data:Ef({file:{data:t,name:n||YE(t),contentType:r||XE(t)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:a1(a),signature:s,expire:o,source:d,metadata:I}),signal:l,onProgress:u}).then(({data:P,headers:C,request:v})=>{const S=li(JSON.parse(P));if("error"in S)throw new hn(S.error.content,S.error.errorCode,v,S,C);return S}),{retryNetworkErrorMaxTimes:y,retryThrottledRequestMaxTimes:g})}var J0;(function(t){t.Token="token",t.FileInfo="file_info"})(J0||(J0={}));function lL(t,{publicKey:e,baseURL:n=Ae.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:u="url",signal:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:y=Ae.retryNetworkErrorMaxTimes,metadata:I}){return fs(()=>hs({method:"POST",headers:{"X-UC-User-Agent":ao({publicKey:e,integration:h,userAgent:p})},url:ri(n,"/from_url/",{jsonerrors:1,pub_key:e,source_url:t,store:a1(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:u,metadata:I}),signal:d}).then(({data:P,headers:C,request:v})=>{const S=li(JSON.parse(P));if("error"in S)throw new hn(S.error.content,S.error.errorCode,v,S,C);return S}),{retryNetworkErrorMaxTimes:y,retryThrottledRequestMaxTimes:g})}var an;(function(t){t.Unknown="unknown",t.Waiting="waiting",t.Progress="progress",t.Error="error",t.Success="success"})(an||(an={}));const cL=t=>"status"in t&&t.status===an.Error;function uL(t,{publicKey:e,baseURL:n=Ae.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=Ae.retryNetworkErrorMaxTimes}={}){return fs(()=>hs({method:"GET",headers:e?{"X-UC-User-Agent":ao({publicKey:e,integration:i,userAgent:s})}:void 0,url:ri(n,"/from_url/status/",{jsonerrors:1,token:t}),signal:r}).then(({data:l,headers:u,request:d})=>{const h=li(JSON.parse(l));if("error"in h&&!cL(h))throw new hn(h.error.content,h.error.errorCode,d,h,u);return h}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function dL(t,{publicKey:e,baseURL:n=Ae.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:u,retryThrottledRequestMaxTimes:d=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:h=Ae.retryNetworkErrorMaxTimes}){return fs(()=>hs({method:"POST",headers:{"X-UC-User-Agent":ao({publicKey:e,integration:l,userAgent:u})},url:ri(n,"/group/",{jsonerrors:1}),data:Ef({files:t,callback:r,pub_key:e,signature:i,expire:s,source:a}),signal:o}).then(({data:p,headers:g,request:y})=>{const I=li(JSON.parse(p));if("error"in I)throw new hn(I.error.content,I.error.errorCode,y,I,g);return I}),{retryNetworkErrorMaxTimes:h,retryThrottledRequestMaxTimes:d})}function ZE(t,{publicKey:e,baseURL:n=Ae.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Ae.retryNetworkErrorMaxTimes}){return fs(()=>hs({method:"GET",headers:{"X-UC-User-Agent":ao({publicKey:e,integration:s,userAgent:o})},url:ri(n,"/info/",{jsonerrors:1,pub_key:e,file_id:t,source:i}),signal:r}).then(({data:u,headers:d,request:h})=>{const p=li(JSON.parse(u));if("error"in p)throw new hn(p.error.content,p.error.errorCode,h,p,d);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function hL(t,{publicKey:e,contentType:n,fileName:r,multipartChunkSize:i=Ae.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:u,source:d="local",integration:h,userAgent:p,retryThrottledRequestMaxTimes:g=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:y=Ae.retryNetworkErrorMaxTimes,metadata:I}){return fs(()=>hs({method:"POST",url:ri(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":ao({publicKey:e,integration:h,userAgent:p})},data:Ef({filename:r||GE,size:t,content_type:n||yf,part_size:i,UPLOADCARE_STORE:a1(l),UPLOADCARE_PUB_KEY:e,signature:o,expire:a,source:d,metadata:I}),signal:u}).then(({data:P,headers:C,request:v})=>{const S=li(JSON.parse(P));if("error"in S)throw new hn(S.error.content,S.error.errorCode,v,S,C);return S.parts=Object.keys(S.parts).map(D=>S.parts[Number(D)]),S}),{retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y})}function fL(t,e,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=Ae.retryNetworkErrorMaxTimes}){return fs(()=>hs({method:"PUT",url:e,data:t,onProgress:i,signal:r,headers:{"Content-Type":n||yf}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}function pL(t,{publicKey:e,baseURL:n=Ae.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=Ae.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Ae.retryNetworkErrorMaxTimes}){return fs(()=>hs({method:"POST",url:ri(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":ao({publicKey:e,integration:s,userAgent:o})},data:Ef({uuid:t,UPLOADCARE_PUB_KEY:e,source:r}),signal:i}).then(({data:u,headers:d,request:h})=>{const p=li(JSON.parse(u));if("error"in p)throw new hn(p.error.content,p.error.errorCode,h,p,d);return p}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function l1(t,{publicKey:e,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:u}){return qE({check:d=>ZE(t,{publicKey:e,baseURL:n,signal:d,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(h=>h.isReady?h:(u&&u({isComputable:!0,value:1}),!1)),signal:l})}function mL(t){return"defaultEffects"in t}class Va{constructor(e,{baseCDN:n=Ae.baseCDN,fileName:r}={}){U(this,"uuid");U(this,"name",null);U(this,"size",null);U(this,"isStored",null);U(this,"isImage",null);U(this,"mimeType",null);U(this,"cdnUrl",null);U(this,"s3Url",null);U(this,"originalFilename",null);U(this,"imageInfo",null);U(this,"videoInfo",null);U(this,"contentInfo",null);U(this,"metadata",null);U(this,"s3Bucket",null);U(this,"defaultEffects",null);const{uuid:i,s3Bucket:s}=e,o=ri(n,`${i}/`),a=s?ri(`https://${s}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=o,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=s||null,this.s3Url=a,mL(e)&&(this.defaultEffects=e.defaultEffects)}}const gL=(t,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:u,source:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,baseCDN:I,metadata:P})=>aL(t,{publicKey:e,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:u,source:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,metadata:P}).then(({file:C})=>l1(C,{publicKey:e,baseURL:r,source:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,onProgress:u,signal:l})).then(C=>new Va(C,{baseCDN:I})),yL=(t,{publicKey:e,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:d,baseCDN:h})=>ZE(t,{publicKey:e,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:d}).then(p=>new Va(p,{baseCDN:h,fileName:n})).then(p=>(s&&s({isComputable:!0,value:1}),p)),vL=(t,{signal:e}={})=>{let n=null,r=null;const i=t.map(()=>new AbortController),s=o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())};return gf(e,()=>{i.forEach(o=>o.abort())}),Promise.all(t.map((o,a)=>{const l=s(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(u=>(l(),u)).catch(u=>(n=u,null))})).then(o=>{if(r===null)throw n;return o[r]})};var _L=window.WebSocket;class wL{constructor(){U(this,"events",Object.create({}))}emit(e,n){var r;(r=this.events[e])==null||r.forEach(i=>i(n))}on(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)}off(e,n){n?this.events[e]=this.events[e].filter(r=>r!==n):this.events[e]=[]}}const EL=(t,e)=>t==="success"?{status:an.Success,...e}:t==="progress"?{status:an.Progress,...e}:{status:an.Error,...e};class bL{constructor(e,n=3e4){U(this,"key");U(this,"disconnectTime");U(this,"ws");U(this,"queue",[]);U(this,"isConnected",!1);U(this,"subscribers",0);U(this,"emmitter",new wL);U(this,"disconnectTimeoutId",null);this.key=e,this.disconnectTime=n}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new _L(e),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(r.channel,EL(r.event,JSON.parse(r.data)))}})}}disconnect(){const e=()=>{var n;(n=this.ws)==null||n.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,n){var i;const r=JSON.stringify({event:e,data:n});(i=this.ws)==null||i.send(r)}subscribe(e,n){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const n=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),this.subscribers===0&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let Ep=null;const c1=t=>{if(!Ep){const e=typeof window>"u"?0:3e4;Ep=new bL(t,e)}return Ep},TL=t=>{c1(t).connect()};function CL({token:t,publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return qE({check:u=>uL(t,{publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:u}).then(d=>{switch(d.status){case an.Error:return new hn(d.error,d.errorCode);case an.Waiting:return!1;case an.Unknown:return new hn(`Token "${t}" was not found.`);case an.Progress:return a&&(d.total==="unknown"?a({isComputable:!1}):a({isComputable:!0,value:d.done/d.total})),!1;case an.Success:return a&&a({isComputable:!0,value:d.done/d.total}),d;default:throw new Error("Unknown status")}}),signal:l})}const IL=({token:t,pusherKey:e,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=c1(e),a=o.onError(s),l=()=>{a(),o.unsubscribe(t)};gf(n,()=>{l(),s(new Js("pusher cancelled"))}),o.subscribe(t,u=>{switch(u.status){case an.Progress:{r&&(u.total==="unknown"?r({isComputable:!1}):r({isComputable:!0,value:u.done/u.total}));break}case an.Success:{l(),r&&r({isComputable:!0,value:u.done/u.total}),i(u);break}case an.Error:l(),s(new hn(u.msg,u.error_code))}})}),SL=(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:d,onProgress:h,source:p,integration:g,userAgent:y,retryThrottledRequestMaxTimes:I,pusherKey:P=Ae.pusherKey,metadata:C})=>Promise.resolve(TL(P)).then(()=>lL(t,{publicKey:e,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:d,source:p,integration:g,userAgent:y,retryThrottledRequestMaxTimes:I,metadata:C})).catch(v=>{const S=c1(P);return S==null||S.disconnect(),Promise.reject(v)}).then(v=>v.type===J0.FileInfo?v:vL([({signal:S})=>CL({token:v.token,publicKey:e,baseURL:r,integration:g,userAgent:y,retryThrottledRequestMaxTimes:I,onProgress:h,signal:S}),({signal:S})=>IL({token:v.token,pusherKey:P,signal:S,onProgress:h})],{signal:d})).then(v=>{if(v instanceof hn)throw v;return v}).then(v=>l1(v.uuid,{publicKey:e,baseURL:r,integration:g,userAgent:y,retryThrottledRequestMaxTimes:I,onProgress:h,signal:d})).then(v=>new Va(v,{baseCDN:i})),bp=new WeakMap,AL=async t=>{if(bp.has(t))return bp.get(t);const e=await fetch(t.uri).then(n=>n.blob());return bp.set(t,e),e},JE=async t=>{if(_f(t)||vf(t))return t.size;if(wf(t))return(await AL(t)).size;throw new Error("Unknown file type. Cannot determine file size.")},xL=(t,e=Ae.multipartMinFileSize)=>t>=e,eb=t=>{const e="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",n=new RegExp(e);return!Da(t)&&n.test(t)},u1=t=>{const e="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",n=new RegExp(e);return!Da(t)&&n.test(t)},kL=(t,e)=>new Promise((n,r)=>{const i=[];let s=!1,o=e.length;const a=[...e],l=()=>{const u=e.length-a.length,d=a.shift();d&&d().then(h=>{s||(i[u]=h,o-=1,o?l():n(i))}).catch(h=>{s=!0,r(h)})};for(let u=0;u<t;u++)l()}),PL=(t,e,n,r)=>{const i=r*e,s=Math.min(i+r,n);return t.slice(i,s)},RL=async(t,e,n)=>r=>PL(t,r,e,n),NL=(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>fL(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}),LL=async(t,{publicKey:e,fileName:n,fileSize:r,baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:u,source:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,contentType:I,multipartChunkSize:P=Ae.multipartChunkSize,maxConcurrentRequests:C=Ae.maxConcurrentRequests,baseCDN:v,metadata:S})=>{const D=r??await JE(t);let z;const R=(T,_)=>{if(!u)return;z||(z=Array(T).fill(0));const b=A=>A.reduce((k,L)=>k+L,0);return A=>{A.isComputable&&(z[_]=A.value,u({isComputable:!0,value:b(z)/T}))}};return I||(I=XE(t)),hL(D,{publicKey:e,contentType:I,fileName:n||YE(t),baseURL:i,secureSignature:s,secureExpire:o,store:a,signal:l,source:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,metadata:S}).then(async({uuid:T,parts:_})=>{const b=await RL(t,D,P);return Promise.all([T,kL(C,_.map((A,k)=>()=>NL(b(k),A,{publicKey:e,contentType:I,onProgress:R(_.length,k),signal:l,integration:h,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y})))])}).then(([T])=>pL(T,{publicKey:e,baseURL:i,source:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y})).then(T=>T.isReady?T:l1(T.uuid,{publicKey:e,baseURL:i,source:d,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,retryNetworkErrorMaxTimes:y,onProgress:u,signal:l})).then(T=>new Va(T,{baseCDN:v}))};async function tb(t,{publicKey:e,fileName:n,baseURL:r=Ae.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:y,multipartMinFileSize:I,multipartChunkSize:P,maxConcurrentRequests:C,baseCDN:v=Ae.baseCDN,checkForUrlDuplicates:S,saveUrlForRecurrentUploads:D,pusherKey:z,metadata:R}){if(Da(t)){const T=await JE(t);return xL(T,I)?LL(t,{publicKey:e,contentType:y,multipartChunkSize:P,fileSize:T,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:d,userAgent:h,maxConcurrentRequests:C,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,baseCDN:v,metadata:R}):gL(t,{publicKey:e,fileName:n,contentType:y,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,baseCDN:v,metadata:R})}if(u1(t))return SL(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:v,checkForUrlDuplicates:S,saveUrlForRecurrentUploads:D,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,pusherKey:z,metadata:R});if(eb(t))return yL(t,{publicKey:e,fileName:n,baseURL:r,signal:a,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,baseCDN:v});throw new TypeError(`File uploading from "${t}" is not supported`)}class OL{constructor(e,{baseCDN:n=Ae.baseCDN}={}){U(this,"uuid");U(this,"filesCount");U(this,"totalSize");U(this,"isStored");U(this,"isImage");U(this,"cdnUrl");U(this,"files");U(this,"createdAt");U(this,"storedAt",null);this.uuid=e.id,this.filesCount=e.filesCount;const r=e.files.filter(Boolean);this.totalSize=Object.values(r).reduce((i,s)=>i+s.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(r).filter(i=>i.isImage).length,this.cdnUrl=e.cdnUrl,this.files=r.map(i=>new Va(i,{baseCDN:n})),this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const ML=t=>{for(const e of t)if(!Da(e))return!1;return!0},DL=t=>{for(const e of t)if(!eb(e))return!1;return!0},VL=t=>{for(const e of t)if(!u1(e))return!1;return!0};function UL(t,{publicKey:e,fileName:n,baseURL:r=Ae.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:y,multipartChunkSize:I=Ae.multipartChunkSize,baseCDN:P=Ae.baseCDN,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:v,jsonpCallback:S}){if(!ML(t)&&!VL(t)&&!DL(t))throw new TypeError(`Group uploading from "${t}" is not supported`);let D,z=!0;const R=t.length,T=(_,b)=>{if(!l)return;D||(D=Array(_).fill(0));const A=k=>k.reduce((L,x)=>L+x)/_;return k=>{if(!k.isComputable||!z){z=!1,l({isComputable:!1});return}D[b]=k.value,l({isComputable:!0,value:A(D)})}};return Promise.all(t.map((_,b)=>Da(_)||u1(_)?tb(_,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:T(R,b),source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:y,multipartChunkSize:I,baseCDN:P,checkForUrlDuplicates:C,saveUrlForRecurrentUploads:v}).then(A=>A.uuid):_)).then(_=>dL(_,{publicKey:e,baseURL:r,jsonpCallback:S,secureSignature:i,secureExpire:s,signal:a,source:u,integration:d,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g}).then(b=>new OL(b,{baseCDN:P})).then(b=>(l&&l({isComputable:!0,value:1}),b)))}class FL{constructor(e){U(this,"_concurrency",1);U(this,"_pending",[]);U(this,"_running",0);U(this,"_resolvers",new Map);U(this,"_rejectors",new Map);this._concurrency=e}_run(){const e=this._concurrency-this._running;for(let n=0;n<e;n++){const r=this._pending.shift();if(!r)return;const i=this._resolvers.get(r),s=this._rejectors.get(r);if(!i||!s)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,r().finally(()=>{this._resolvers.delete(r),this._rejectors.delete(r),this._running-=1,this._run()}).then(o=>i(o)).catch(o=>s(o))}}add(e){return new Promise((n,r)=>{this._resolvers.set(e,n),this._rejectors.set(e,r),this._pending.push(e),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(e){this._concurrency=e,this._run()}get concurrency(){return this._concurrency}}const nb=()=>({}),rb=t=>({...nb(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{t.set$({"*modalActive":!1,"*currentActivity":""})}}),ib=t=>({...rb(t),"*commonProgress":0,"*uploadList":[],"*focusedEntry":null,"*uploadQueue":new FL(1),"*uploadCollection":null,"*collectionErrors":[],"*collectionState":null,"*groupInfo":null,"*uploadTrigger":new Set,"*secureUploadsManager":null}),d1={"locale-id":"en","social-source-lang":"en","upload-file":"Upload file","upload-files":"Upload files","choose-file":"Choose file","choose-files":"Choose files","drop-files-here":"Drop files here","select-file-source":"Select file source",selected:"Selected",upload:"Upload","add-more":"Add more",cancel:"Cancel","start-from-cancel":"Cancel",clear:"Clear","camera-shot":"Shot","upload-url":"Import","upload-url-placeholder":"Paste link here","edit-image":"Edit image","edit-detail":"Details",back:"Back",done:"Done",ok:"Ok","remove-from-list":"Remove",no:"No",yes:"Yes","confirm-your-action":"Confirm your action","are-you-sure":"Are you sure?","selected-count":"Selected:","upload-error":"Upload error","validation-error":"Validation error","no-files":"No files selected",browse:"Browse","not-uploaded-yet":"Not uploaded yet...",file__one:"file",file__other:"files",error__one:"error",error__other:"errors","header-uploading":"Uploading {{count}} {{plural:file(count)}}","header-failed":"{{count}} {{plural:error(count)}}","header-succeed":"{{count}} {{plural:file(count)}} uploaded","header-total":"{{count}} {{plural:file(count)}} selected","src-type-local":"From device","src-type-from-url":"From link","src-type-camera":"Camera","src-type-draw":"Draw","src-type-facebook":"Facebook","src-type-dropbox":"Dropbox","src-type-gdrive":"Google Drive","src-type-gphotos":"Google Photos","src-type-instagram":"Instagram","src-type-flickr":"Flickr","src-type-vk":"VK","src-type-evernote":"Evernote","src-type-box":"Box","src-type-onedrive":"Onedrive","src-type-huddle":"Huddle","src-type-other":"Other","caption-from-url":"Import from link","caption-camera":"Camera","caption-draw":"Draw","caption-edit-file":"Edit file","file-no-name":"No name...","toggle-fullscreen":"Toggle fullscreen","toggle-guides":"Toggle guides",rotate:"Rotate","flip-vertical":"Flip vertical","flip-horizontal":"Flip horizontal",apply:"Apply",brightness:"Brightness",contrast:"Contrast",saturation:"Saturation",exposure:"Exposure",gamma:"Gamma",vibrance:"Vibrance",warmth:"Warmth",enhance:"Enhance",original:"Original",resize:"Resize image",crop:"Crop","select-color":"Select color",text:"Text",draw:"Draw","cancel-edit":"Cancel edit","tab-view":"Preview","tab-details":"Details","file-name":"Name","file-size":"Size","cdn-url":"CDN URL","file-size-unknown":"Unknown","camera-permissions-denied":"Camera access denied","camera-permissions-prompt":"Please allow access to the camera","camera-permissions-request":"Request access","files-count-limit-error-title":"Files count limit overflow","files-count-limit-error-too-few":"You’ve chosen {{total}} {{plural:file(total)}}. At least {{min}} {{plural:file(min)}} required.","files-count-limit-error-too-many":"You’ve chosen too many files. {{max}} {{plural:file(max)}} is maximum.","files-max-size-limit-error":"File is too big. Max file size is {{maxFileSize}}.","has-validation-errors":"File validation error ocurred. Please, check your files before upload.","images-only-accepted":"Only image files are accepted.","file-type-not-allowed":"Uploading of these file types is not allowed.","some-files-were-not-uploaded":"Some files were not uploaded.","file-item-edit-button":"Edit button","file-item-remove-button":"Remove button"},hh=new Map,em=new Map,sb=(t,e)=>{hh.has(t)&&console.log(`Locale ${t} is already defined. Overwriting...`),hh.set(t,{...d1,...e})},$L=(t,e)=>{em.set(t,e)},ob=(t,e)=>{typeof e=="function"?$L(t,e):sb(t,e)},jL=async t=>{if(!hh.has(t)){if(!em.has(t))throw new Error(`Locale ${t} is not defined`);const n=await em.get(t)();sb(t,n)}return hh.get(t)};ob("en",d1);const Us=t=>`*l10n/${t}`,zL="en";class BL{constructor(e){U(this,"_blockInstance",null);U(this,"_localeName","");U(this,"_callbacks",new Set);U(this,"_boundBlocks",new Map);this._blockInstance=e;for(let[n,r]of Object.entries(d1))this._blockInstance.add(Us(n),r,!1);setTimeout(()=>{e.subConfigValue("localeName",async n=>{var s;if(!this._blockInstance||!n)return;this._localeName=n;const r=await jL(n);if(n!==zL&&this._localeName!==n)return;const i=(s=this._blockInstance.cfg.localeDefinitionOverride)==null?void 0:s[n];for(const[o,a]of Object.entries(r)){const l=i==null?void 0:i[o];this._blockInstance.add(Us(o),l??a,!0);for(const u of this._callbacks)u()}}),e.subConfigValue("localeDefinitionOverride",n=>{var i;if(!n)return;const r=n[this._localeName];if(r)for(const[s,o]of Object.entries(r)){(i=this._blockInstance)==null||i.add(Us(s),o,!0);for(const a of this._callbacks)a()}})})}onLocaleChange(e){const n=$n(e,0);return this._callbacks.add(n),()=>{this._callbacks.delete(n)}}bindL10n(e,n,r){var s,o,a;e.$[n]=r(),this._boundBlocks.has(e)||this._boundBlocks.set(e,new Map),(o=(s=this._boundBlocks.get(e))==null?void 0:s.get(n))==null||o();const i=this.onLocaleChange(()=>{e.$[n]=r()});(a=this._boundBlocks.get(e))==null||a.set(n,i)}destroyL10nBindings(e){const n=this._boundBlocks.get(e);if(n){for(const r of n.values())r();this._boundBlocks.delete(e)}}destroy(){this._callbacks.clear()}}function HL(t,e){[...t.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n");if(!r)return;let i="textContent",s=!1;if(r.includes(":")){const l=r.split(":");i=l[0],r=l[1],i.startsWith("@")&&(i=i.slice(1),s=!0)}const o=r;e.has(o)&&e.sub(o,l=>{if(!l)return;e.l10nProcessorSubs.has(o)||e.l10nProcessorSubs.set(o,new Set);const u=e.l10nProcessorSubs.get(o);u==null||u.forEach(p=>{p.remove(),u.delete(p),e.allSubs.delete(p)});const d=Us(l).replace("*","");e.nodeCtx.has(d)||e.nodeCtx.add(d,l);const h=e.nodeCtx.sub(d,()=>{n[i]=e.l10n(l)});u==null||u.add(h),e.allSubs.add(h),n.removeAttribute("l10n")});const a=Us(r);e.has(a)||e.add(a,""),e.sub(a,()=>{r=r,s?n.setAttribute(i,e.l10n(r)):n[i]=e.l10n(r)}),n.removeAttribute("l10n")})}const Nn=t=>`*cfg/${t}`,WL={button:["toolbar"],checkbox:["toolbar"],menuitem:["menu","menubar"],option:["listbox"],tab:["tablist"]};function vl(t,e){e.tabIndex=0,e.focus(),t.tabIndex=-1}function Tp(t){let e=t.role||t.type||t.tagName;if(!e)return null;let n=WL[e.toLowerCase()];if(!n)return null;for(let r of n){let i=t.closest(`[role=${r}]`);if(i)return i}}function Cp(t,e){return e.role==="toolbar"?qL(e):e.querySelectorAll(`[role=${t.role}]`)}function qL(t){return[...t.querySelectorAll("*")].filter(n=>n.role==="button"||n.type==="button"||n.role==="checkbox"||n.type==="checkbox")}function GL(t){let e=t.getAttribute("aria-orientation");if(e==="vertical")return!1;if(e==="horizontal")return!0;let n=t.role;return n==="menubar"||n==="tablist"||n==="toolbar"}function KL(t){return e=>{let n=!1,r=300,i=0,s="";function o(h){let p=Tp(h.target);if(!p){a();return}let g=Cp(h.target,p),y=Array.from(g).indexOf(h.target),I="ArrowDown",P="ArrowUp";if(GL(p)&&(e.document.dir==="rtl"?(I="ArrowLeft",P="ArrowRight"):(I="ArrowRight",P="ArrowLeft")),h.key===I)h.preventDefault(),vl(h.target,g[y+1]||g[0]);else if(h.key===P)h.preventDefault(),vl(h.target,g[y-1]||g[g.length-1]);else if(h.key==="Home")h.preventDefault(),vl(h.target,g[0]);else if(h.key==="End")h.preventDefault(),vl(h.target,g[g.length-1]);else if(h.key.length===1&&p.role!=="tablist"){let C=Date.now();C-i<=r?s+=h.key.toLowerCase():s=h.key.toLowerCase(),i=C;let v=Array.from(g).find(S=>{var D,z,R;return(R=(z=(D=S.textContent)==null?void 0:D.trim())==null?void 0:z.toLowerCase())==null?void 0:R.startsWith(s)});v&&(h.preventDefault(),vl(h.target,v))}}function a(){n=!1,e.removeEventListener("keydown",o)}function l(h){let p=Tp(h.target);if(p){n||(n=!0,e.addEventListener("keydown",o));let g=Cp(h.target,p);for(let y of g)y!==h.target&&y.setAttribute("tabindex",-1)}else n&&a()}function u(h){(!h.relatedTarget||h.relatedTarget===e.document)&&a()}function d(h){let p=Tp(h.target);if(p){let g=Cp(h.target,p);for(let y of g)y!==h.target&&y.setAttribute("tabindex",-1);h.target.setAttribute("tabindex",0)}}return e.addEventListener("click",d),e.addEventListener("focusin",l),e.addEventListener("focusout",u),()=>{a(),e.removeEventListener("click",d),e.removeEventListener("focusin",l),e.removeEventListener("focusout",u)}}}function QL(){return t=>{let e,n;function r(s){if(s.target.getAttribute("aria-hidden")==="true"){e=s.target,e.setAttribute("aria-hidden","false"),n=e.hidden,n&&(e.hidden=!1);let o=s.target.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');o&&(o.tabIndex=0)}}function i(s){e&&e.contains(s.target)&&(!s.relatedTarget||!e.contains(s.relatedTarget))&&(s.target.tabIndex=-1,e.setAttribute("aria-hidden","true"),n&&(e.hidden=!0),e=null)}return t.addEventListener("keyuxJump",r),t.addEventListener("focusout",i),()=>{t.removeEventListener("keyuxJump",r),t.removeEventListener("focusout",i)}}}function XL(){return t=>{let e=[];function n(l){let u=t.document.activeElement;u&&u!==t.document.body&&e.push(new WeakRef(u)),l.focus({focusVisible:!0})}function r(){let l=e.pop();if(!l){t.document.activeElement.blur();return}let u=l.deref();u&&u.isConnected?u.focus():r()}let i=0,s;function o(l){clearInterval(s);let u=l.getAttribute("aria-controls");s=setInterval(()=>{if(i++>50){clearInterval(s);return}let d=t.document.getElementById(u);if(d){let h=d.querySelector('a, button, select, textarea, input:not([type=radio]), [type=radio]:checked, [tabindex]:not([tabindex="-1"])');h&&(clearInterval(s),d.dispatchEvent(new t.CustomEvent("keyuxJump",{bubbles:!0})),n(h))}},50)}function a(l){l.target.getAttribute("aria-controls")&&l.key==="Enter"&&o(l.target),l.key==="Escape"&&r()}return t.addEventListener("keydown",a),()=>{t.removeEventListener("keydown",a)}}}function YL(t){let e,n=t.split(" "),r;function i(a){a.key==="Enter"&&(a.target.tagName==="BUTTON"||a.target.tagName==="A")&&(s(),a.target.classList.add(...n),e=a.target,r=a.target)}function s(){e&&e.classList.remove(...n),r=null}function o(a){a.clientX===0&&a.clientY===0&&r!==a.target&&(s(),a.target.classList.add(...n),e=a.target)}return a=>(a.addEventListener("click",o),a.addEventListener("keydown",i),a.addEventListener("keyup",s),()=>{a.removeEventListener("click",o),a.removeEventListener("keydown",i),a.removeEventListener("keyup",s)})}function ZL(t,e){let n=e.map(r=>r(t));return()=>{n.forEach(r=>r())}}class JL{constructor(){U(this,"_listeners",new Map);U(this,"_scope",[])}addEventListener(e,n){const r=i=>{const s=i.target;s&&this._scope.some(o=>o===i.target||o.contains(s))&&n(i)};this._listeners.set(n,r),window.addEventListener(e,r)}removeEventListener(e,n){const r=this._listeners.get(n);r&&window.removeEventListener(e,r),this._listeners.delete(n)}get CustomEvent(){return window.CustomEvent}get document(){return window.document}get navigator(){return window.navigator}registerScope(e){this._scope.push(e)}destroy(){this._scope=[],this._listeners.forEach((e,n)=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",e),this._listeners.delete(n)})}}class eO{constructor(){U(this,"_destroyKeyUX");U(this,"_scopedWindow");this._scopedWindow=new JL,this._destroyKeyUX=ZL(this._scopedWindow,[KL(),YL("is-pressed"),XL(),QL()])}registerBlock(e){this._scopedWindow.registerScope(e)}destroy(){var e;(e=this._destroyKeyUX)==null||e.call(this),this._scopedWindow.destroy()}}const Yv="lr-";class Qe extends pf{constructor(){super();U(this,"requireCtxName",!1);U(this,"allowCustomTemplate",!0);U(this,"activityType",null);U(this,"init$",nb());this.l10nProcessorSubs=new Map,this.addTemplateProcessor(HL)}l10n(n,r={}){if(!n)return"";let i=this.$[Us(n)]||n,s=UN(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return Z0(i,r)}pluralize(n,r){const i=this.l10n("locale-id")||"en",s=BE(i,r);return this.l10n(`${n}__${s}`)}bindL10n(n,r){var i;(i=this.localeManager)==null||i.bindL10n(this,n,r)}emit(n,r,i){const s=this.has("*eventEmitter")&&this.$["*eventEmitter"];s&&s.emit(n,r,i)}hasBlockInCtx(n){for(let r of this.blocksRegistry)if(n(r))return!0;return!1}setOrAddState(n,r){this.add$({[n]:r},!0)}setActivity(n){if(this.hasBlockInCtx(r=>r.activityType===n)){this.$["*currentActivity"]=n;return}console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){this.constructor.styleAttrs.forEach(r=>{this.setAttribute(r,"")}),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?FN({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback(),dh.registerClient(this)}disconnectedCallback(){super.disconnectedCallback(),dh.unregisterClient(this)}initCallback(){this.has("*blocksRegistry")||this.add("*blocksRegistry",new Set),this.$["*blocksRegistry"].add(this),this.has("*eventEmitter")||this.add("*eventEmitter",new MN(this.debugPrint.bind(this))),this.has("*localeManager")||this.add("*localeManager",new BL(this)),this.has("*a11y")||this.add("*a11y",new eO),this.sub(Us("locale-id"),r=>{const i=DN(r);this.style.direction=i==="ltr"?"":i})}get localeManager(){return this.has("*localeManager")?this.$["*localeManager"]:null}get a11y(){return this.has("*a11y")?this.$["*a11y"]:null}get blocksRegistry(){return this.$["*blocksRegistry"]}destroyCallback(){var r;let n=this.blocksRegistry;n.delete(this),(r=this.localeManager)==null||r.destroyL10nBindings(this),this.l10nProcessorSubs=new Map,Oe.deleteCtx(this),n.size===0&&setTimeout(()=>{this.destroyCtxCallback()},0)}destroyCtxCallback(){var n,r;Oe.deleteCtx(this.ctxName),(n=this.localeManager)==null||n.destroy(),(r=this.a11y)==null||r.destroy()}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"];if(n===0)return`0 ${i[0]}`;let s=1024,o=r<0?0:r,a=Math.floor(Math.log(n)/Math.log(s));return parseFloat((n/s**a).toFixed(o))+" "+i[a]}proxyUrl(n){return this.cfg.secureDeliveryProxy&&this.cfg.secureDeliveryProxyUrlResolver&&console.warn("Both secureDeliveryProxy and secureDeliveryProxyUrlResolver are set. The secureDeliveryProxyUrlResolver will be used."),this.cfg.secureDeliveryProxyUrlResolver?this.cfg.secureDeliveryProxyUrlResolver(n,{uuid:DE(n),cdnUrlModifiers:VE(n),fileName:i1(n)}):this.cfg.secureDeliveryProxy?Z0(this.cfg.secureDeliveryProxy,{previewUrl:n},{transform:r=>window.encodeURIComponent(r)}):n}get cfg(){if(!this.__cfgProxy){let n=Object.create(null);this.__cfgProxy=new Proxy(n,{set:(r,i,s)=>{if(typeof i!="string")return!1;const o=Nn(i);return this.has(o)||this.add(o,Gi[i]),this.$[o]=s,!0},get:(r,i)=>{const s=Nn(i);return this.has(s)||this.add(s,Gi[i]),this.$[Nn(i)]}})}return this.__cfgProxy}subConfigValue(n,r){const i=Nn(n);this.has(i)||this.add(i,Gi[n]),this.sub(i,r)}debugPrint(...n){if(!this.cfg.debug)return;let r=n;if(typeof(n==null?void 0:n[0])=="function"){const i=n[0];r=i()}console.log(`[${this.ctxName}]`,...r)}static reg(n){if(!n){super.reg();return}super.reg(n.startsWith(Yv)?n:Yv+n)}}U(Qe,"StateConsumerScope",null),U(Qe,"styleAttrs",[]);const tO="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 24 24' id='uc-icon-about' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922a1.48 1.48 0 0 1 .617-.532c.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72a1.91 1.91 0 0 1-.405.574 3.48 3.48 0 0 1-.575.453 4.22 4.22 0 0 0-.847.66c-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577Zm.053 3.03c.21.206.46.31.75.31.196 0 .374-.049.534-.144a1.1 1.1 0 0 0 .383-.384c.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-add' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.75 21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 1.5 0v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-arrow-down' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.5 23.03a.75.75 0 0 0 .999 0l9.29-8.276a.75.75 0 0 0-.998-1.12l-8.042 7.164V1.53a.75.75 0 0 0-1.5 0v19.267l-8.04-7.163a.75.75 0 0 0-.998 1.12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-back' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M20.251 12a.75.75 0 0 1-.75.75H6.067l5.72 5.85a.75.75 0 1 1-1.072 1.05L4.136 12.92a1.292 1.292 0 0 1 0-1.842l6.579-6.728a.75.75 0 1 1 1.072 1.048l-5.72 5.851H19.5a.75.75 0 0 1 .75.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.6 18.4a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0zM12 4.5A1.5 1.5 0 0 1 13.5 6v7a1.5 1.5 0 0 1-3 0V6A1.5 1.5 0 0 1 12 4.5z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-success' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.5 18.204 7.6-8.183a1.5 1.5 0 0 0-2.2-2.042l-5.4 5.817-2.4-2.586a1.5 1.5 0 1 0-2.2 2.041l4.6 4.953Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-box' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-close' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M4.604 4.604a.75.75 0 0 1 1.06 0L12 10.939l6.335-6.335a.75.75 0 1 1 1.061 1.06L13.061 12l6.335 6.335a.75.75 0 1 1-1.06 1.061L12 13.061l-6.335 6.335a.75.75 0 0 1-1.061-1.06L10.939 12 4.604 5.665a.75.75 0 0 1 0-1.061z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-collapse' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.116 12a.75.75 0 0 1 .75-.75h16.268a.75.75 0 0 1 0 1.5H3.866a.75.75 0 0 1-.75-.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-default' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dropbox' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.019 1.92a.75.75 0 0 1 .806 0L12 5.219l5.176-3.297a.75.75 0 0 1 .806 0l5.577 3.553a.75.75 0 0 1 0 1.265l-4.574 2.914 4.574 2.914a.75.75 0 0 1 0 1.265l-5.577 3.554a.75.75 0 0 1-.806 0L12 14.089l-5.175 3.297a.75.75 0 0 1-.806 0L.44 13.833a.75.75 0 0 1 0-1.266l4.575-2.914L.44 6.74a.75.75 0 0 1 0-1.265zm.403 8.616L2.24 13.2l4.182 2.664 4.181-2.664zm6.975 2.664 4.182 2.664L21.76 13.2l-4.181-2.664zm2.776-3.547L12 12.311 7.828 9.653 12 6.995zm1.406-.882 4.181-2.664-4.181-2.664-4.182 2.664zm-6.976-2.664L6.422 3.443 2.24 6.107 6.422 8.77zM5.791 18.544a.75.75 0 0 1 1.035-.23l5.175 3.297 5.175-3.297a.75.75 0 1 1 .806 1.265l-5.578 3.554a.75.75 0 0 1-.806 0L6.02 19.579a.75.75 0 0 1-.23-1.035z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-evernote' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276a4.213 4.213 0 0 0 .056-.335c.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576a8.872 8.872 0 0 1-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915a3.8 3.8 0 0 0 .627.493 5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235a3.595 3.595 0 0 0-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996Zm-5.479-5.323a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-expand' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m12 8.337-8.47 8.47a.75.75 0 0 1-1.06-1.06l8.605-8.606a1.29 1.29 0 0 1 1.85 0l8.605 8.605a.75.75 0 1 1-1.06 1.06L12 8.338Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-external-source-placeholder' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-facebook' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 1.5C6.201 1.5 1.5 6.201 1.5 12c0 4.943 3.416 9.089 8.016 10.204v-6.108H7.383a.75.75 0 0 1-.75-.75v-3.281a.75.75 0 0 1 .75-.75h2.133V9.393c0-.958.225-2.511 1.38-3.65 1.194-1.177 3.174-1.718 6.254-1.056a.75.75 0 0 1 .592.733v2.754a.75.75 0 0 1-.75.75c-.692 0-1.203.026-1.584.082-.387.057-.578.137-.675.202-.109.073-.237.205-.237 1.029v1.078h2.39a.75.75 0 0 1 .742.866l-.516 3.281a.75.75 0 0 1-.74.634h-1.876v6.106C19.09 21.082 22.5 16.939 22.5 12c0-5.799-4.701-10.5-10.5-10.5zM0 12C0 5.373 5.373 0 12 0s12 5.373 12 12c0 5.995-4.395 10.961-10.138 11.856a.75.75 0 0 1-.866-.74v-7.77a.75.75 0 0 1 .75-.75h1.984l.28-1.781h-2.264a.75.75 0 0 1-.75-.75v-1.828c0-.829.089-1.729.9-2.274.363-.244.807-.37 1.293-.441a9.623 9.623 0 0 1 1.053-.086V6.04c-2.41-.405-3.645.132-4.293.771-.737.728-.933 1.793-.933 2.582v2.672a.75.75 0 0 1-.75.75H8.133v1.78h2.133a.75.75 0 0 1 .75.75v7.772a.75.75 0 0 1-.865.741C4.4 22.968 0 18 0 12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M2.895 1.201c0-.473.383-.857.857-.857h8.4c.227 0 .445.09.606.251l8.4 8.4c.16.16.25.379.25.606v13.2a.857.857 0 0 1-.856.857h-16.8a.857.857 0 0 1-.857-.857zm1.714.857v19.886h15.085V10.458h-7.542a.857.857 0 0 1-.858-.857V2.058zm8.4 1.213 5.473 5.473H13.01z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-flickr' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5.959 7.926c-2.298 0-4.14 1.834-4.14 4.073 0 2.241 1.842 4.075 4.14 4.075 2.302 0 4.145-1.834 4.145-4.075 0-2.238-1.843-4.073-4.145-4.073Zm-5.64 4.073c0-3.086 2.533-5.573 5.64-5.573 3.11 0 5.645 2.486 5.645 5.573 0 3.089-2.535 5.575-5.645 5.575-3.107 0-5.64-2.487-5.64-5.575Zm18.07-4.073c-2.301 0-4.144 1.835-4.144 4.073 0 2.24 1.843 4.075 4.145 4.075 2.299 0 4.141-1.834 4.141-4.075 0-2.239-1.842-4.073-4.141-4.073Zm-5.644 4.073c0-3.087 2.535-5.573 5.645-5.573 3.108 0 5.641 2.487 5.641 5.573 0 3.088-2.533 5.575-5.641 5.575-3.11 0-5.645-2.486-5.645-5.575Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gphotos' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-huddle' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-info' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-instagram' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.225 12a5.775 5.775 0 1 1 11.55 0 5.775 5.775 0 0 1-11.55 0zM12 7.725a4.275 4.275 0 1 0 0 8.55 4.275 4.275 0 0 0 0-8.55zm6.425-.75a1.4 1.4 0 1 0 0-2.8 1.4 1.4 0 0 0 0 2.8zm-6.467-6.8h.084c2.152 0 3.823 0 5.152.132 1.35.134 2.427.41 3.362 1.013a7.15 7.15 0 0 1 2.124 2.124c.604.935.88 2.012 1.013 3.362.132 1.329.132 3 .132 5.152v.084c0 2.152 0 3.823-.132 5.152-.134 1.35-.41 2.427-1.013 3.362a7.15 7.15 0 0 1-2.124 2.124c-.935.604-2.012.88-3.362 1.013-1.329.132-3 .132-5.152.132h-.084c-2.152 0-3.824 0-5.153-.132-1.35-.134-2.427-.409-3.36-1.013a7.15 7.15 0 0 1-2.125-2.124C.716 19.62.44 18.544.307 17.194c-.132-1.329-.132-3-.132-5.152v-.084c0-2.152 0-3.823.132-5.152.133-1.35.409-2.427 1.013-3.362A7.15 7.15 0 0 1 3.444 1.32C4.378.716 5.456.44 6.805.307c1.33-.132 3-.132 5.153-.132zM6.953 1.799c-1.234.123-2.043.36-2.695.78A5.65 5.65 0 0 0 2.58 4.26c-.42.65-.657 1.46-.78 2.695C1.676 8.2 1.675 9.797 1.675 12s0 3.8.124 5.046c.123 1.235.36 2.044.78 2.696a5.649 5.649 0 0 0 1.68 1.678c.65.421 1.46.658 2.694.78 1.247.124 2.844.125 5.047.125s3.8 0 5.046-.124c1.235-.123 2.044-.36 2.695-.78a5.648 5.648 0 0 0 1.68-1.68c.42-.65.657-1.46.78-2.694.123-1.247.124-2.844.124-5.047s-.001-3.8-.125-5.046c-.122-1.235-.359-2.044-.78-2.695a5.65 5.65 0 0 0-1.679-1.68c-.651-.42-1.46-.657-2.695-.78-1.246-.123-2.843-.124-5.046-.124-2.203 0-3.8 0-5.047.124z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-local' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 3.75a1.5 1.5 0 0 0-1.5 1.5v13.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 21 7.5h-9a.75.75 0 0 1-.643-.364L9.325 3.75zm-3 1.5a3 3 0 0 1 3-3h6.75a.75.75 0 0 1 .643.364L12.425 6H21a3 3 0 0 1 3 3v9.75a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-onedrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.955 3.3A2.969 2.969 0 0 0 8.998 6h5.914a2.97 2.97 0 0 0-2.957-2.7zM16.416 6a4.47 4.47 0 0 0-8.922 0h-2.32a.755.755 0 0 0-.111.008H3.075a.75.75 0 1 0 0 1.5h1.35V19.35a2.85 2.85 0 0 0 2.85 2.85h9.45a2.85 2.85 0 0 0 2.85-2.85V7.508h1.35a.75.75 0 0 0 0-1.5h-1.989A.754.754 0 0 0 18.825 6zM5.925 7.508V19.35a1.35 1.35 0 0 0 1.35 1.35h9.45a1.35 1.35 0 0 0 1.35-1.35V7.508z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-select' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m7 10 5 5 5-5H7Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-url' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M19.11 3.67c-1.71-1.709-4.578-1.682-6.408.148l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221C14.018.381 17.836.276 20.17 2.61l1.22 1.22c2.335 2.334 2.23 6.153-.147 8.529l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221c1.83-1.83 1.856-4.698.147-6.408zm-3.36 4.58a.75.75 0 0 1 0 1.06l-6.439 6.44a.75.75 0 0 1-1.06-1.06l6.439-6.44a.75.75 0 0 1 1.06 0zM6.04 9.42a.75.75 0 0 1 0 1.061l-2.222 2.222c-1.83 1.83-1.856 4.698-.147 6.407l1.22 1.22c1.71 1.71 4.578 1.683 6.408-.147l2.221-2.221a.75.75 0 1 1 1.06 1.06l-2.22 2.222c-2.377 2.376-6.195 2.481-8.53.147l-1.22-1.22c-2.334-2.334-2.228-6.153.148-8.53l2.221-2.22a.75.75 0 0 1 1.06 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-vk' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol></svg>";class ou extends Qe{constructor(){super(...arguments);U(this,"requireCtxName",!0);U(this,"init$",ib(this));U(this,"_template",null)}initCallback(){var n;super.initCallback(),(n=this.a11y)==null||n.registerBlock(this)}static set template(n){this._template=tO+n+"<slot></slot>"}static get template(){return this._template}}U(ou,"styleAttrs",["lr-wgt-common"]);const Zv="active",_l="___ACTIVITY_IS_ACTIVE___",Ur=class Ur extends Qe{constructor(){super(...arguments);U(this,"historyTracked",!1);U(this,"init$",rb(this));U(this,"_debouncedHistoryFlush",$n(this._historyFlush.bind(this),10))}_deactivate(){var r;let n=Ur._activityCallbacks.get(this);this[_l]=!1,this.removeAttribute(Zv),(r=n==null?void 0:n.deactivateCallback)==null||r.call(n)}_activate(){var r;let n=Ur._activityCallbacks.get(this);this.$["*historyBack"]=this.historyBack.bind(this),this[_l]=!0,this.setAttribute(Zv,""),(r=n==null?void 0:n.activateCallback)==null||r.call(n),this._debouncedHistoryFlush(),this.emit(at.ACTIVITY_CHANGE,{activity:this.activityType})}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",n=>{this.setAttribute("current-activity",n)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",n=>{this.activityType!==n&&this[_l]?this._deactivate():this.activityType===n&&!this[_l]&&this._activate(),n||(this.$["*history"]=[])}),this.has("*modalActive")&&this.sub("*modalActive",n=>{!n&&this.activityType===this.$["*currentActivity"]&&(this.$["*currentActivity"]=null)}))}_historyFlush(){let n=this.$["*history"];n&&(n.length>10&&(n=n.slice(n.length-11,n.length-1)),this.historyTracked&&n[n.length-1]!==this.activityType&&n.push(this.activityType),this.$["*history"]=n)}_isActivityRegistered(){return this.activityType&&Ur._activityCallbacks.has(this)}get isActivityActive(){return this[_l]}get couldOpenActivity(){return!0}registerActivity(n,r={}){const{onActivate:i,onDeactivate:s}=r;Ur._activityCallbacks.set(this,{activateCallback:i,deactivateCallback:s})}unregisterActivity(){this.isActivityActive&&this._deactivate(),Ur._activityCallbacks.delete(this)}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity();const n=this.$["*currentActivity"];!![...this.blocksRegistry].find(i=>i instanceof Ur&&i.activityType===n)||(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let n=this.$["*history"];if(n){let r=n.pop();for(;r===this.activityType;)r=n.pop();let i=!!r;if(r){const s=[...this.blocksRegistry].find(o=>o.activityType===r);i=(s==null?void 0:s.couldOpenActivity)??!1}r=i?r:void 0,this.$["*currentActivity"]=r,this.$["*history"]=n,r||this.setOrAddState("*modalActive",!1)}}};U(Ur,"_activityCallbacks",new Map);let _e=Ur;_e.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const nO=20,tm=24,Ol=34,ab=3,pr=ab/2,ws=1,Gu=100/3,ye=1,Jv=24,rO=6;function Ao(t,e){for(let n in e)t.setAttributeNS(null,n,e[n].toString())}function qn(t,e={}){let n=document.createElementNS("http://www.w3.org/2000/svg",t);return Ao(n,e),n}function iO(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=e.includes("w")?0:1,l=e.includes("n")?0:1,u=[-1,1][a],d=[-1,1][l],h=[r+a*s+pr*u,i+l*o+pr*d-tm*n*d],p=[r+a*s+pr*u,i+l*o+pr*d],g=[r+a*s-tm*n*u+pr*u,i+l*o+pr*d];return{d:`M ${h[0]} ${h[1]} L ${p[0]} ${p[1]} L ${g[0]} ${g[1]}`,center:p}}function sO(t,e,n){let{x:r,y:i,width:s,height:o}=t,a=["n","s"].includes(e)?.5:{w:0,e:1}[e],l=["w","e"].includes(e)?.5:{n:0,s:1}[e],u=[-1,1][a],d=[-1,1][l],h,p;["n","s"].includes(e)?(h=[r+a*s-Ol*n/2,i+l*o+pr*d],p=[r+a*s+Ol*n/2,i+l*o+pr*d]):(h=[r+a*s+pr*u,i+l*o-Ol*n/2],p=[r+a*s+pr*u,i+l*o+Ol*n/2]);let g=`M ${h[0]} ${h[1]} L ${p[0]} ${p[1]}`,y=[p[0]-(p[0]-h[0])/2,p[1]-(p[1]-h[1])/2];return{d:g,center:y}}function oO(t){return t===""?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize"}function aO({rect:t,delta:[e,n],imageBox:r}){return fh({...t,x:t.x+e,y:t.y+n},r)}function fh(t,e){let{x:n}=t,{y:r}=t;return t.x<e.x?n=e.x:t.x+t.width>e.x+e.width&&(n=e.x+e.width-t.width),t.y<e.y?r=e.y:t.y+t.height>e.y+e.height&&(r=e.y+e.height-t.height),{...t,x:n,y:r}}function lO({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;s+=i,a-=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s<=r.y&&(s=r.y,a=t.y+t.height-s,n&&(o=a*n,l=t.x+t.width/2-o/2)),l<=r.x&&(l=r.x,s=t.y+t.height-a),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y+t.height-a),a<ye&&(a=ye,n&&(o=a*n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),o<ye&&(o=ye,n&&(a=o/n,l=t.x+t.width/2-o/2),s=t.y+t.height-a),{x:l,y:s,width:o,height:a}}function cO({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;s+=i,o-=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s<=r.x&&(s=r.x,o=t.x+t.width-s,n&&(a=o/n,l=t.y+t.height/2-a/2)),l<=r.y&&(l=r.y,s=t.x+t.width-o),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x+t.width-o),a<ye&&(a=ye,n&&(o=a*n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),o<ye&&(o=ye,n&&(a=o/n),l=t.y+t.height/2-a/2,s=t.x+t.width-o),{x:s,y:l,width:o,height:a}}function uO({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[,i]=e;let{y:s,width:o,height:a}=t;a+=i,n&&(o=a*n);let l=t.x+t.width/2-o/2;return s+a>=r.y+r.height&&(a=r.y+r.height-s,n&&(o=a*n),l=t.x+t.width/2-o/2),l<=r.x&&(l=r.x,s=t.y),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=t.y),a<ye&&(a=ye,n&&(o=a*n),l=t.x+t.width/2-o/2),o<ye&&(o=ye,n&&(a=o/n),l=t.x+t.width/2-o/2),{x:l,y:s,width:o,height:a}}function dO({rect:t,delta:e,aspectRatio:n,imageBox:r}){const[i]=e;let{x:s,width:o,height:a}=t;o+=i,n&&(a=o/n);let l=t.y+t.height/2-a/2;return s+o>=r.x+r.width&&(o=r.x+r.width-s,n&&(a=o/n),l=t.y+t.height/2-a/2),l<=r.y&&(l=r.y,s=t.x),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=t.x),a<ye&&(a=ye,n&&(o=a*n),l=t.y+t.height/2-a/2),o<ye&&(o=ye,n&&(a=o/n),l=t.y+t.height/2-a/2),{x:s,y:l,width:o,height:a}}function hO({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:u}=t;return o+i<r.x&&(i=r.x-o),a+s<r.y&&(s=r.y-a),o+=i,l-=i,a+=s,u-=s,n&&Math.abs(l/u)>n?(s=l/n-u,u+=s,a-=s,a<=r.y&&(u=u-(r.y-a),l=u*n,o=t.x+t.width-l,a=r.y)):n&&(i=u*n-l,l=l+i,o-=i,o<=r.x&&(l=l-(r.x-o),u=l/n,o=r.x,a=t.y+t.height-u)),u<ye&&(u=ye,n&&(l=u*n),o=t.x+t.width-l,a=t.y+t.height-u),l<ye&&(l=ye,n&&(u=l/n),o=t.x+t.width-l,a=t.y+t.height-u),{x:o,y:a,width:l,height:u}}function fO({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:u}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+s<r.y&&(s=r.y-a),l+=i,a+=s,u-=s,n&&Math.abs(l/u)>n?(s=l/n-u,u+=s,a-=s,a<=r.y&&(u=u-(r.y-a),l=u*n,o=t.x,a=r.y)):n&&(i=u*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,u=l/n,o=r.x+r.width-l,a=t.y+t.height-u)),u<ye&&(u=ye,n&&(l=u*n),a=t.y+t.height-u),l<ye&&(l=ye,n&&(u=l/n),a=t.y+t.height-u),{x:o,y:a,width:l,height:u}}function pO({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:u}=t;return o+i<r.x&&(i=r.x-o),a+u+s>r.y+r.height&&(s=r.y+r.height-a-u),o+=i,l-=i,u+=s,n&&Math.abs(l/u)>n?(s=l/n-u,u+=s,a+u>=r.y+r.height&&(u=r.y+r.height-a,l=u*n,o=t.x+t.width-l,a=r.y+r.height-u)):n&&(i=u*n-l,l+=i,o-=i,o<=r.x&&(l=l-(r.x-o),u=l/n,o=r.x,a=t.y)),u<ye&&(u=ye,n&&(l=u*n),o=t.x+t.width-l),l<ye&&(l=ye,n&&(u=l/n),o=t.x+t.width-l),{x:o,y:a,width:l,height:u}}function mO({rect:t,delta:e,aspectRatio:n,imageBox:r}){let[i,s]=e,{x:o,y:a,width:l,height:u}=t;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+u+s>r.y+r.height&&(s=r.y+r.height-a-u),l+=i,u+=s,n&&Math.abs(l/u)>n?(s=l/n-u,u+=s,a+u>=r.y+r.height&&(u=r.y+r.height-a,l=u*n,o=t.x,a=r.y+r.height-u)):n&&(i=u*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,u=l/n,o=r.x+r.width-l,a=t.y)),u<ye&&(u=ye,n&&(l=u*n)),l<ye&&(l=ye,n&&(u=l/n)),{x:o,y:a,width:l,height:u}}function gO({direction:t,...e}){switch(t){case"n":return lO(e);case"w":return cO(e);case"s":return uO(e);case"e":return dO(e);case"nw":return hO(e);case"ne":return fO(e);case"sw":return pO(e);case"se":return mO(e);default:return e.rect}}function yO(t,[e,n]){return t.x<=e&&e<=t.x+t.width&&t.y<=n&&n<=t.y+t.height}function vO(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}function _O(t,e){return Math.abs(t.width/t.height-e)<.1}function wl({width:t,height:e},n){let r=n/90%2!==0;return{width:r?e:t,height:r?t:e}}function wO(t,e,n){const r=t/e;let i,s;r>n?(i=Math.round(e*n),s=e):(i=t,s=Math.round(t/n));const o=Math.round((t-i)/2),a=Math.round((e-s)/2);return o+i>t&&(i=t-o),a+s>e&&(s=e-a),{x:o,y:a,width:i,height:s}}function bd(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function $o(t,e,n){return Math.min(Math.max(t,e),n)}const lb=t=>{if(!t)return[];const[e,n]=t.split(":").map(Number);if(!Number.isFinite(e)||!Number.isFinite(n)){console.error(`Invalid crop preset: ${t}`);return}return[{type:"aspect-ratio",width:e,height:n}]},mr=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"});function EO(t){return WE({...t,libraryName:t1,libraryVersion:n1})}const h1=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],cb=t=>t?t.filter(e=>typeof e=="string").map(e=>ns(e)).flat():[],ub=(t,e)=>e.some(n=>n.endsWith("*")?(n=n.replace("*",""),t.startsWith(n)):t===n),bO=(t,e)=>e.some(n=>n.startsWith(".")?t.toLowerCase().endsWith(n.toLowerCase()):!1),TO=t=>{let e=t==null?void 0:t.type;return e?ub(e,h1):!1},e_="[Typed State] Wrong property name: ",CO="[Typed State] Wrong property type: ";class IO{constructor(e,n){this.__typedSchema=e,this.__ctxId=n||iu.generate(),this.__schema=Object.keys(e).reduce((r,i)=>(r[i]=e[i].value,r),{}),this.__data=Oe.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,n){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(e_+e);return}let r=this.__typedSchema[e];if((n==null?void 0:n.constructor)===r.type||n instanceof r.type||r.nullable&&n===null){this.__data.pub(e,n);return}console.warn(CO+e)}setMultipleValues(e){for(let n in e)this.setValue(n,e[n])}getValue(e){if(!this.__typedSchema.hasOwnProperty(e)){console.warn(e_+e);return}return this.__data.read(e)}subscribe(e,n){return this.__data.sub(e,n)}remove(){Oe.deleteCtx(this.__ctxId)}}class SO{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||iu.generate(),this.__data=Oe.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{Object.keys(n).length!==0&&(this.__propertyObservers.forEach(s=>{s({...n})}),n=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let e=new Set(this.__added),n=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r==null||r([...this.__items],e,n)})}observeCollection(e){return this.__collectionObservers.add(e),this.__items.size>0&&this.notify(),()=>{this.unobserveCollection(e)}}unobserveCollection(e){var n;(n=this.__collectionObservers)==null||n.delete(e)}add(e){let n=new IO(this.__typedSchema);for(let r in e)n.setValue(r,e[r]);return this.__items.add(n.uid),this.notify(),this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),n.uid}read(e){return this.__data.read(e)}readProp(e,n){return this.read(e).getValue(n)}publishProp(e,n,r){this.read(e).setValue(n,r)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observeProperties(e){return this.__propertyObservers.add(e),()=>{this.unobserveProperties(e)}}unobserveProperties(e){var n;(n=this.__propertyObservers)==null||n.delete(e)}findItems(e){let n=[];return this.__items.forEach(r=>{let i=this.read(r);e(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){Oe.deleteCtx(this.__ctxId),this.__propertyObservers=null,this.__collectionObservers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach(n=>{n.remove()}),delete this.__subsMap[e]}}const AO=t=>{const e=new Map;return(...n)=>{const r=JSON.stringify(n);if(e.has(r))return e.get(r);const i=t(...n);return e.set(r,i),i}},t_=new Set;function xO(t){t_.has(t)||(t_.add(t),console.warn(t))}function kO(t){let e=!1;return setTimeout(()=>{e=!0},0),r=>(...i)=>(e&&xO(t),r(...i))}function PO(t){const e={progress:()=>t.$["*commonProgress"],errors:()=>t.$["*collectionErrors"],group:()=>t.$["*groupInfo"],totalCount:()=>t.uploadCollection.size,failedCount:()=>n.failedEntries.length,successCount:()=>n.successEntries.length,uploadingCount:()=>n.uploadingEntries.length,status:()=>n.isFailed?"failed":n.isUploading?"uploading":n.isSuccess?"success":"idle",isSuccess:()=>n.allEntries.length>0&&n.errors.length===0&&n.successEntries.length===n.allEntries.length,isUploading:()=>n.allEntries.some(i=>i.status==="uploading"),isFailed:()=>n.errors.length>0||n.failedEntries.length>0,allEntries:()=>t.getOutputData(),successEntries:()=>n.allEntries.filter(i=>i.status==="success"),failedEntries:()=>n.allEntries.filter(i=>i.status==="failed"),uploadingEntries:()=>n.allEntries.filter(i=>i.status==="uploading"),idleEntries:()=>n.allEntries.filter(i=>i.status==="idle")},n={},r=kO("You're trying to access the OutputCollectionState asynchronously. In this case, the data you retrieve will be newer than it was when the OutputCollectionState was created or when the event was dispatched. If you want to retain the state at a specific moment in time, you should use the spread operator like this: `{...outputCollectionState}` or `{...e.detail}`");for(const[i,s]of Object.entries(e)){const o=i,l=AO(r(s));Object.defineProperty(n,o,{get:l,enumerable:!0})}return n}const RO=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Va,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silent:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0},metadata:{type:Object,value:null,nullable:!0},errors:{type:Array,value:[]},uploadError:{type:Error,value:null,nullable:!0},isRemoved:{type:Boolean,value:!1}}),NO=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/i,LO=new RegExp(`^/?(${NO.source})(?:/(-/(?:[^/]+/)+)?([^/]*))?$`,"i"),OO=({url:t,cdnBase:e})=>{const n=new URL(e),r=new URL(t);if(n.host!==r.host)return null;const[,i,s,o]=LO.exec(r.pathname);return{uuid:i,cdnUrlModifiers:s||"",filename:o||null}},n_=t=>Math.floor(t/1e3),MO=(t,{threshold:e})=>{const{secureExpire:n}=t,r=n_(Date.now()),i=Number(n),s=n_(e);return r+s>=i};class DO{constructor(e){U(this,"_block");U(this,"_secureToken",null);this._block=e}_debugPrint(...e){this._block.debugPrint("[secure-uploads]",...e)}async getSecureToken(){const{secureSignature:e,secureExpire:n,secureUploadsSignatureResolver:r}=this._block.cfg;if((e||n)&&r&&console.warn("Both secureSignature/secureExpire and secureUploadsSignatureResolver are set. secureUploadsSignatureResolver will be used."),r){if(!this._secureToken||MO(this._secureToken,{threshold:this._block.cfg.secureUploadsExpireThreshold})){this._secureToken?this._debugPrint("Secure signature is expired. Resolving a new one..."):this._debugPrint("Secure signature is not set yet.");try{const i=await r();i?!i.secureSignature||!i.secureExpire?console.error("Secure signature resolver returned an invalid result:",i):(this._debugPrint("Secure signature resolved:",i),this._debugPrint("Secure signature will expire in",new Date(Number(i.secureExpire)*1e3).toISOString()),this._secureToken=i):(this._debugPrint("Secure signature resolver returned nothing."),this._secureToken=null)}catch(i){console.error("Secure signature resolving failed. Falling back to the previous one.",i)}}return this._secureToken}return e&&n?(this._debugPrint("Secure signature and expire are set. Using them...",{secureSignature:e,secureExpire:n}),{secureSignature:e,secureExpire:n}):null}}const VO=(t,e)=>{const n=e.cfg.imgOnly,r=t.isImage;if(!(!n||r)&&!(!t.fileInfo&&t.externalUrl)&&!(!t.fileInfo&&!t.mimeType))return{type:"NOT_AN_IMAGE",message:e.l10n("images-only-accepted"),payload:{entry:t}}},UO=(t,e)=>{const n=e.cfg.imgOnly,r=e.cfg.accept,i=cb([...n?h1:[],r]);if(!i.length)return;const s=t.mimeType,o=t.name;if(!s||!o)return;const a=ub(s,i),l=bO(o,i);if(!a&&!l)return{type:"FORBIDDEN_FILE_TYPE",message:e.l10n("file-type-not-allowed"),payload:{entry:t}}},hr=1e3,Es=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),El=t=>Math.ceil(t*100)/100,FO=(t,e=Es.AUTO)=>{const n=e===Es.AUTO;if(e===Es.BYTE||n&&t<hr**1){const r=BE("en-US",t),i={one:"byte",other:"bytes"}[r];return`${t} ${i}`}return e===Es.KB||n&&t<hr**2?`${El(t/hr**1)} KB`:e===Es.MB||n&&t<hr**3?`${El(t/hr**2)} MB`:e===Es.GB||n&&t<hr**4?`${El(t/hr**3)} GB`:e===Es.TB||n&&t<hr**5?`${El(t/hr**4)} TB`:`${El(t/hr**5)} PB`},$O=(t,e)=>{const n=e.cfg.maxLocalFileSizeBytes,r=t.size;if(n&&r&&r>n)return{type:"FILE_SIZE_EXCEEDED",message:e.l10n("files-max-size-limit-error",{maxFileSize:FO(n)}),payload:{entry:t}}},jO=(t,e)=>{var s;const{internalId:n}=t,r=(s=e.uploadCollection.read(n))==null?void 0:s.getValue("uploadError");if(!r)return;if(r instanceof hn)return{type:"UPLOAD_ERROR",message:r.message,payload:{entry:t,error:r}};if(r instanceof su)return{type:"NETWORK_ERROR",message:r.message,payload:{entry:t,error:r}};const i=r instanceof Error?r:new Error("Unknown error",{cause:r});return{type:"UNKNOWN_ERROR",message:i.message,payload:{entry:t,error:i}}},zO=(t,e)=>{if(t.failedCount>0)return{type:"SOME_FILES_HAS_ERRORS",message:e.l10n("some-files-were-not-uploaded")}},BO=(t,e)=>{const n=t.totalCount,r=e.cfg.multiple?e.cfg.multipleMin:0,i=e.cfg.multiple?e.cfg.multipleMax:1;if(r&&n<r)return{type:"TOO_FEW_FILES",message:e.l10n("files-count-limit-error-too-few",{min:r,max:i,total:n}),payload:{total:n,min:r,max:i}};if(i&&n>i)return{type:"TOO_MANY_FILES",message:e.l10n("files-count-limit-error-too-many",{min:r,max:i,total:n}),payload:{total:n,min:r,max:i}}},Ku={file:"File validator execution has failed",collection:"Collection validator execution has failed",message:"Missing message. We recommend adding message: value."};class HO{constructor(e){U(this,"_blockInstance");U(this,"_fileValidators",[VO,UO,$O,jO]);U(this,"_collectionValidators",[BO,zO]);this._blockInstance=e,this._uploadCollection=this._blockInstance.uploadCollection;const n=()=>{this.runFileValidators(),this.runCollectionValidators()};this._blockInstance.subConfigValue("maxLocalFileSizeBytes",n),this._blockInstance.subConfigValue("multipleMin",n),this._blockInstance.subConfigValue("multipleMax",n),this._blockInstance.subConfigValue("multiple",n),this._blockInstance.subConfigValue("imgOnly",n),this._blockInstance.subConfigValue("accept",n)}runFileValidators(e){const n=e??this._uploadCollection.items();for(const r of n){const i=this._uploadCollection.read(r);i&&this._runFileValidatorsForEntry(i)}}runCollectionValidators(){const e=this._blockInstance.getOutputCollectionState(),n=[];for(const r of[...this._collectionValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.collectionValidators)])try{const i=r(e,this._blockInstance);if(!i)continue;i&&(n.push(i),i.message||console.warn(Ku.message))}catch(i){console.warn(Ku.collection,i)}this._blockInstance.$["*collectionErrors"]=n,n.length>0&&this._blockInstance.emit(at.COMMON_UPLOAD_FAILED,()=>this._blockInstance.getOutputCollectionState(),{debounce:!0})}_runFileValidatorsForEntry(e){const n=this._blockInstance.getOutputItem(e.uid),r=[];for(const i of[...this._fileValidators,...this._addCustomTypeToValidators(this._blockInstance.cfg.fileValidators)])try{const s=i(n,this._blockInstance);if(!s)continue;s&&(r.push(s),s.message||console.warn(Ku.message))}catch(s){console.warn(Ku.file,s)}e.setValue("errors",r)}_addCustomTypeToValidators(e){return e.map(n=>(...r)=>{const i=n(...r);return i?{...i,type:"CUSTOM_ERROR"}:void 0})}}class Je extends _e{constructor(){super(...arguments);U(this,"couldBeCtxOwner",!1);U(this,"isCtxOwner",!1);U(this,"init$",ib(this));U(this,"uploadAll",()=>{const n=this.uploadCollection.items().filter(r=>{const i=this.uploadCollection.read(r);return!i.getValue("isRemoved")&&!i.getValue("isUploading")&&!i.getValue("fileInfo")});n.length!==0&&(this.$["*uploadTrigger"]=new Set(n),this.emit(at.COMMON_UPLOAD_START,this.getOutputCollectionState()))});U(this,"_flushOutputItems",$n(async()=>{if(this.getOutputData().length!==this.uploadCollection.size)return;const r=this.getOutputCollectionState();this.$["*collectionState"]=r,this.emit(at.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.cfg.groupOutput&&r.totalCount>0&&r.status==="success"&&this._createGroup(r)},300));U(this,"_handleCollectionUpdate",(n,r,i)=>{var s;(r.size||i.size)&&(this.$["*groupInfo"]=null),this.validationManager&&(this.validationManager.runFileValidators(),this.validationManager.runCollectionValidators());for(const o of r)o.getValue("silent")||this.emit(at.FILE_ADDED,this.getOutputItem(o.uid));for(const o of i)this.$["*uploadTrigger"].delete(o.uid),(s=o.getValue("abortController"))==null||s.abort(),o.setMultipleValues({isRemoved:!0,abortController:null,isUploading:!1,uploadProgress:0}),URL.revokeObjectURL(o==null?void 0:o.getValue("thumbUrl")),this.emit(at.FILE_REMOVED,this.getOutputItem(o.uid));this.$["*uploadList"]=n.map(o=>({uid:o})),this._flushCommonUploadProgress(),this._flushOutputItems()});U(this,"_handleCollectionPropertiesUpdate",n=>{this._flushOutputItems();const r=this.uploadCollection,i=[...new Set(Object.entries(n).filter(([s])=>["uploadError","fileInfo"].includes(s)).map(([,s])=>[...s]).flat())];if(i.length>0&&setTimeout(()=>{this.validationManager&&this.validationManager.runFileValidators(i)}),n.uploadProgress){for(const s of n.uploadProgress){const{isUploading:o,silent:a}=Oe.getCtx(s).store;o&&!a&&this.emit(at.FILE_UPLOAD_PROGRESS,this.getOutputItem(s))}this._flushCommonUploadProgress()}if(n.isUploading)for(const s of n.isUploading){const{isUploading:o,silent:a}=Oe.getCtx(s).store;o&&!a&&this.emit(at.FILE_UPLOAD_START,this.getOutputItem(s))}if(n.fileInfo){for(const a of n.fileInfo){const{fileInfo:l,silent:u}=Oe.getCtx(a).store;l&&!u&&this.emit(at.FILE_UPLOAD_SUCCESS,this.getOutputItem(a))}this.cfg.cropPreset&&this.setInitialCrop();let s=r.findItems(a=>!!a.getValue("fileInfo")),o=r.findItems(a=>a.getValue("errors").length>0);r.size>0&&o.length===0&&r.size===s.length&&this.emit(at.COMMON_UPLOAD_SUCCESS,this.getOutputCollectionState())}if(n.errors)for(const s of n.errors){const{errors:o}=Oe.getCtx(s).store;o.length>0&&(this.emit(at.FILE_UPLOAD_FAILED,this.getOutputItem(s)),this.emit(at.COMMON_UPLOAD_FAILED,()=>this.getOutputCollectionState(),{debounce:!0}))}n.cdnUrl&&([...n.cdnUrl].filter(o=>{var a;return!!((a=this.uploadCollection.read(o))!=null&&a.getValue("cdnUrl"))}).forEach(o=>{this.emit(at.FILE_URL_CHANGED,this.getOutputItem(o))}),this.$["*groupInfo"]=null)});U(this,"_flushCommonUploadProgress",()=>{let n=0;const i=[...this.$["*uploadTrigger"]].filter(o=>!!this.uploadCollection.read(o));i.forEach(o=>{const a=this.uploadCollection.readProp(o,"uploadProgress");n+=a});const s=i.length?Math.round(n/i.length):0;this.$["*commonProgress"]!==s&&(this.$["*commonProgress"]=s,this.emit(at.COMMON_UPLOAD_PROGRESS,this.getOutputCollectionState()))})}get hasCtxOwner(){return this.hasBlockInCtx(n=>n instanceof Je?n.isCtxOwner&&n.isConnected&&n!==this:!1)}initCallback(){if(super.initCallback(),!this.$["*uploadCollection"]){let n=new SO({typedSchema:RO,watchList:["uploadProgress","uploadError","fileInfo","errors","cdnUrl","isUploading"]});this.$["*uploadCollection"]=n}this.has("*validationManager")||this.add("*validationManager",new HO(this)),!this.hasCtxOwner&&this.couldBeCtxOwner&&this.initCtxOwner()}get validationManager(){return this.has("*validationManager")?this.$["*validationManager"]:null}destroyCtxCallback(){var n,r;(n=this._unobserveCollectionProperties)==null||n.call(this),(r=this._unobserveCollection)==null||r.call(this),this.uploadCollection.destroy(),this.$["*uploadCollection"]=null,super.destroyCtxCallback()}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectionUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate),this.subConfigValue("maxConcurrentRequests",n=>{this.$["*uploadQueue"].concurrency=Number(n)||1}),this.$["*secureUploadsManager"]||(this.$["*secureUploadsManager"]=new DO(this))}addFileFromUrl(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({externalUrl:n,fileName:i??null,silent:r??!1,source:s??mr.API});return this.getOutputItem(o)}addFileFromUuid(n,{silent:r,fileName:i,source:s}={}){const o=this.uploadCollection.add({uuid:n,fileName:i??null,silent:r??!1,source:s??mr.API});return this.getOutputItem(o)}addFileFromCdnUrl(n,{silent:r,fileName:i,source:s}={}){const o=OO({url:n,cdnBase:this.cfg.cdnCname});if(!o)throw new Error("Invalid CDN URL");const a=this.uploadCollection.add({uuid:o.uuid,cdnUrl:n,cdnUrlModifiers:o.cdnUrlModifiers,fileName:i??o.filename??null,silent:r??!1,source:s??mr.API});return this.getOutputItem(a)}addFileFromObject(n,{silent:r,fileName:i,source:s,fullPath:o}={}){const a=this.uploadCollection.add({file:n,isImage:TO(n),mimeType:n.type,fileName:i??n.name,fileSize:n.size,silent:r??!1,source:s??mr.API,fullPath:o??null});return this.getOutputItem(a)}removeFileByInternalId(n){if(!this.uploadCollection.read(n))throw new Error(`File with internalId ${n} not found`);this.uploadCollection.remove(n)}removeAllFiles(){this.uploadCollection.clearAll()}openSystemDialog(n={}){let r=s1(cb([this.cfg.accept??"",...this.cfg.imgOnly?h1:[]]));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,n.captureCamera?(this.fileInput.capture=this.cfg.cameraCapture,this.fileInput.accept="image/*"):this.fileInput.accept=r,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(i=>this.addFileFromObject(i,{source:n.captureCamera?mr.CAMERA:mr.LOCAL})),this.$["*currentActivity"]=_e.activities.UPLOAD_LIST,this.setOrAddState("*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let n=[];return this.cfg.sourceList&&(n=ns(this.cfg.sourceList)),n}initFlow(n=!1){var r;if(this.uploadCollection.size>0&&!n)this.set$({"*currentActivity":_e.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(((r=this.sourceList)==null?void 0:r.length)===1){const i=this.sourceList[0];if(i==="local"){this.$["*currentActivity"]=_e.activities.UPLOAD_LIST,this==null||this.openSystemDialog();return}const s=this.blocksRegistry,o=l=>"type"in l&&l.type===i,a=[...s].find(o);a==null||a.activate(),this.$["*currentActivity"]&&this.setOrAddState("*modalActive",!0)}else this.set$({"*currentActivity":_e.activities.START_FROM}),this.setOrAddState("*modalActive",!0)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1)}get uploadCollection(){return this.$["*uploadCollection"]}async _createGroup(n){const r=await this.getUploadClientOptions(),i=n.allEntries.map(l=>l.uuid+(l.cdnUrlModifiers?`/${l.cdnUrlModifiers}`:"")),s=new AbortController,o=await UL(i,{...r,signal:s.signal});if(this.$["*collectionState"]!==n){s.abort();return}this.$["*groupInfo"]=o;const a=this.getOutputCollectionState();this.emit(at.GROUP_CREATED,a),this.emit(at.CHANGE,()=>this.getOutputCollectionState(),{debounce:!0}),this.$["*collectionState"]=a}setInitialCrop(){const n=lb(this.cfg.cropPreset);if(n){const[r]=n,i=this.uploadCollection.findItems(s=>{var o;return s.getValue("fileInfo")&&s.getValue("isImage")&&!((o=s.getValue("cdnUrlModifiers"))!=null&&o.includes("/crop/"))}).map(s=>this.uploadCollection.read(s));for(const s of i){const o=s.getValue("fileInfo"),{width:a,height:l}=o.imageInfo,u=r.width/r.height,d=wO(a,l,u),h=ts(`crop/${d.width}x${d.height}/${d.x},${d.y}`,"preview");s.setMultipleValues({cdnUrlModifiers:h,cdnUrl:On(s.getValue("cdnUrl"),h)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(p=>p.activityType===_e.activities.CLOUD_IMG_EDIT)&&(this.$["*focusedEntry"]=s,this.$["*currentActivity"]=_e.activities.CLOUD_IMG_EDIT)}}}async getMetadataFor(n){const r=this.cfg.metadata||void 0;if(typeof r=="function"){const i=this.getOutputItem(n);return await r(i)}return r}async getUploadClientOptions(){const r=await this.$["*secureUploadsManager"].getSecureToken().catch(()=>null);return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:EO,integration:this.cfg.userAgentIntegration,secureSignature:r==null?void 0:r.secureSignature,secureExpire:r==null?void 0:r.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputItem(n){const r=Oe.getCtx(n).store,i=r.fileInfo;let s=r.isRemoved?"removed":r.errors.length>0?"failed":r.fileInfo?"success":r.isUploading?"uploading":"idle";return{uuid:(i==null?void 0:i.uuid)??r.uuid??null,internalId:n,name:(i==null?void 0:i.originalFilename)??r.fileName,size:(i==null?void 0:i.size)??r.fileSize,isImage:(i==null?void 0:i.isImage)??r.isImage,mimeType:(i==null?void 0:i.mimeType)??r.mimeType,file:r.file,externalUrl:r.externalUrl,cdnUrlModifiers:r.cdnUrlModifiers,cdnUrl:r.cdnUrl??(i==null?void 0:i.cdnUrl)??null,fullPath:r.fullPath,uploadProgress:r.uploadProgress,fileInfo:i??null,metadata:r.metadata??(i==null?void 0:i.metadata)??null,isSuccess:s==="success",isUploading:s==="uploading",isFailed:s==="failed",isRemoved:s==="removed",errors:r.errors,status:s}}getOutputData(n){return(n?this.uploadCollection.findItems(n):this.uploadCollection.items()).map(s=>this.getOutputItem(s))}getOutputCollectionState(){return PO(this)}}Je.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"});Je.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...Je.extSrcList});const bf=t=>{var e;return(e=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:e.map(n=>n.toLowerCase()).join("-")},Rt=t=>String(t),Gn=t=>{const e=Number(t);if(Number.isNaN(e))throw new Error(`Invalid number: "${t}"`);return e},it=t=>{if(typeof t>"u"||t===null)return!1;if(typeof t=="boolean")return t;if(t==="true"||t==="")return!0;if(t==="false")return!1;throw new Error(`Invalid boolean: "${t}"`)},WO=t=>t==="auto"?t:it(t),qO=t=>{const e=Rt(t);if(e!=="user"&&e!=="environment"&&e!=="")throw new Error(`Invalid "cameraCapture" value: "${e}"`);return e},GO=t=>{if(typeof t=="object"&&!Array.isArray(t)||typeof t=="function")return t;throw new Error("Invalid metadata value. Must be an object or function.")},KO=t=>{if(typeof t=="object")return t;throw new Error("Invalid value. Must be an object.")},Ip=t=>{if(typeof t=="function")return t;throw new Error("Invalid value. Must be a function.")},r_=t=>{if(Array.isArray(t))return t;throw new Error("Must be an array.")},QO={pubkey:Rt,multiple:it,multipleMin:Gn,multipleMax:Gn,confirmUpload:it,imgOnly:it,accept:Rt,externalSourcesPreferredTypes:Rt,store:WO,cameraMirror:it,cameraCapture:qO,sourceList:Rt,maxLocalFileSizeBytes:Gn,thumbSize:Gn,showEmptyList:it,useLocalImageEditor:it,useCloudImageEditor:it,cloudImageEditorTabs:Rt,removeCopyright:it,cropPreset:Rt,imageShrink:Rt,modalScrollLock:it,modalBackdropStrokes:it,sourceListWrap:it,remoteTabSessionKey:Rt,cdnCname:Rt,baseUrl:Rt,socialBaseUrl:Rt,secureSignature:Rt,secureExpire:Rt,secureDeliveryProxy:Rt,retryThrottledRequestMaxTimes:Gn,multipartMinFileSize:Gn,multipartChunkSize:Gn,maxConcurrentRequests:Gn,multipartMaxConcurrentRequests:Gn,multipartMaxAttempts:Gn,checkForUrlDuplicates:it,saveUrlForRecurrentUploads:it,groupOutput:it,userAgentIntegration:Rt,debug:it,localeName:Rt,metadata:GO,secureUploadsExpireThreshold:Gn,localeDefinitionOverride:KO,secureUploadsSignatureResolver:Ip,secureDeliveryProxyUrlResolver:Ip,iconHrefResolver:Ip,fileValidators:r_,collectionValidators:r_},XO=(t,e)=>{if(!(typeof e>"u"||e===null))try{return QO[t](e)}catch(n){return console.error(`Invalid value for config key "${t}".`,n),Gi[t]}},f1=[...new Set(["debug",...Object.keys(Gi)])],YO=["metadata","localeDefinitionOverride","secureUploadsSignatureResolver","secureDeliveryProxyUrlResolver","iconHrefResolver","fileValidators","collectionValidators"],ZO=t=>YO.includes(t),wa=f1.filter(t=>!ZO(t)),JO={...Object.fromEntries(wa.map(t=>[bf(t),t])),...Object.fromEntries(wa.map(t=>[t.toLowerCase(),t]))},eM={...Object.fromEntries(wa.map(t=>[bf(t),Nn(t)])),...Object.fromEntries(wa.map(t=>[t.toLowerCase(),Nn(t)]))},i_=t=>"__"+t;class p1 extends Qe{constructor(){super();U(this,"requireCtxName",!0);this.init$={...this.init$,...Object.fromEntries(Object.entries(Gi).map(([n,r])=>[Nn(n),r]))}}_flushValueToAttribute(n,r){if(wa.includes(n)){const i=[...new Set([bf(n),n.toLowerCase()])];for(const s of i)typeof r>"u"||r===null?this.removeAttribute(s):this.getAttribute(s)!==r.toString()&&this.setAttribute(s,r.toString())}}_flushValueToState(n,r){this.$[Nn(n)]!==r&&(typeof r>"u"||r===null?this.$[Nn(n)]=Gi[n]:this.$[Nn(n)]=r)}_setValue(n,r){const i=this,s=XO(n,r),o=i_(n);i[o]!==s&&(this._assertSameValueDifferentReference(n,i[o],s),i[o]=s,this._flushValueToAttribute(n,s),this._flushValueToState(n,s),this.debugPrint(`[lr-config] "${n}"`,s))}_getValue(n){const r=this,i=i_(n);return r[i]}_assertSameValueDifferentReference(n,r,i){this.cfg.debug&&i!==r&&typeof i=="object"&&typeof r=="object"&&JSON.stringify(i)===JSON.stringify(r)&&(console.warn(`[lr-config] Option "${n}" value is the same as the previous one but the reference is different`),console.warn("[lr-config] You should avoid changing the reference of the object to prevent unnecessary calculations"),console.warn(`[lr-config] "${n}" previous value:`,r),console.warn(`[lr-config] "${n}" new value:`,i))}initCallback(){super.initCallback();const n=this;for(const r of wa)this.sub(Nn(r),i=>{this._setValue(r,i)},!1);for(const r of f1){const i=n[r]??this.$[Nn(r)];i!==Gi[r]&&this._setValue(r,i),Object.defineProperty(this,r,{set:s=>{this._setValue(r,s)},get:()=>this._getValue(r)})}}attributeChangedCallback(n,r,i){if(r===i)return;const s=this,o=JO[n];s[o]=i}}p1.bindAttributes(eM);for(const t of f1)p1.prototype[t]=void 0;const db=p1;class m1 extends Qe{constructor(){super(),this.init$={...this.init$,name:"",href:"",title:""}}initCallback(){super.initCallback(),this.sub("name",e=>{if(!e)return;let n=`#uc-icon-${e}`;this.subConfigValue("iconHrefResolver",r=>{r&&(n=r(e)??n),this.$.href=n})})}}m1.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg">
    <title>{{title}}</title>
    <use set="@href: href;"></use>
  </svg>
`;m1.bindAttributes({name:"name",title:"title"});const tM=t=>[...new Set(t)],nM=t=>Object.entries(t).filter(([e,n])=>n!==void 0&&n!=="").map(([e,n])=>e==="cdn-operations"||e==="analytics"?n:`${e}/${n}`),rM="https://ucarecdn.com",ph=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:rM},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{},"cdn-operations":{},progressive:{},quality:{},"is-background-for":{},"is-preview-blur":{default:1}}),Ml="--lr-img-",s_="unresolved",Qu=2,Xu=3,o_=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),a_=3e3,l_=5e3,c_=Object.freeze({PREVIEW:"PREVIEW",MAIN:"MAIN"}),hb=Object.create(null);var w_;for(let t in ph)hb[Ml+t]=((w_=ph[t])==null?void 0:w_.default)||"";class iM extends pf{constructor(){super(...arguments);U(this,"cssInit$",hb)}$$(n){return this.$[Ml+n]}set$$(n){for(let r in n)this.$[Ml+r]=n[r]}sub$$(n,r){this.sub(Ml+n,i=>{i===null||i===""||r(i)})}analyticsParams(){return`-/@clib/${t1}/${n1}/lr-img/`}initAttributes(n){[...this.attributes].forEach(r=>{ph[r.name]||n.setAttribute(r.name,r.value)})}initIntersection(n,r){let i={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(r(),this._isnObserver.unobserve(n))})},i),this._isnObserver.observe(n),this._observed||(this._observed=new Set),this._observed.add(n)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(n=>{this._isnObserver.unobserve(n)}),this._isnObserver=null),Oe.deleteCtx(this)}static get observedAttributes(){return Object.keys(ph)}attributeChangedCallback(n,r,i){window.setTimeout(()=>{this.$[Ml+n]=i})}}class sM extends iM{constructor(){super(...arguments);U(this,"_img",new Image);U(this,"_imgPreview",new Image)}_fmtAbs(n){return!n.includes("//")&&!o_&&(n=new URL(n,document.baseURI).href),n}_validateSize(n){if((n==null?void 0:n.trim())!==""){let r=n.match(/\d+/)[0],i=n.match(/[a-zA-Z]+/)[0];const s=parseInt(r,10);if(Number(s)>l_&&this.hasFormatJPG)return l_+i;if(Number(s)>a_&&!this.hasFormatJPG)return a_+i}return n}_getCdnModifiers(n,r){const i={format:this.$$("format"),quality:this.$$("quality"),resize:this._validateSize(n),blur:r,"cdn-operations":this.$$("cdn-operations"),analytics:this.analyticsParams()};return ts(...nM(i))}_getUrlBase(n="",r=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(o_&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let i=this._getCdnModifiers(n,r);if(this.$$("src").startsWith(this.$$("cdn-cname")))return On(this.$$("src"),i);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(On(Lc(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("uuid"))return this._proxyUrl(On(Lc(this.$$("cdn-cname"),this.$$("uuid")),i));if(this.$$("proxy-cname"))return this._proxyUrl(On(this.$$("proxy-cname"),i,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(On(`https://${this.$$("pubkey")}.ucr.io/`,i,this._fmtAbs(this.$$("src"))))}_proxyUrl(n){return this.$$("secure-delivery-proxy")?Z0(this.$$("secure-delivery-proxy"),{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}_getElSize(n,r=1,i=!0){let s=n.getBoundingClientRect(),o=r*Math.round(s.width),a=i?"":r*Math.round(s.height);return o||a?`${o||""}x${a||""}`:null}_setupEventProxy(n){let r=s=>{s.stopPropagation();let o=new Event(s.type,s);this.dispatchEvent(o)},i=["load","error"];for(let s of i)n.addEventListener(s,r)}get img(){return this.hasPreviewImage||(this._setupConfigForImage({elNode:this._img}),this.appendChild(this._img)),this._img}get currentImg(){return this.hasPreviewImage?{type:c_.PREVIEW,img:this._imgPreview}:{type:c_.MAIN,img:this.img}}get hasPreviewImage(){return this.$$("is-preview-blur")}get bgSelector(){return this.$$("is-background-for")}get breakpoints(){if(this.$$("breakpoints")){const n=ns(this.$$("breakpoints"));return tM(n.map(r=>parseInt(r,10)))}else return null}get hasFormatJPG(){return this.$$("format").toLowerCase()==="jpeg"}renderBg(n){let r=new Set;r.add(`url("${this._getUrlBase(this._getElSize(n))}") 1x`),this.$$("hi-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,Qu))}") ${Qu}x`),this.$$("ultra-res-support")&&r.add(`url("${this._getUrlBase(this._getElSize(n,Xu))}") ${Xu}x`);let i=`image-set(${[...r].join(", ")})`;n.style.setProperty("background-image",i),n.style.setProperty("background-image","-webkit-"+i)}getSrcset(){let n=new Set;return this.breakpoints?this.breakpoints.forEach(r=>{n.add(this._getUrlBase(r+"x")+` ${this._validateSize(r+"w")}`),this.$$("hi-res-support")&&n.add(this._getUrlBase(r*Qu+"x")+` ${this._validateSize(r*Qu+"w")}`),this.$$("ultra-res-support")&&n.add(this._getUrlBase(r*Xu+"x")+` ${this._validateSize(r*Xu+"w")}`)}):(n.add(this._getUrlBase(this._getElSize(this.currentImg.img))+" 1x"),this.$$("hi-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,2))+" 2x"),this.$$("ultra-res-support")&&n.add(this._getUrlBase(this._getElSize(this.currentImg.img,3))+" 3x")),[...n].join()}getSrc(){return this._getUrlBase()}get srcUrlPreview(){return this._getUrlBase("100x","100")}renderBackground(){[...document.querySelectorAll(this.bgSelector)].forEach(n=>{this.$$("intersection")?this.initIntersection(n,()=>{this.renderBg(n)}):this.renderBg(n)})}_appendURL({elNode:n,src:r,srcset:i}){r&&(n.src=r),i&&(n.srcset=i)}_setupConfigForImage({elNode:n}){this._setupEventProxy(n),this.initAttributes(n)}loaderImage({src:n,srcset:r,elNode:i}){return new Promise((s,o)=>{this._setupConfigForImage({elNode:i}),i.setAttribute(s_,""),i.addEventListener("load",()=>{i.removeAttribute(s_),s(i)}),i.addEventListener("error",()=>{o(!1)}),this._appendURL({elNode:i,src:n,srcset:r})})}async renderImage(){var n,r;if(this.$$("intersection")){this.hasPreviewImage&&(this._setupConfigForImage({elNode:this._imgPreview}),this.appendChild(this._imgPreview)),this.initIntersection(this.currentImg.img,async()=>{var i;this.hasPreviewImage&&(this._imgPreview.src=this.srcUrlPreview);try{await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await this._imgPreview.remove(),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((i=this._imgPreview)==null?void 0:i.remove()),this.appendChild(this._img)}});return}try{this.hasPreviewImage&&(await this.loaderImage({src:this.srcUrlPreview,elNode:this._imgPreview}),this.appendChild(this._imgPreview)),await this.loaderImage({src:this.getSrc(),srcset:this.getSrcset(),elNode:this._img}),this.hasPreviewImage&&await((n=this._imgPreview)==null?void 0:n.remove()),this.appendChild(this._img)}catch{this.hasPreviewImage&&await((r=this._imgPreview)==null?void 0:r.remove()),this.appendChild(this._img)}}init(){this.bgSelector?this.renderBackground():this.renderImage()}}class oM extends sM{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{!this.$$("is-background-for")&&!this.$$("is-preview-blur")&&(this.img.loading=e?"lazy":"eager")})}}const Yl=class Yl extends Je{constructor(){super();U(this,"couldBeCtxOwner",!0);this.init$={...this.init$,withDropZone:!0,onClick:()=>{this.initFlow()},"button-text":""}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",n=>{typeof n>"u"||(this.$.withDropZone=it(n))}),this.subConfigValue("multiple",n=>{this.$["button-text"]=n?"upload-files":"upload-file"})}};U(Yl,"styleAttrs",[...mi(Yl,Yl,"styleAttrs"),"lr-simple-btn"]);let Oc=Yl;Oc.template=`
  <lr-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <lr-icon name="upload"></lr-icon>
      <span l10n="button-text"></span>
      <slot></slot>
      <div class="visual-drop-area" l10n="drop-files-here"></div>
    </button>
  </lr-drop-area>
`;Oc.bindAttributes({dropzone:null});class fb extends _e{constructor(){super(...arguments);U(this,"historyTracked",!0);U(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}fb.template=' <div class="content"><slot></slot></div> ';function aM(t){return new Promise(e=>{typeof window.FileReader!="function"&&e(!1);try{let n=new FileReader;n.onerror=()=>{e(!0)};let r=i=>{i.type!=="loadend"&&n.abort(),e(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(t)}catch{e(!1)}})}function lM(t,e){return new Promise(n=>{let r=0;const i=[],s=a=>{a||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),n(null)),a.isFile?(r++,a.file(l=>{r--;const u=new File([l],l.name,{type:l.type||e});i.push({type:"file",file:u,fullPath:a.fullPath}),r===0&&n(i)})):a.isDirectory&&o(a.createReader())};let o=a=>{r++,a.readEntries(l=>{r--;for(let u of l)s(u);r===0&&n(i)})};s(t)})}function cM(t){const e=[],n=[];for(let r=0;r<t.items.length;r++){let i=t.items[r];if(i)if(i.kind==="file"){const s=i.type;if(typeof i.webkitGetAsEntry=="function"||typeof i.getAsEntry=="function"){let a=typeof i.webkitGetAsEntry=="function"?i.webkitGetAsEntry():i.getAsEntry();n.push(lM(a,s).then(l=>{l&&e.push(...l)}));continue}const o=i.getAsFile();o&&n.push(aM(o).then(a=>{a||e.push({type:"file",file:o})}))}else i.kind==="string"&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{e.push({type:"url",url:o}),s(void 0)})}))}return Promise.all(n).then(()=>e)}const rn={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let u_=["focus"],uM=100,Sp=new Map;function dM(t,e){let n=Math.max(Math.min(t[0],e.x+e.width),e.x),r=Math.max(Math.min(t[1],e.y+e.height),e.y);return Math.sqrt((t[0]-n)*(t[0]-n)+(t[1]-r)*(t[1]-r))}function d_(t){let e=0,n=document.body,r=new Set,i=y=>r.add(y),s=rn.INACTIVE,o=y=>{t.shouldIgnore()&&y!==rn.INACTIVE||(s!==y&&r.forEach(I=>I(y)),s=y)},a=()=>e>0;i(y=>t.onChange(y));let l=()=>{e=0,o(rn.INACTIVE)},u=()=>{e+=1,s===rn.INACTIVE&&o(rn.ACTIVE)},d=()=>{e-=1,a()||o(rn.INACTIVE)},h=y=>{y.preventDefault(),e=0,o(rn.INACTIVE)},p=y=>{if(t.shouldIgnore())return;a()||(e+=1);let I=[y.x,y.y],P=t.element.getBoundingClientRect(),C=Math.floor(dM(I,P)),v=C<uM,S=y.composedPath().includes(t.element);Sp.set(t.element,C);let D=Math.min(...Sp.values())===C;S&&D?(y.preventDefault(),o(rn.OVER)):o(v&&D?rn.NEAR:rn.ACTIVE)},g=async y=>{if(t.shouldIgnore())return;y.preventDefault();let I=await cM(y.dataTransfer);t.onItems(I),o(rn.INACTIVE)};return n.addEventListener("drop",h),n.addEventListener("dragleave",d),n.addEventListener("dragenter",u),n.addEventListener("dragover",p),t.element.addEventListener("drop",g),u_.forEach(y=>{window.addEventListener(y,l)}),()=>{Sp.delete(t.element),n.removeEventListener("drop",h),n.removeEventListener("dragleave",d),n.removeEventListener("dragenter",u),n.removeEventListener("dragover",p),t.element.removeEventListener("drop",g),u_.forEach(y=>{window.removeEventListener(y,l)})}}const pb="lr-drop-area",To=`${pb}/registry`,Zl=class Zl extends Je{constructor(){super(),this.init$={...this.init$,state:rn.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:"",[To]:null}}isActive(){if(!this.$.isEnabled)return!1;const e=this.getBoundingClientRect(),n=e.width>0&&e.height>0,r=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),i=window.getComputedStyle(this),s=i.visibility!=="hidden"&&i.display!=="none";return n&&s&&r}initCallback(){super.initCallback(),this.bindL10n("text",()=>this.l10n("drop-files-here")),this.$[To]||(this.$[To]=new Set),this.$[To].add(this),this.defineAccessor("disabled",n=>{this.set$({isEnabled:!it(n)})}),this.defineAccessor("clickable",n=>{this.set$({isClickable:it(n)})}),this.defineAccessor("with-icon",n=>{this.set$({withIcon:it(n)})}),this.defineAccessor("fullscreen",n=>{this.set$({isFullscreen:it(n)})}),this.defineAccessor("text",n=>{typeof n=="string"?this.bindL10n("text",()=>this.l10n(n)||n):this.bindL10n("text",()=>this.l10n("drop-files-here"))}),this._destroyDropzone=d_({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:n=>{this.$.state=n},onItems:n=>{n.length&&(n.forEach(r=>{r.type==="url"?this.addFileFromUrl(r.url,{source:mr.DROP_AREA}):r.type==="file"&&this.addFileFromObject(r.file,{source:mr.DROP_AREA,fullPath:r.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":_e.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=d_({element:e,onChange:n=>{var i;const r=(i=Object.entries(rn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&e.setAttribute("drag-state",r)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",n=>{var i;const r=(i=Object.entries(rn).find(([,s])=>s===n))==null?void 0:i[0].toLowerCase();r&&this.setAttribute("drag-state",r)}),this.subConfigValue("sourceList",n=>{const r=ns(n);this.$.isEnabled=r.includes(Je.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",n=>{this.toggleAttribute("hidden",!n)}),this.sub("isClickable",n=>{this.toggleAttribute("clickable",n)}),this.$.isClickable&&(this._onAreaClicked=n=>{n.type==="keydown"?(n.code==="Space"||n.code==="Enter")&&this.openSystemDialog():n.type==="click"&&this.openSystemDialog()},this.addEventListener("keydown",this._onAreaClicked),this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$[To]].filter(r=>r!==this).filter(r=>r.isActive()).length>0:!1}_couldHandleFiles(){let e=this.cfg.multiple,n=this.cfg.multipleMax,r=this.uploadCollection.size;return!(e&&n&&r>=n||!e&&r>0)}destroyCallback(){var n,r;super.destroyCallback();const e=this.$[To];e&&(e.delete(this),e.size===0&&Oe.deleteCtx(pb)),(n=this._destroyDropzone)==null||n.call(this),(r=this._destroyContentWrapperDropzone)==null||r.call(this),this._onAreaClicked&&(this.removeEventListener("keydown",this._onAreaClicked),this.removeEventListener("click",this._onAreaClicked))}};U(Zl,"styleAttrs",[...mi(Zl,Zl,"styleAttrs"),"lr-drop-area"]);let Mc=Zl;Mc.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">
      <div class="icon-container" set="@hidden: !withIcon">
        <lr-icon name="default"></lr-icon>
        <lr-icon name="arrow-down"></lr-icon>
      </div>
      <span class="text">{{text}}</span>
    </div>
  </slot>
`;Mc.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const hM="src-type-";class g1 extends Je{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"type");U(this,"_registeredTypes",{});this.init$={...this.init$,iconName:"default","src-type":""}}initTypes(){this.registerType({type:Je.sourceTypes.LOCAL,activate:()=>(this.openSystemDialog(),!1)}),this.registerType({type:Je.sourceTypes.URL,activity:_e.activities.URL,textKey:"from-url"}),this.registerType({type:Je.sourceTypes.CAMERA,activity:_e.activities.CAMERA,activate:()=>{const n="capture"in document.createElement("input");return n&&this.openSystemDialog({captureCamera:!0}),!n}}),this.registerType({type:"draw",activity:_e.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(Je.extSrcList))this.registerType({type:n,activity:_e.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}activate(){if(!this.type)return;const n=this._registeredTypes[this.type],{activity:r,activate:i,activityParams:s={}}=n;(i?i():!!r)&&this.set$({"*currentActivityParams":s,"*currentActivity":r})}applyType(n){const r=this._registeredTypes[n];if(!r){console.warn("Unsupported source type: "+n);return}const{textKey:i=n,icon:s=n}=r;this.$["src-type"]=`${hM}${i}`,this.$.iconName=s,this.onclick=()=>{this.activate()}}}g1.template=`
  <button>
    <lr-icon set="@name: iconName"></lr-icon>
    <div class="txt" l10n="src-type"></div>
  </button>
`;g1.bindAttributes({type:null});class fM extends Qe{initCallback(){super.initCallback(),this.subConfigValue("sourceList",e=>{let n=ns(e),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}const Tf=()=>{const t=[];return{stack:t,promiseReadJpegChunks:n=>new Promise((r,i)=>{let s=2;const o=(u,d)=>{const h=new FileReader;h.addEventListener("load",()=>{d(new DataView(h.result))}),h.addEventListener("error",p=>{i(`Reader error: ${p}`)}),h.readAsArrayBuffer(u)},a=()=>o(n.slice(s,s+128),u=>{let d,h,p;for(d=h=0,p=u.byteLength;p>=0?h<p:h>p;d=p>=0?++h:--h)if(u.getUint8(d)===255){s+=d;break}l()}),l=()=>{const u=s;return o(n.slice(s,s+=4),d=>{if(d.byteLength!==4||d.getUint8(0)!==255){i("Corrupted");return}const h=d.getUint8(1);if(h===218){r(!0);return}const p=d.getUint16(2)-2;return o(n.slice(s,s+=p),g=>{if(g.byteLength!==p){i("Corrupted");return}t.push({startPos:u,length:p,marker:h,view:g}),a()})})};FileReader&&DataView||i("Not Support"),o(n.slice(0,2),u=>{u.getUint16(0)!==65496&&i("Not jpeg"),a()})})}},pM=async t=>{const e=[],{promiseReadJpegChunks:n,stack:r}=Tf();return await n(t),r.forEach(({marker:i,view:s})=>{i===226&&s.getUint32(0)===1229144927&&s.getUint32(4)===1347571526&&s.getUint32(8)===1229735168&&e.push(s)}),e},mb=async(t,e,n)=>{{const r=[],i=[],{promiseReadJpegChunks:s,stack:o}=Tf();await s(t),o.forEach(u=>{if(u.marker===e)return r.push(u.startPos),i.push(u.length)});const a=[t.slice(0,2)];for(const u of n){const d=new DataView(new ArrayBuffer(4));d.setUint16(0,65280+e),d.setUint16(2,u.byteLength+2),a.push(d.buffer),a.push(u)}let l=2;for(let u=0;u<r.length;u++)r[u]>l&&a.push(t.slice(l,r[u])),l=r[u]+i[u]+4;return a.push(t.slice(l,t.size)),new Blob(a,{type:t.type})}},mM=226,gb=(t,e)=>mb(t,mM,e.map(n=>n.buffer)),gM=async t=>{try{return await gb(t,[])}catch(e){throw new Error(`Failed to strip ICC profile: ${e}`)}},yM=(t,e,n)=>new Promise((r,i)=>{const s=o=>{if(!o){i("Failed to convert canvas to blob");return}r(o)};t.toBlob(s,e,n),t.width=t.height=1}),Dc=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,ctx:e}},vM=t=>{const{ctx:n,canvas:r}=Dc();r.width=r.height=50,n.drawImage(t,0,0,50,50);const i=n.getImageData(0,0,50,50).data;r.width=r.height=1;for(let s=3;s<i.length;s+=4)if(i[s]<254)return!0;return!1},_M=async t=>{let e=null;const{promiseReadJpegChunks:n,stack:r}=Tf();return await n(t),r.forEach(({marker:i,view:s})=>{if(!e&&i===225&&s.byteLength>=14&&s.getUint32(0)===1165519206&&s.getUint16(4)===0){e=s;return}}),e},wM="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Yu;const EM=()=>new Promise(t=>{if(Yu!==void 0)t(Yu);else{const e=new Image;e.addEventListener("load",()=>{Yu=e.naturalWidth<e.naturalHeight,e.src="//:0",t(Yu)}),e.src=wM}}),bM=(t,e)=>{let n,r,i,s;if(!t||t.byteLength<14||t.getUint32(0)!==1165519206||t.getUint16(4)!==0)return;if(t.getUint16(6)===18761)r=!0;else if(t.getUint16(6)===19789)r=!1;else return;if(t.getUint16(8,r)!==42)return;i=8+t.getUint32(10,r);const o=t.getUint16(i-2,r);for(n=0,s=o;s>=0?n<s:n>s;s>=0?++n:--n){if(t.byteLength<i+10)return;t.getUint16(i,r)===274&&e(i+8,r),i+=12}},TM=(t,e)=>{bM(t,(n,r)=>t.setUint16(n,e,r))},CM=async(t,e,n)=>(n&&TM(e,1),mb(t,225,[e.buffer])),IM=(t,e)=>new Promise((n,r)=>{e&&(t.src=e),t.complete?n(t):(t.addEventListener("load",()=>{n(t)}),t.addEventListener("error",()=>{r(new Error("Failed to load image. Probably not an image."))}))}),SM=t=>IM(new Image,t),AM=[1,3],xM=[192,193,194,195,197,198,199,201,202,203,205,206,207],h_={squareSide:[Math.floor(Math.sqrt(5*1e3*1e3)),4096,8192,11180,10836,11402,14188,16384],dimension:[4096,8192,16384,32767,65535]},kM=async t=>{let e=!1;const{promiseReadJpegChunks:n,stack:r}=Tf();return await n(t).then(()=>(r.forEach(({marker:i,view:s})=>{if(!e&&xM.indexOf(i)>=0){const o=s.getUint8(5);AM.indexOf(o)<0&&(e=!0)}}),e)).catch(()=>e)},yb=(t,e)=>{const n={};return(...r)=>{const i=e(r,n);return i in n?n[i]:n[i]=t(...r)}},vb=(t,e)=>{const[n]=t,r=Object.keys(e).map(i=>parseInt(i,10)).sort((i,s)=>i-s);for(let i=0;i<r.length;i++){const s=r[i],o=!!e[s];if(s>n&&o||s<n&&!o)return s}return n},Li={R:55,G:110,B:165,A:255},PM=`rgba(${Li.R}, ${Li.G}, ${Li.B}, ${Li.A/255})`,_b=(t,e)=>{try{const n=[t-1,e-1,1,1],{canvas:r,ctx:i}=Dc();r.width=1,r.height=1;const{canvas:s,ctx:o}=Dc();s.width=t,s.height=e,o&&(o.fillStyle=PM,o.fillRect(...n),i.drawImage(s,t-1,e-1,1,1,0,0,1,1));const a=i&&i.getImageData(0,0,1,1).data;let l=!1;return a&&(l=a[0]===Li.R&&a[1]===Li.G&&a[2]===Li.B&&a[3]===Li.A),s.width=s.height=1,l}catch{return console.error(`Failed to test for max canvas size of ${t}x${e}.`),!1}};function wb(t){return(...e)=>new Promise(n=>{setTimeout(()=>{const r=t(...e);n(r)},0)})}const RM=wb(yb(_b,vb)),NM=wb(yb(_b,vb)),Eb=async(t,e)=>{const n=h_.squareSide.find(o=>o*o>=t*e),r=h_.dimension.find(o=>o>=t&&o>=e);if(!n||!r)throw new Error("Not supported");const[i,s]=await Promise.all([RM(n,n),NM(r,1)]);if(i&&s)return!0;throw new Error("Not supported")},bb=async(t,e,n)=>{try{const{ctx:r,canvas:i}=Dc();return i.width=e,i.height=n,r.imageSmoothingQuality="high",r.drawImage(t,0,0,e,n),t instanceof HTMLImageElement&&(t.src="//:0"),t instanceof HTMLCanvasElement&&(t.width=t.height=1),i}catch(r){throw new Error("Canvas resize error",{cause:r})}},LM=({img:t,targetW:e,targetH:n})=>bb(t,e,n),OM=function({sourceW:t,targetW:e,targetH:n,step:r}){const i=[];let s=e,o=n;do i.push([s,o]),s=Math.round(s/r),o=Math.round(o/r);while(s<t*r);return i.reverse()},MM=({img:t,sourceW:e,targetW:n,targetH:r,step:i})=>OM({sourceW:e,targetW:n,targetH:r,step:i}).reduce((o,[a,l])=>o.then(u=>Eb(a,l).then(()=>bb(u,a,l)).catch(()=>u)),Promise.resolve(t)),DM=()=>/iPad|iPhone|iPod/.test(navigator.platform)?!0:navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),VM=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),Ap=.71,UM=(t,e)=>{if(t.width*Ap*t.height*Ap<e.size)throw new Error("Not required");const n=t.width,r=t.height,i=n/r,s=Math.floor(Math.sqrt(e.size*i)),o=Math.floor(e.size/Math.sqrt(e.size*i));return Eb(s,o).then(()=>{const{ctx:a}=Dc();return"imageSmoothingQuality"in a&&!DM()&&!VM?LM({img:t,targetW:s,targetH:o}):MM({img:t,sourceW:n,targetW:s,targetH:o,step:Ap})}).catch(()=>Promise.reject("Not supported"))},FM=async(t,e)=>{try{if(await kM(t))throw new Error("Should skipped");const r=await Promise.allSettled([_M(t),EM(),pM(t)]),s=!r.some(I=>I.status==="rejected"),[o,a,l]=r,u=await gM(t).catch(()=>t),d=await SM(URL.createObjectURL(u));URL.revokeObjectURL(d.src);const h=await UM(d,e);let p="image/jpeg",g=(e==null?void 0:e.quality)||.8;!s&&vM(h)&&(p="image/png",g=void 0);let y=await yM(h,p,g);if(s&&o.status==="fulfilled"&&o.value){const I=o.value,P=a.status==="fulfilled"?a.value:!1;y=await CM(y,I,P)}return s&&l.status==="fulfilled"&&l.value.length>0&&(y=await gb(y,l.value)),y}catch(n){let r;throw n instanceof Error&&(r=n.message),typeof n=="string"&&(r=n),new Error(`Failed to shrink image. ${r?`Message: "${r}".`:""}`,{cause:n})}};function $M(t){let e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}function f_(t="hsl(209, 21%, 65%)",e=32,n=32){return $M(`
  <svg width="${e}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${t}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function jM(t,e=40){if(t.type==="image/svg+xml")return URL.createObjectURL(t);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=e,n.height=e*l):(n.height=e,n.width=e/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(u=>{if(!u){a();return}let d=URL.createObjectURL(u);o(d)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(t),s}const p_=16384,zM=/^([0-9]+)x([0-9]+)(?:\s+(\d{1,2}|100)%)?$/i,BM=t=>{const e=zM.exec(t==null?void 0:t.toLocaleLowerCase())||[];if(!e.length)return!1;const n=e[1]*e[2],r=p_*p_;return n>r?(console.warn(`Shrinked size can not be larger than ${Math.floor(r/1e3/1e3)}MP. You have set ${e[1]}x${e[2]} (${Math.ceil(n/1e3/100)/10}MP).`),!1):{quality:e[3]?e[3]/100:void 0,size:n}},xn=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)});class Fs extends Je{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"pauseRender",!0);U(this,"_entrySubs",new Set);U(this,"_entry",null);U(this,"_isIntersecting",!1);U(this,"_debouncedGenerateThumb",$n(this._generateThumbnail.bind(this),100));U(this,"_debouncedCalculateState",$n(this._calculateState.bind(this),100));U(this,"_renderedOnce",!1);this.init$={...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:xn.IDLE,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.hasBlockInCtx(n=>n.activityType===_e.activities.DETAILS)?this.$["*currentActivity"]=_e.activities.DETAILS:this.$["*currentActivity"]=_e.activities.CLOUD_IMG_EDIT},onRemove:()=>{this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let n of this._entrySubs)n.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(n){let[r]=n;this._isIntersecting=r.isIntersecting,r.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),r.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let n=this._entry,r=xn.IDLE;n.getValue("errors").length>0?r=xn.FAILED:n.getValue("isUploading")?r=xn.UPLOADING:n.getValue("fileInfo")&&(r=xn.FINISHED),this.$.state=r}async _generateThumbnail(){var r;if(!this._entry)return;let n=this._entry;if(n.getValue("fileInfo")&&n.getValue("isImage")){let i=this.cfg.thumbSize,s=this.proxyUrl(On(Lc(this.cfg.cdnCname,this._entry.getValue("uuid")),ts(n.getValue("cdnUrlModifiers"),`scale_crop/${i}x${i}/center`))),o=n.getValue("thumbUrl");o!==s&&(n.setValue("thumbUrl",s),o!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(o));return}if(!n.getValue("thumbUrl"))if((r=n.getValue("file"))!=null&&r.type.includes("image"))try{let i=await jM(n.getValue("file"),this.cfg.thumbSize);n.setValue("thumbUrl",i)}catch{let s=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");n.setValue("thumbUrl",f_(s))}else{let i=window.getComputedStyle(this).getPropertyValue("--uc-muted-foreground");n.setValue("thumbUrl",f_(i))}}_subEntry(n,r){let i=this._entry.subscribe(n,s=>{this.isConnected&&r(s)});this._entrySubs.add(i)}_handleEntryId(n){var i;this._reset();let r=(i=this.uploadCollection)==null?void 0:i.read(n);this._entry=r,r&&(this._subEntry("uploadProgress",s=>{this.$.progressValue=s}),this._subEntry("fileName",s=>{this.$.itemName=s||r.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",s=>{this.$.itemName=r.getValue("fileName")||s||this.l10n("file-no-name")}),this._subEntry("fileInfo",s=>{this._debouncedCalculateState(),s&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",s=>{this.$.thumbUrl=s?`url(${s})`:""}),this._subEntry("errors",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",n=>{this._handleEntryId(n)}),this.sub("state",n=>{this._handleState(n)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{Fs.activeInstances.forEach(n=>{n===this?n.setAttribute("focused",""):n.removeAttribute("focused")})},this.sub("*uploadTrigger",n=>{n.has(this._entry.uid)&&setTimeout(()=>this.isConnected&&this.upload())}),Fs.activeInstances.add(this)}_handleState(n){var r,i,s,o;n===xn.FAILED?this.$.badgeIcon="badge-error":n===xn.FINISHED&&(this.$.badgeIcon="badge-success"),n===xn.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0,this.set$({isFailed:n===xn.FAILED,isUploading:n===xn.UPLOADING,isFinished:n===xn.FINISHED,progressVisible:n===xn.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&((r=this._entry)==null?void 0:r.getValue("isImage"))&&((i=this._entry)==null?void 0:i.getValue("cdnUrl")),errorText:(o=(s=this._entry.getValue("errors"))==null?void 0:s[0])==null?void 0:o.message})}destroyCallback(){super.destroyCallback(),Fs.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var n;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(n=this._observer)==null||n.disconnect()}_settingsOfShrink(){return BM(this.cfg.imageShrink)}_processShrink(n){return FM(n,this._settingsOfShrink())}async upload(){var i,s;let n=this._entry;if(!this.uploadCollection.read(n.uid)||n.getValue("fileInfo")||n.getValue("isUploading")||n.getValue("errors").length>0)return;const r=this.cfg.multiple?this.cfg.multipleMax:1;if(!(r&&this.uploadCollection.size>r)){this._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("errors",[]);try{let o=new AbortController;n.setValue("abortController",o);const a=async()=>{let u=n.getValue("file");u&&this.cfg.imageShrink&&(u=await this._processShrink(u).catch(()=>u));const d=u||n.getValue("externalUrl")||n.getValue("uuid"),p={...await this.getUploadClientOptions(),fileName:n.getValue("fileName"),source:n.getValue("source"),onProgress:g=>{if(g.isComputable){let y=g.value*100;n.setValue("uploadProgress",y)}},signal:o.signal,metadata:await this.getMetadataFor(n.uid)};return this.debugPrint("upload options",d,p),tb(d,p)};let l=await this.$["*uploadQueue"].add(a);n.setMultipleValues({fileInfo:l,isUploading:!1,fileName:l.originalFilename,fileSize:l.size,isImage:l.isImage,mimeType:((s=(i=l.contentInfo)==null?void 0:i.mime)==null?void 0:s.mime)??l.mimeType,uuid:l.uuid,cdnUrl:n.getValue("cdnUrl")??l.cdnUrl,cdnUrlModifiers:n.getValue("cdnUrlModifiers")??"",uploadProgress:100}),n===this._entry&&this._debouncedCalculateState()}catch(o){o instanceof Js&&o.isCancel?n.setMultipleValues({isUploading:!1,uploadProgress:0}):n.setMultipleValues({isUploading:!1,uploadProgress:0,uploadError:o}),n===this._entry&&this._debouncedCalculateState()}}}}Fs.template=`
  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">
    <div class="thumb" set="style.backgroundImage: thumbUrl">
      <div class="badge">
        <lr-icon set="@name: badgeIcon"></lr-icon>
      </div>
    </div>
    <div class="file-name-wrapper">
      <span class="file-name" set="@title: itemName">{{itemName}}</span>
      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>
    </div>
    <div class="file-actions">
      <button
        type="button"
        l10n="@title:file-item-edit-button"
        class="edit-btn mini-btn"
        set="onclick: onEdit; @hidden: !isEditable"
      >
        <lr-icon name="edit-file"></lr-icon>
      </button>
      <button type="button" l10n="@title:file-item-remove-button" class="remove-btn mini-btn" set="onclick: onRemove;">
        <lr-icon name="remove-file"></lr-icon>
      </button>
      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">
        <lr-icon name="upload"></lr-icon>
      </button>
    </div>
    <lr-progress-bar class="progress-bar" set="value: progressValue; visible: progressVisible;"> </lr-progress-bar>
  </div>
`;Fs.activeInstances=new Set;const zo=class zo extends Qe{constructor(){super();U(this,"_handleBackdropClick",()=>{this._closeDialog()});U(this,"_closeDialog",()=>{this.setOrAddState("*modalActive",!1)});U(this,"_handleDialogClose",()=>{this._closeDialog()});U(this,"_handleDialogMouseDown",n=>{this._mouseDownTarget=n.target});U(this,"_handleDialogMouseUp",n=>{n.target===this.ref.dialog&&n.target===this._mouseDownTarget&&this._closeDialog()});this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),typeof HTMLDialogElement=="function")this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),n&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}};U(zo,"styleAttrs",[...mi(zo,zo,"styleAttrs"),"lr-modal"]),U(zo,"StateConsumerScope","modal");let mh=zo;mh.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;const Tb=(t,e)=>{let n,r,i;const s=(...o)=>{n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=e&&(t(...o),i=Date.now())},Math.max(e-(Date.now()-i),0))):(t(...o),i=Date.now(),n=!0)};return Object.defineProperty(s,"cancel",{configurable:!1,writable:!1,enumerable:!1,value:()=>{clearTimeout(r)}}),s};class Cb extends Je{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"historyTracked",!0);U(this,"activityType",_e.activities.UPLOAD_LIST);U(this,"_throttledHandleCollectionUpdate",Tb(()=>{this.isConnected&&(this._updateUploadsState(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},300));this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",commonErrorMessage:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.emit(at.UPLOAD_CLICK),this.uploadAll(),this._throttledHandleCollectionUpdate()},onDone:()=>{this.emit(at.DONE_CLICK,this.getOutputCollectionState()),this.doneFlow()},onCancel:()=>{this.uploadCollection.clearAll()}}}_updateUploadsState(){const n=this.getOutputCollectionState(),r={total:n.totalCount,succeed:n.successCount,uploading:n.uploadingCount,failed:n.failedCount},i=!n.errors.some(p=>p.type==="TOO_MANY_FILES"||p.type==="TOO_FEW_FILES"),s=n.errors.some(p=>p.type==="TOO_MANY_FILES"),o=n.totalCount===(this.cfg.multiple?this.cfg.multipleMax:1),a=r.failed===0&&n.errors.length===0;let l=!1,u=!1,d=!1;r.total-r.succeed-r.uploading-r.failed>0&&i?l=!0:(u=!0,d=r.total===r.succeed&&i&&a),this.set$({doneBtnVisible:u,doneBtnEnabled:d,uploadBtnVisible:l,addMoreBtnEnabled:r.total===0||!s&&!o,addMoreBtnVisible:!o||this.cfg.multiple}),this.bindL10n("headerText",()=>this._getHeaderText(r))}_getHeaderText(n){const r=i=>{const s=n[i];return this.l10n(`header-${i}`,{count:s})};return n.uploading>0?r("uploading"):n.failed>0?r("failed"):n.succeed>0?r("succeed"):r("total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMin",this._throttledHandleCollectionUpdate),this.subConfigValue("multipleMax",this._throttledHandleCollectionUpdate),this.sub("*currentActivity",n=>{!this.couldOpenActivity&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate),this.sub("*uploadList",n=>{this._throttledHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),this.cfg.confirmUpload||this.uploadAll()},!1),this.sub("*collectionErrors",n=>{const r=n.filter(i=>i.type!=="SOME_FILES_HAS_ERRORS")[0];if(!r){this.set$({commonErrorMessage:null});return}this.set$({commonErrorMessage:r.message})})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate)}}Cb.template=`
  <lr-activity-header>
    <span class="header-text">{{headerText}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>

  <div class="common-error" set="@hidden: !commonErrorMessage; textContent: commonErrorMessage;"></div>

  <div class="toolbar">
    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="toolbar-spacer"></div>
    <button
      type="button"
      class="add-more-btn secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="upload-btn primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="done-btn primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <lr-drop-area ghost></lr-drop-area>
`;class Ib extends Je{constructor(){super(...arguments);U(this,"couldBeCtxOwner",!0);U(this,"activityType",_e.activities.URL);U(this,"init$",{...this.init$,importDisabled:!0,onUpload:n=>{n.preventDefault();let r=this.ref.input.value;this.addFileFromUrl(r,{source:mr.URL_TAB}),this.$["*currentActivity"]=_e.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:n=>{let r=n.target.value;this.set$({importDisabled:!r})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}Ib.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon name="url"></lr-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <form class="content">
    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="url-upload-btn primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
      l10n="upload-url"
    ></button>
  </form>
`;const m_=()=>typeof navigator.permissions<"u";class Sb extends Je{constructor(){super(...arguments);U(this,"couldBeCtxOwner",!0);U(this,"activityType",_e.activities.CAMERA);U(this,"_unsubPermissions",null);U(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:m_(),cameraSelectOptions:null,cameraSelectHidden:!0,l10nMessage:"",onCameraSelectChange:n=>{this._selectedCameraId=n.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}});U(this,"_onActivate",()=>{m_()&&this._subscribePermissions(),this._capture()});U(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()});U(this,"_handlePermissionsChange",()=>{this._capture()});U(this,"_setPermissionsState",$n(n=>{this.classList.toggle("initialized",n==="granted"),n==="granted"?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):n==="prompt"?(this.$.l10nMessage="camera-permissions-prompt",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage="camera-permissions-denied",this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}async _subscribePermissions(){try{(await navigator.permissions.query({name:"camera"})).addEventListener("change",this._handlePermissionsChange)}catch(n){console.log("Failed to use permissions API. Fallback to manual request mode.",n),this._capture()}}async _capture(){let n={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(n.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let r=await navigator.mediaDevices.getUserMedia(n);r.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=r,this._capturing=!0,this._setPermissionsState("granted")}catch(r){this._setPermissionsState("denied"),console.error("Failed to capture camera",r)}}_stopCapture(){var n;this._capturing&&((n=this.$.video)==null||n.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);const n=Date.now(),r=`camera-${n}.jpeg`,i="image/jpeg";this._canvas.toBlob(s=>{let o=new File([s],r,{lastModified:n,type:i});this.addFileFromObject(o,{source:mr.CAMERA}),this.set$({"*currentActivity":_e.activities.UPLOAD_LIST})},i)}async initCallback(){var n;super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",r=>{this.$.videoTransformCss=r?"scaleX(-1)":null});try{let i=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput").map((s,o)=>({text:s.label.trim()||`${this.l10n("caption-camera")} ${o+1}`,value:s.deviceId}));i.length>1&&(this.$.cameraSelectOptions=i,this.$.cameraSelectHidden=!1),this._selectedCameraId=(n=i[0])==null?void 0:n.value}catch{}}}Sb.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <lr-icon name="camera"></lr-icon>
      <span l10n="caption-camera"></span>
    </div>
    <lr-select
      class="camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </lr-select>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <video
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="message-box" set="@hidden: messageHidden">
      <span l10n="l10nMessage"></span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">
      <lr-icon name="camera"></lr-icon>
    </button>
  </div>
`;class Ab extends Je{constructor(){super(...arguments);U(this,"requireCtxName",!0)}initCallback(){super.initCallback(),this.$["*eventEmitter"].bindTarget(this)}destroyCallback(){super.destroyCallback(),this.$["*eventEmitter"].unbindTarget(this)}}Ab.EventType=at;const nm=Ab;class xb extends Je{constructor(){super(...arguments);U(this,"init$",{...this.init$,visible:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}destroyCallback(){var n;super.destroyCallback(),(n=this._unobserveCollection)==null||n.call(this)}}xb.template=' <lr-progress-bar set="visible: visible; value: value"></lr-progress-bar> ';class kb extends Qe{constructor(){super(...arguments);U(this,"_value",0);U(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{if(n===void 0)return;const r=this._value;if(this._value=n,n===0&&r>0){this.ref.line.addEventListener("transitionend",()=>{this.style.setProperty("--l-width",this._value.toString())});return}this.style.setProperty("--l-width",this._value.toString())}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)})}}kb.template=' <div ref="line" class="progress"></div> ';const Ea="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function Pb(...t){return t.reduce((e,n)=>{if(typeof n=="string")return e[n]=!0,e;for(let r of Object.keys(n))e[r]=n[r];return e},{})}function nr(...t){let e=Pb(...t);return Object.keys(e).reduce((n,r)=>(e[r]&&n.push(r),n),[]).join(" ")}function HM(t,...e){let n=Pb(...e);for(let r of Object.keys(n))t.classList.toggle(r,n[r])}const WM=t=>{if(!t)return Tr;const e=PN(t).filter(n=>Tr.includes(n));return e.length===0?Tr:e};function qM(t){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":Tr,"*tabId":lt.CROP,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:Ea,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:s1(Tr),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=t.querySelectorAll("img");for(let n of e){let r=n.src;n.src=Ea,n.src=r}t.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let n=t.$["*originalUrl"],r=ts(mf(e),"preview"),i=On(n,r),s={originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:e};t.dispatchEvent(new CustomEvent("apply",{detail:s,bubbles:!0,composed:!0})),t.remove()},"*on.cancel":()=>{t.remove(),t.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const GM="<svg width='0' height='0' style='position:absolute'><symbol viewBox='0 0 24 24' id='uc-icon-about' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.152 14.12v.1h1.523v-.1c.007-.409.053-.752.138-1.028.086-.277.22-.517.405-.72.188-.202.434-.397.735-.586.32-.191.593-.412.82-.66.232-.249.41-.531.533-.847.125-.32.187-.678.187-1.076 0-.579-.137-1.085-.41-1.518a2.717 2.717 0 0 0-1.14-1.018c-.49-.245-1.062-.367-1.715-.367-.597 0-1.142.114-1.636.34-.49.228-.884.564-1.182 1.008-.299.44-.46.98-.485 1.619h1.62c.024-.377.118-.684.282-.922a1.48 1.48 0 0 1 .617-.532c.25-.114.51-.17.784-.17.301 0 .575.063.82.191.248.124.447.302.597.533.149.23.223.504.223.82 0 .263-.05.502-.149.72a1.91 1.91 0 0 1-.405.574 3.48 3.48 0 0 1-.575.453 4.22 4.22 0 0 0-.847.66c-.234.242-.415.558-.543.949-.125.39-.19.916-.197 1.577Zm.053 3.03c.21.206.46.31.75.31.196 0 .374-.049.534-.144a1.1 1.1 0 0 0 .383-.384c.1-.163.15-.343.15-.538a1 1 0 0 0-.32-.746 1.019 1.019 0 0 0-.746-.314c-.291 0-.542.105-.751.314-.21.206-.314.455-.314.746 0 .295.104.547.314.756ZM24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12Zm-1.5 0c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5 22.5 6.201 22.5 12Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-add' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.75 21a.75.75 0 0 1-1.5 0v-8.25H3a.75.75 0 0 1 0-1.5h8.25V3a.75.75 0 0 1 1.5 0v8.25H21a.75.75 0 0 1 0 1.5h-8.25V21Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-arrow-down' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.5 23.03a.75.75 0 0 0 .999 0l9.29-8.276a.75.75 0 0 0-.998-1.12l-8.042 7.164V1.53a.75.75 0 0 0-1.5 0v19.267l-8.04-7.163a.75.75 0 0 0-.998 1.12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-back' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M20.251 12a.75.75 0 0 1-.75.75H6.067l5.72 5.85a.75.75 0 1 1-1.072 1.05L4.136 12.92a1.292 1.292 0 0 1 0-1.842l6.579-6.728a.75.75 0 1 1 1.072 1.048l-5.72 5.851H19.5a.75.75 0 0 1 .75.75Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.6 18.4a1.6 1.6 0 1 1-3.2 0 1.6 1.6 0 0 1 3.2 0zM12 4.5A1.5 1.5 0 0 1 13.5 6v7a1.5 1.5 0 0 1-3 0V6A1.5 1.5 0 0 1 12 4.5z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-badge-success' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m10.5 18.204 7.6-8.183a1.5 1.5 0 0 0-2.2-2.042l-5.4 5.817-2.4-2.586a1.5 1.5 0 1 0-2.2 2.041l4.6 4.953Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-box' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M1.01 4.148a.75.75 0 0 1 .75.75v4.348a4.437 4.437 0 0 1 2.988-1.153c1.734 0 3.23.992 3.978 2.438a4.478 4.478 0 0 1 3.978-2.438c2.49 0 4.488 2.044 4.488 4.543 0 2.5-1.999 4.544-4.488 4.544a4.478 4.478 0 0 1-3.978-2.438 4.478 4.478 0 0 1-3.978 2.438C2.26 17.18.26 15.135.26 12.636V4.898a.75.75 0 0 1 .75-.75Zm.75 8.488c0 1.692 1.348 3.044 2.988 3.044s2.989-1.352 2.989-3.044c0-1.691-1.349-3.043-2.989-3.043S1.76 10.945 1.76 12.636Zm10.944-3.043c-1.64 0-2.988 1.352-2.988 3.043 0 1.692 1.348 3.044 2.988 3.044s2.988-1.352 2.988-3.044c0-1.69-1.348-3.043-2.988-3.043Zm4.328-1.23a.75.75 0 0 1 1.052.128l2.333 2.983 2.333-2.983a.75.75 0 0 1 1.181.924l-2.562 3.277 2.562 3.276a.75.75 0 1 1-1.181.924l-2.333-2.983-2.333 2.983a.75.75 0 1 1-1.181-.924l2.562-3.276-2.562-3.277a.75.75 0 0 1 .129-1.052Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-brightness' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M15 10a5 5 0 0 1-5 5m5-5a5 5 0 0 0-5-5m5 5h-5m0 5a5 5 0 0 1 0-10m0 10V5m0 15v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05m-.626 2.45H10m4.324 5H10'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-camera' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.65 2.55a.75.75 0 0 1 .6-.3h7.5a.75.75 0 0 1 .6.3l2.025 2.7H21a3 3 0 0 1 3 3v10.5a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h2.625zm.975 1.2L6.6 6.45a.75.75 0 0 1-.6.3H3a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V8.25a1.5 1.5 0 0 0-1.5-1.5h-3a.75.75 0 0 1-.6-.3l-2.025-2.7zm3.375 6a3.375 3.375 0 1 0 0 6.75 3.375 3.375 0 0 0 0-6.75zm-4.875 3.375a4.875 4.875 0 1 1 9.75 0 4.875 4.875 0 0 1-9.75 0z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-close' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M4.604 4.604a.75.75 0 0 1 1.06 0L12 10.939l6.335-6.335a.75.75 0 1 1 1.061 1.06L13.061 12l6.335 6.335a.75.75 0 1 1-1.06 1.061L12 13.061l-6.335 6.335a.75.75 0 0 1-1.061-1.06L10.939 12 4.604 5.665a.75.75 0 0 1 0-1.061z'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-closeMax' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M8.232 10 3.585 5.353l1.768-1.768L10 8.232l4.648-4.647 1.767 1.768L11.768 10l4.647 4.648-1.767 1.767L10 11.768l-4.647 4.647-1.768-1.767L8.232 10Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-collapse' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3.116 12a.75.75 0 0 1 .75-.75h16.268a.75.75 0 0 1 0 1.5H3.866a.75.75 0 0 1-.75-.75Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-contrast' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 10a8 8 0 1 0 16 0 8 8 0 1 0-16 0m8-8v16m8-8h-8m7.598 2.5H10m6.24 2.5H10m7.6-7.5H10M16.242 5H10'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-crop' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M20 14H7.005C6.45 14 6 13.55 6 12.995V0M0 6h13.067c.515 0 .933.418.933.933V20M14.5.4 13 2l1.5 1.6M13 2h2a3 3 0 0 1 3 3v2M5.5 19.6 7 18l-1.5-1.6M7 18H5a3 3 0 0 1-3-3v-2'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-default' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol fill='currentColor' viewBox='0 0 20 20' id='uc-icon-done' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='m18.057 6.333-9.365 9.125a1.25 1.25 0 0 1-1.768-.023L1.92 10.296l1.791-1.744 4.132 4.243 8.47-8.253 1.744 1.79Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-dropbox' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.019 1.92a.75.75 0 0 1 .806 0L12 5.219l5.176-3.297a.75.75 0 0 1 .806 0l5.577 3.553a.75.75 0 0 1 0 1.265l-4.574 2.914 4.574 2.914a.75.75 0 0 1 0 1.265l-5.577 3.554a.75.75 0 0 1-.806 0L12 14.089l-5.175 3.297a.75.75 0 0 1-.806 0L.44 13.833a.75.75 0 0 1 0-1.266l4.575-2.914L.44 6.74a.75.75 0 0 1 0-1.265zm.403 8.616L2.24 13.2l4.182 2.664 4.181-2.664zm6.975 2.664 4.182 2.664L21.76 13.2l-4.181-2.664zm2.776-3.547L12 12.311 7.828 9.653 12 6.995zm1.406-.882 4.181-2.664-4.181-2.664-4.182 2.664zm-6.976-2.664L6.422 3.443 2.24 6.107 6.422 8.77zM5.791 18.544a.75.75 0 0 1 1.035-.23l5.175 3.297 5.175-3.297a.75.75 0 1 1 .806 1.265l-5.578 3.554a.75.75 0 0 1-.806 0L6.02 19.579a.75.75 0 0 1-.23-1.035z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol fill='currentColor' viewBox='0 0 25 24' id='uc-icon-edit-file' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M18.558 2.804a.78.78 0 0 0-.557.235l-.008.007-2.472 2.46 3.847 3.848 2.46-2.473.004-.003a.78.78 0 0 0 0-1.108l-.004-.003-2.712-2.728a.78.78 0 0 0-.558-.235Zm-.248 7.613-3.852-3.852-8.93 8.887-1.516 5.41 5.41-1.515 8.888-8.93Zm-.636-8.934a2.28 2.28 0 0 1 2.512.505l2.702 2.717.002.002a2.278 2.278 0 0 1 0 3.234l-.002.002-12.541 12.602a.75.75 0 0 1-.33.193l-6.884 1.928a.75.75 0 0 1-.925-.924l1.928-6.885a.75.75 0 0 1 .193-.33l12.603-12.54a2.28 2.28 0 0 1 .742-.504Z' clip-rule='evenodd'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-enhance' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19 13h-2m0 0a4 4 0 0 1-4-4m4 4a4 4 0 0 0-4 4m0-8V7m0 2a4 4 0 0 1-4 4m-2 0h2m0 0a4 4 0 0 1 4 4m0 0v2M8 8.5H6.5m0 0a2 2 0 0 1-2-2m2 2a2 2 0 0 0-2 2m0-4V5m0 1.5a2 2 0 0 1-2 2M1 8.5h1.5m0 0a2 2 0 0 1 2 2m0 0V12M12 3h-1m0 0a1 1 0 0 1-1-1m1 1a1 1 0 0 0-1 1m0-2V1m0 1a1 1 0 0 1-1 1M8 3h1m0 0a1 1 0 0 1 1 1m0 0v1'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-evernote' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M9.804 2.27v-.048c.055-.263.313-.562.85-.562h.44c.142 0 .325.014.526.033.066.009.124.023.267.06l.13.032h.002c.319.079.515.275.644.482a1.461 1.461 0 0 1 .16.356l.004.012a.75.75 0 0 0 .603.577l1.191.207a1988.512 1988.512 0 0 0 2.332.402c.512.083 1.1.178 1.665.442.64.3 1.19.795 1.376 1.77.548 2.931.657 5.829.621 8a39.233 39.233 0 0 1-.125 2.602 17.518 17.518 0 0 1-.092.849.735.735 0 0 0-.024.112c-.378 2.705-1.269 3.796-2.04 4.27-.746.457-1.53.451-2.217.447h-.192c-.46 0-1.073-.23-1.581-.635-.518-.412-.763-.87-.763-1.217 0-.45.188-.688.355-.786.161-.095.436-.137.796.087a.75.75 0 1 0 .792-1.274c-.766-.476-1.64-.52-2.345-.108-.7.409-1.098 1.188-1.098 2.08 0 .996.634 1.84 1.329 2.392.704.56 1.638.96 2.515.96l.185.002c.667.009 1.874.025 3.007-.67 1.283-.786 2.314-2.358 2.733-5.276a4.213 4.213 0 0 0 .056-.335c.023-.184.051-.445.079-.772.055-.655.111-1.585.13-2.704.037-2.234-.074-5.239-.647-8.301v-.002c-.294-1.544-1.233-2.391-2.215-2.85-.777-.363-1.623-.496-2.129-.576a8.872 8.872 0 0 1-.25-.041l-.006-.001-1.99-.345-.761-.132a2.93 2.93 0 0 0-.182-.338A2.532 2.532 0 0 0 12.379.329l-.091-.023a3.967 3.967 0 0 0-.493-.103L11.769.2a7.846 7.846 0 0 0-.675-.04h-.44c-.733 0-1.368.284-1.795.742L2.416 7.431c-.468.428-.751 1.071-.751 1.81 0 .02 0 .041.003.062l.003.034c.017.21.038.468.096.796.107.715.275 1.47.391 1.994.029.13.055.245.075.342l.002.008c.258 1.141.641 1.94.978 2.466.168.263.323.456.444.589a2.808 2.808 0 0 0 .192.194c1.536 1.562 3.713 2.196 5.731 2.08.13-.005.35-.032.537-.073a2.627 2.627 0 0 0 .652-.24c.425-.26.75-.661.992-1.046.184-.294.342-.61.473-.915a3.8 3.8 0 0 0 .627.493 5.022 5.022 0 0 0 1.97.709l.023.002.018.003.11.016c.088.014.205.035.325.058l.056.014c.088.022.164.04.235.061a1.736 1.736 0 0 1 .145.048l.03.014c.765.34 1.302 1.09 1.302 1.871a.75.75 0 0 0 1.5 0c0-1.456-.964-2.69-2.18-3.235a3.595 3.595 0 0 0-.679-.217l-.063-.015a10.616 10.616 0 0 0-.606-.105l-.02-.003-.03-.003h-.002a3.542 3.542 0 0 1-1.331-.485c-.471-.298-.788-.692-.828-1.234a.75.75 0 0 0-1.48-.106l-.001.003-.004.017a8.23 8.23 0 0 1-.092.352 9.963 9.963 0 0 1-.298.892c-.132.34-.29.68-.47.966-.174.276-.339.454-.478.549a1.178 1.178 0 0 1-.221.072 1.949 1.949 0 0 1-.241.036h-.013l-.032.002c-1.684.1-3.423-.437-4.604-1.65a.746.746 0 0 0-.053-.05L4.84 14.6a1.348 1.348 0 0 1-.07-.073 2.99 2.99 0 0 1-.293-.392c-.242-.379-.558-1.014-.778-1.985a54.1 54.1 0 0 0-.083-.376 27.494 27.494 0 0 1-.367-1.872l-.003-.02a6.791 6.791 0 0 1-.08-.67c.004-.277.086-.475.2-.609l.067-.067a.63.63 0 0 1 .292-.145h.05c.18 0 1.095.055 2.013.115l1.207.08.534.037a.747.747 0 0 0 .052.002c.782 0 1.349-.206 1.759-.585l.005-.005c.553-.52.622-1.225.622-1.76V6.24l-.026-.565A774.97 774.97 0 0 1 9.885 4.4c-.042-.961-.081-1.939-.081-2.13ZM4.995 6.953a251.126 251.126 0 0 1 2.102.137l.508.035c.48-.004.646-.122.715-.185.07-.068.146-.209.147-.649l-.024-.548a791.69 791.69 0 0 1-.095-2.187L4.995 6.953Zm16.122 9.996Zm-5.479-5.323a.75.75 0 0 0 1.014.31 2.04 2.04 0 0 1 .304-.089 1.84 1.84 0 0 1 .544-.039c.215.023.321.06.37.085.033.016.039.026.047.04a.75.75 0 0 0 1.289-.767c-.337-.567-.906-.783-1.552-.85a3.334 3.334 0 0 0-1.002.062c-.27.056-.531.14-.705.234a.75.75 0 0 0-.31 1.014Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-expand' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m12 8.337-8.47 8.47a.75.75 0 0 1-1.06-1.06l8.605-8.606a1.29 1.29 0 0 1 1.85 0l8.605 8.605a.75.75 0 1 1-1.06 1.06L12 8.338Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-exposure' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M10 20v-3M2.93 2.929 5.05 5.05M0 10h3m-.07 7.071 2.12-2.121M10 0v3m7.07 14.071-2.12-2.121M20 10h-3m.07-7.071L14.95 5.05M5 10a5 5 0 1 0 10 0 5 5 0 1 0-10 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-external-source-placeholder' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-facebook' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12 1.5C6.201 1.5 1.5 6.201 1.5 12c0 4.943 3.416 9.089 8.016 10.204v-6.108H7.383a.75.75 0 0 1-.75-.75v-3.281a.75.75 0 0 1 .75-.75h2.133V9.393c0-.958.225-2.511 1.38-3.65 1.194-1.177 3.174-1.718 6.254-1.056a.75.75 0 0 1 .592.733v2.754a.75.75 0 0 1-.75.75c-.692 0-1.203.026-1.584.082-.387.057-.578.137-.675.202-.109.073-.237.205-.237 1.029v1.078h2.39a.75.75 0 0 1 .742.866l-.516 3.281a.75.75 0 0 1-.74.634h-1.876v6.106C19.09 21.082 22.5 16.939 22.5 12c0-5.799-4.701-10.5-10.5-10.5zM0 12C0 5.373 5.373 0 12 0s12 5.373 12 12c0 5.995-4.395 10.961-10.138 11.856a.75.75 0 0 1-.866-.74v-7.77a.75.75 0 0 1 .75-.75h1.984l.28-1.781h-2.264a.75.75 0 0 1-.75-.75v-1.828c0-.829.089-1.729.9-2.274.363-.244.807-.37 1.293-.441a9.623 9.623 0 0 1 1.053-.086V6.04c-2.41-.405-3.645.132-4.293.771-.737.728-.933 1.793-.933 2.582v2.672a.75.75 0 0 1-.75.75H8.133v1.78h2.133a.75.75 0 0 1 .75.75v7.772a.75.75 0 0 1-.865.741C4.4 22.968 0 18 0 12z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M2.895 1.201c0-.473.383-.857.857-.857h8.4c.227 0 .445.09.606.251l8.4 8.4c.16.16.25.379.25.606v13.2a.857.857 0 0 1-.856.857h-16.8a.857.857 0 0 1-.857-.857zm1.714.857v19.886h15.085V10.458h-7.542a.857.857 0 0 1-.858-.857V2.058zm8.4 1.213 5.473 5.473H13.01z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-filters' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M4.5 6.5a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m-3.5 6a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0m7 0a5.5 5.5 0 1 0 11 0 5.5 5.5 0 1 0-11 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-flickr' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M5.959 7.926c-2.298 0-4.14 1.834-4.14 4.073 0 2.241 1.842 4.075 4.14 4.075 2.302 0 4.145-1.834 4.145-4.075 0-2.238-1.843-4.073-4.145-4.073Zm-5.64 4.073c0-3.086 2.533-5.573 5.64-5.573 3.11 0 5.645 2.486 5.645 5.573 0 3.089-2.535 5.575-5.645 5.575-3.107 0-5.64-2.487-5.64-5.575Zm18.07-4.073c-2.301 0-4.144 1.835-4.144 4.073 0 2.24 1.843 4.075 4.145 4.075 2.299 0 4.141-1.834 4.141-4.075 0-2.239-1.842-4.073-4.141-4.073Zm-5.644 4.073c0-3.087 2.535-5.573 5.645-5.573 3.108 0 5.641 2.487 5.641 5.573 0 3.088-2.533 5.575-5.641 5.575-3.11 0-5.645-2.486-5.645-5.575Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-flip' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M19.6 5 18 3.5 16.4 5m3.2 10L18 16.5 16.4 15M18 3.523v12.954M3.3 8.5h10.654c.301 0 .415-.395.159-.554L3.459 1.286A.3.3 0 0 0 3 1.542V8.2a.3.3 0 0 0 .3.3zm0 3h10.654c.301 0 .415.395.159.554l-10.654 6.66A.3.3 0 0 1 3 18.458v-6.66a.3.3 0 0 1 .3-.3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-gamma' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M17 3C9 6 2.5 11.5 2.5 17.5m0 0h1m-1 0v-1m14 1h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3 0h1m-3-14v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1m0 3v-1'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gdrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M7.736 1.818a.75.75 0 0 1 .647-.37h7.587a.75.75 0 0 1 .655.383l7.233 12.946a.75.75 0 0 1-.003.737l-3.794 6.66a.75.75 0 0 1-.651.378H4.59a.75.75 0 0 1-.651-.378l-3.794-6.66a.75.75 0 0 1 .005-.75zm.64 1.876L1.663 15.148l2.93 5.145 6.655-11.581zm3.736 6.526-2.398 4.173H14.5zm4.116 4.173h5.697L15.53 2.947H9.677zm5.685 1.5H8.852l-2.966 5.16h13.088z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-gphotos' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M12.51 0c-.702 0-1.272.57-1.272 1.273V7.35A6.381 6.381 0 0 0 0 11.489c0 .703.57 1.273 1.273 1.273H7.35A6.381 6.381 0 0 0 11.488 24c.704 0 1.274-.57 1.274-1.273V16.65A6.381 6.381 0 0 0 24 12.51c0-.703-.57-1.273-1.273-1.273H16.65A6.381 6.381 0 0 0 12.511 0Zm.252 11.232V1.53a4.857 4.857 0 0 1 0 9.702Zm-1.53.006H1.53a4.857 4.857 0 0 1 9.702 0Zm1.536 1.524a4.857 4.857 0 0 0 9.702 0h-9.702Zm-6.136 4.857c0-2.598 2.04-4.72 4.606-4.85v9.7a4.857 4.857 0 0 1-4.606-4.85Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-huddle' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.204 2.002c-.252.23-.357.486-.357.67V21.07c0 .15.084.505.313.812.208.28.499.477.929.477.519 0 .796-.174.956-.365.178-.212.286-.535.286-.924v-.013l.117-6.58c.004-1.725 1.419-3.883 3.867-3.883 1.33 0 2.332.581 2.987 1.364.637.762.95 1.717.95 2.526v6.47c0 .392.11.751.305.995.175.22.468.41 1.008.41.52 0 .816-.198 1.002-.437.207-.266.31-.633.31-.969V14.04c0-2.81-1.943-5.108-4.136-5.422a5.971 5.971 0 0 0-3.183.41c-.912.393-1.538.96-1.81 1.489a.75.75 0 0 1-1.417-.344v-7.5c0-.587-.47-1.031-1.242-1.031-.315 0-.638.136-.885.36ZM5.194.892A2.844 2.844 0 0 1 7.09.142c1.328 0 2.742.867 2.742 2.53v5.607a6.358 6.358 0 0 1 1.133-.629 7.47 7.47 0 0 1 3.989-.516c3.056.436 5.425 3.482 5.425 6.906v6.914c0 .602-.177 1.313-.627 1.89-.47.605-1.204 1.016-2.186 1.016-.96 0-1.698-.37-2.179-.973-.46-.575-.633-1.294-.633-1.933v-6.469c0-.456-.19-1.071-.602-1.563-.394-.471-.986-.827-1.836-.827-1.447 0-2.367 1.304-2.367 2.39v.014l-.117 6.58c-.001.64-.177 1.333-.637 1.881-.48.57-1.2.9-2.105.9-.995 0-1.7-.5-2.132-1.081-.41-.552-.61-1.217-.61-1.708V2.672c0-.707.366-1.341.847-1.78Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-info' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11 9h2V7h-2m1 13c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m-1 15h2v-6h-2v6Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-instagram' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.225 12a5.775 5.775 0 1 1 11.55 0 5.775 5.775 0 0 1-11.55 0zM12 7.725a4.275 4.275 0 1 0 0 8.55 4.275 4.275 0 0 0 0-8.55zm6.425-.75a1.4 1.4 0 1 0 0-2.8 1.4 1.4 0 0 0 0 2.8zm-6.467-6.8h.084c2.152 0 3.823 0 5.152.132 1.35.134 2.427.41 3.362 1.013a7.15 7.15 0 0 1 2.124 2.124c.604.935.88 2.012 1.013 3.362.132 1.329.132 3 .132 5.152v.084c0 2.152 0 3.823-.132 5.152-.134 1.35-.41 2.427-1.013 3.362a7.15 7.15 0 0 1-2.124 2.124c-.935.604-2.012.88-3.362 1.013-1.329.132-3 .132-5.152.132h-.084c-2.152 0-3.824 0-5.153-.132-1.35-.134-2.427-.409-3.36-1.013a7.15 7.15 0 0 1-2.125-2.124C.716 19.62.44 18.544.307 17.194c-.132-1.329-.132-3-.132-5.152v-.084c0-2.152 0-3.823.132-5.152.133-1.35.409-2.427 1.013-3.362A7.15 7.15 0 0 1 3.444 1.32C4.378.716 5.456.44 6.805.307c1.33-.132 3-.132 5.153-.132zM6.953 1.799c-1.234.123-2.043.36-2.695.78A5.65 5.65 0 0 0 2.58 4.26c-.42.65-.657 1.46-.78 2.695C1.676 8.2 1.675 9.797 1.675 12s0 3.8.124 5.046c.123 1.235.36 2.044.78 2.696a5.649 5.649 0 0 0 1.68 1.678c.65.421 1.46.658 2.694.78 1.247.124 2.844.125 5.047.125s3.8 0 5.046-.124c1.235-.123 2.044-.36 2.695-.78a5.648 5.648 0 0 0 1.68-1.68c.42-.65.657-1.46.78-2.694.123-1.247.124-2.844.124-5.047s-.001-3.8-.125-5.046c-.122-1.235-.359-2.044-.78-2.695a5.65 5.65 0 0 0-1.679-1.68c-.651-.42-1.46-.657-2.695-.78-1.246-.123-2.843-.124-5.046-.124-2.203 0-3.8 0-5.047.124z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-local' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M3 3.75a1.5 1.5 0 0 0-1.5 1.5v13.5a1.5 1.5 0 0 0 1.5 1.5h18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 21 7.5h-9a.75.75 0 0 1-.643-.364L9.325 3.75zm-3 1.5a3 3 0 0 1 3-3h6.75a.75.75 0 0 1 .643.364L12.425 6H21a3 3 0 0 1 3 3v9.75a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-mirror' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M5 .4 3.5 2 5 3.6M15 .4 16.5 2 15 3.6M3.52 2h12.957M8.5 16.7V6.046c0-.301-.394-.415-.554-.159L1.287 16.541a.3.3 0 0 0 .255.459H8.2a.3.3 0 0 0 .3-.3zm3 0V6.046c0-.301.395-.415.555-.159l6.659 10.654a.3.3 0 0 1-.255.459H11.8a.3.3 0 0 1-.3-.3z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-onedrive' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13.616 4.147a7.689 7.689 0 0 0-7.642 3.285A6.299 6.299 0 0 0 1.455 17.3c.684.894 2.473 2.658 5.17 2.658h12.141c.95 0 1.882-.256 2.697-.743.815-.486 1.514-1.247 1.964-2.083a5.26 5.26 0 0 0-3.713-7.612 7.69 7.69 0 0 0-6.098-5.373ZM3.34 17.15c.674.63 1.761 1.308 3.284 1.308h12.142a3.76 3.76 0 0 0 2.915-1.383l-7.494-4.489L3.34 17.15Zm10.875-6.25 2.47-1.038a5.239 5.239 0 0 1 1.427-.389 6.19 6.19 0 0 0-10.3-1.952 6.338 6.338 0 0 1 2.118.813l4.285 2.567Zm4.55.033c-.512 0-1.019.104-1.489.307l-.006.003-1.414.594 6.521 3.906a3.76 3.76 0 0 0-3.357-4.8l-.254-.01ZM4.097 9.617A4.799 4.799 0 0 1 6.558 8.9c.9 0 1.84.25 2.587.713l3.4 2.037-10.17 4.28a4.799 4.799 0 0 1 1.721-6.312Z'/></symbol><symbol viewBox='0 0 40 40' id='uc-icon-original' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.5' d='M0 40 40 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-remove-file' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.955 3.3A2.969 2.969 0 0 0 8.998 6h5.914a2.97 2.97 0 0 0-2.957-2.7zM16.416 6a4.47 4.47 0 0 0-8.922 0h-2.32a.755.755 0 0 0-.111.008H3.075a.75.75 0 1 0 0 1.5h1.35V19.35a2.85 2.85 0 0 0 2.85 2.85h9.45a2.85 2.85 0 0 0 2.85-2.85V7.508h1.35a.75.75 0 0 0 0-1.5h-1.989A.754.754 0 0 0 18.825 6zM5.925 7.508V19.35a1.35 1.35 0 0 0 1.35 1.35h9.45a1.35 1.35 0 0 0 1.35-1.35V7.508z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-rotate' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M13.5.4 12 2l1.5 1.6M12.023 2H14.4A3.6 3.6 0 0 1 18 5.6V8M4 17h9a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-sad' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M2 17c4.418-4 11.582-4 16 0M16.5 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-11 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-saturation' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='bwuc-icon-id__a' x1='10.001' y1='1' x2='10.001' y2='19' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs><circle cx='10.001' cy='10' r='9' transform='rotate(90 10 10)' fill='url(#bwuc-icon-id__a)'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-select' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='m7 10 5 5 5-5H7Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-slider' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M0 10h11m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 1 4 0m0 0h5'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-tuning' xmlns='http://www.w3.org/2000/svg'><path stroke-linejoin='round' fill='none' stroke='currentColor' stroke-width='1.2' d='M8 10h11M1 10h4M1 4.5h11m3 0h4m-18 11h11m3 0h4m-7-11a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 5.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M11.501.392a.75.75 0 0 1 .998 0l6.704 5.972a.75.75 0 0 1-.998 1.12l-5.455-4.86v13.439a.75.75 0 0 1-1.5 0V2.625l-5.454 4.86a.75.75 0 1 1-.998-1.12zM.857 16.73a.75.75 0 0 1 .75.75v4.914h20.786v-4.914a.75.75 0 0 1 1.5 0v5.664a.75.75 0 0 1-.75.75H.857a.75.75 0 0 1-.75-.75v-5.664a.75.75 0 0 1 .75-.75z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-upload-error' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z'/></symbol><symbol viewBox='0 0 24 24' id='uc-icon-url' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M19.11 3.67c-1.71-1.709-4.578-1.682-6.408.148l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221C14.018.381 17.836.276 20.17 2.61l1.22 1.22c2.335 2.334 2.23 6.153-.147 8.529l-2.22 2.22a.75.75 0 0 1-1.062-1.06l2.222-2.221c1.83-1.83 1.856-4.698.147-6.408zm-3.36 4.58a.75.75 0 0 1 0 1.06l-6.439 6.44a.75.75 0 0 1-1.06-1.06l6.439-6.44a.75.75 0 0 1 1.06 0zM6.04 9.42a.75.75 0 0 1 0 1.061l-2.222 2.222c-1.83 1.83-1.856 4.698-.147 6.407l1.22 1.22c1.71 1.71 4.578 1.683 6.408-.147l2.221-2.221a.75.75 0 1 1 1.06 1.06l-2.22 2.222c-2.377 2.376-6.195 2.481-8.53.147l-1.22-1.22c-2.334-2.334-2.228-6.153.148-8.53l2.221-2.22a.75.75 0 0 1 1.06 0z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-vibrance' xmlns='http://www.w3.org/2000/svg'><path d='M2.125 5.64A8.96 8.96 0 0 0 1.001 10a8.96 8.96 0 0 0 1.124 4.36V5.64z' fill='url(#bzuc-icon-id__a)'/><path d='M2.875 15.499V4.502a9.053 9.053 0 0 1 1.75-1.72v14.437a9.05 9.05 0 0 1-1.75-1.72z' fill='url(#bzuc-icon-id__b)'/><path d='M5.375 17.722c.548.33 1.134.601 1.75.809V1.469a8.956 8.956 0 0 0-1.75.81v15.443z' fill='url(#bzuc-icon-id__c)'/><path d='M7.875 1.253v17.495c.564.136 1.15.22 1.75.244V1.008a9 9 0 0 0-1.75.245z' fill='url(#bzuc-icon-id__d)'/><path d='M10.375 1.008v17.984a9 9 0 0 0 1.75-.244V1.252a9 9 0 0 0-1.75-.244z' fill='url(#bzuc-icon-id__e)'/><path d='M12.875 1.469V18.53a8.957 8.957 0 0 0 1.75-.808V2.277a8.957 8.957 0 0 0-1.75-.808z' fill='url(#bzuc-icon-id__f)'/><path d='M15.375 2.78v14.44a9.053 9.053 0 0 0 1.75-1.72v-11a9.054 9.054 0 0 0-1.75-1.72z' fill='url(#bzuc-icon-id__g)'/><path d='M17.875 5.638v8.724A8.959 8.959 0 0 0 19.001 10a8.96 8.96 0 0 0-1.126-4.362z' fill='url(#bzuc-icon-id__h)'/><defs><linearGradient id='bzuc-icon-id__a' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='bzuc-icon-id__b' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='bzuc-icon-id__c' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='bzuc-icon-id__d' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='bzuc-icon-id__e' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='bzuc-icon-id__f' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='bzuc-icon-id__g' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient><linearGradient id='bzuc-icon-id__h' x1='19.001' y1='10' x2='1.001' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#DE15FF'/><stop offset='.203' stop-color='#0029FF'/><stop offset='.479' stop-color='#2AE4F0'/><stop offset='.604' stop-color='#15EF11'/><stop offset='.75' stop-color='#FAE528'/><stop offset='1' stop-color='#EB2A2A'/></linearGradient></defs></symbol><symbol viewBox='0 0 24 24' id='uc-icon-vk' xmlns='http://www.w3.org/2000/svg'><path fill='currentColor' fill-rule='evenodd' d='M6.341 3.27a10.5 10.5 0 0 1 5.834-1.77.75.75 0 0 0 0-1.5 12 12 0 1 0 12 12 .75.75 0 0 0-1.5 0A10.5 10.5 0 1 1 6.34 3.27Zm14.145 1.48a.75.75 0 1 0-1.06-1.062L9.925 13.19V7.95a.75.75 0 1 0-1.5 0V15c0 .414.336.75.75.75h7.05a.75.75 0 0 0 0-1.5h-5.24l9.501-9.5Z'/></symbol><symbol viewBox='0 0 20 20' id='uc-icon-warmth' xmlns='http://www.w3.org/2000/svg'><path d='m7.5 13.05.429.42.171-.175v-.244h-.6zm5 0h-.6v.245l.172.175.428-.42zM8.1 3.5c0-1.05.85-1.9 1.9-1.9V.4a3.1 3.1 0 0 0-3.1 3.1h1.2zm0 9.55V3.5H6.9v9.55h1.2zm-1 2.45c0-.79.315-1.506.829-2.03l-.858-.84A4.088 4.088 0 0 0 5.9 15.5h1.2zm2.9 2.9a2.9 2.9 0 0 1-2.9-2.9H5.9a4.1 4.1 0 0 0 4.1 4.1v-1.2zm2.9-2.9a2.9 2.9 0 0 1-2.9 2.9v1.2a4.1 4.1 0 0 0 4.1-4.1h-1.2zm-.829-2.03c.514.524.829 1.24.829 2.03h1.2c0-1.117-.447-2.13-1.171-2.87l-.858.84zM11.9 3.5v9.55h1.2V3.5h-1.2zM10 1.6c1.05 0 1.9.85 1.9 1.9h1.2A3.1 3.1 0 0 0 10 .4v1.2z' fill='currentColor'/><path d='M10 14V8' stroke='currentColor' stroke-width='1.2' stroke-linecap='round'/><path d='M14 3h3m-3 3h3m-3 3h3m-8 6.5a1 1 0 1 0 2 0 1 1 0 1 0-2 0' stroke='currentColor' stroke-width='1.2'/></symbol></svg>",KM=`
  ${GM}
  <div class="wrapper wrapper_desktop">
    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">
      <div class="network_problems_content">
        <div class="network_problems_icon">
          <lr-icon name="sad"></lr-icon>
        </div>
        <div class="network_problems_text">Network error</div>
      </div>
      <div class="network_problems_footer">
        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <div class="viewport">
      <div class="file_type_outer">
        <div class="file_type">{{fileType}}</div>
      </div>
      <div class="image_container" ref="img-container-el">
        <img src="${Ea}" class="image image_visible_from_editor" ref="img-el" />
        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>
        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>
      </div>
      <div class="info_pan">{{msg}}</div>
    </div>
    <div class="toolbar">
      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
      <div class="toolbar_content toolbar_content__editor">
        <lr-editor-toolbar></lr-editor-toolbar>
      </div>
    </div>
  </div>
`;class Ua extends Qe{constructor(){super();U(this,"ctxOwner",!0);U(this,"_debouncedShowLoader",$n(this._showLoader.bind(this),300));this.init$={...this.init$,...qM(this)}}_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(this.isConnected){if(await this._waitForSize(),this.$.cdnUrl){const n=DE(this.$.cdnUrl),r=Lc(this.$.cdnUrl,n);if(r===this.$["*originalUrl"])return;this.$["*originalUrl"]=r;const i=EN(this.$.cdnUrl),s=SN(i);this.$["*editorTransformations"]=s}else if(this.$.uuid){const n=Lc(this.cfg.cdnCname,this.$.uuid);if(n===this.$["*originalUrl"])return;this.$["*originalUrl"]=n,this.$["*editorTransformations"]={}}else throw new Error("No UUID nor CDN URL provided");this.$["*tabId"]===lt.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate();try{const n=On(this.$["*originalUrl"],ts("json")),r=await fetch(n).then(o=>o.json()),{width:i,height:s}=r;this.$["*imageSize"]={width:i,height:s},this.$["*tabId"]===lt.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(n){n&&console.error("Failed to load image info",n)}}}async initEditor(){try{await this._waitForSize()}catch(n){this.isConnected&&console.error(n.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==Ea&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",n=>{let r=this.ref["img-el"];r.src!==n&&(this._imgLoading=!0,r.src=n||Ea)}),this.sub("cropPreset",n=>{this.$["*cropPresetList"]=lb(n)}),this.sub("tabs",n=>{this.$["*tabList"]=WM(n)}),this.sub("*tabId",n=>{this.ref["img-el"].className=nr("image",{image_hidden_to_cropper:n===lt.CROP,image_hidden_effects:n!==lt.CROP})}),this.classList.add("editor_ON"),this.sub("*networkProblems",n=>{this.$["presence.networkProblems"]=n,this.$["presence.modalCaption"]=!n}),this.sub("*editorTransformations",n=>{if(Object.keys(n).length===0)return;let r=this.$["*originalUrl"],i=ts(mf(n),"preview"),s=On(r,i),o={originalUrl:r,cdnUrlModifiers:i,cdnUrl:s,transformations:n};this.dispatchEvent(new CustomEvent("change",{detail:o,bubbles:!0,composed:!0}))},!1),this.sub("uuid",n=>n&&this.updateImage()),this.sub("cdnUrl",n=>n&&this.updateImage())}}U(Ua,"styleAttrs",["lr-cloud-image-editor"]);Ua.template=KM;Ua.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class Rb extends Qe{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let n=this.$["*imageBox"];if(!n)return;if(e===""&&n.height<=ye&&n.width<=ye)return!0;let r=n.height<=ye&&(e.includes("n")||e.includes("s")),i=n.width<=ye&&(e.includes("e")||e.includes("w"));return r||i}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e,o=this.ref["svg-el"],a=qn("mask",{id:"backdrop-mask"}),l=qn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),u=qn("rect",{x:n,y:r,width:i,height:s,fill:"black"});a.appendChild(l),a.appendChild(u);let d=qn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});o.appendChild(d),o.appendChild(a),this._backdropMask=a,this._backdropMaskInner=u}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:n,y:r,width:i,height:s}=e;this._backdropMaskInner&&Ao(this._backdropMaskInner,{x:n,y:r,width:i,height:s})}_updateFrame(){let e=this.$["*cropBox"];if(!(!e||!this._frameGuides||!this._frameThumbs)){for(let n of Object.values(this._frameThumbs)){let{direction:r,pathNode:i,interactionNode:s,groupNode:o}=n,a=r==="",l=r.length===2,{x:u,y:d,width:h,height:p}=e;if(a){const y={x:u+h/3,y:d+p/3,width:h/3,height:p/3};Ao(s,y)}else{const y=$o(Math.min(h,p)/(tm*2+Ol)/2,0,1);let{d:I,center:P}=l?iO(e,r,y):sO(e,r,y);const C=Math.max(Jv*$o(Math.min(h,p)/Jv/3,0,1),rO);Ao(s,{x:P[0]-C,y:P[1]-C,width:C*2,height:C*2}),Ao(i,{d:I})}let g=this._shouldThumbBeDisabled(r);o.setAttribute("class",nr("thumb",{"thumb--hidden":g,"thumb--visible":!g}))}Ao(this._frameGuides,{x:e.x-ws*.5,y:e.y-ws*.5,width:e.width+ws,height:e.height+ws})}}_createThumbs(){const e={};for(let n=0;n<3;n++)for(let r=0;r<3;r++){let i=`${["n","","s"][n]}${["w","","e"][r]}`,s=qn("g");s.classList.add("thumb"),s.setAttribute("with-effects","");let o=qn("rect",{fill:"transparent"}),a=qn("path",{stroke:"currentColor",fill:"none","stroke-width":ab});s.appendChild(a),s.appendChild(o),e[i]={direction:i,pathNode:a,interactionNode:o,groupNode:s},o.addEventListener("pointerdown",this._handlePointerDown.bind(this,i))}return e}_createGuides(){let e=qn("svg"),n=qn("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"currentColor","stroke-width":ws,"stroke-opacity":.5});e.appendChild(n);for(let r=1;r<=2;r++){let i=qn("line",{x1:`${Gu*r}%`,y1:"0%",x2:`${Gu*r}%`,y2:"100%",stroke:"currentColor","stroke-width":ws,"stroke-opacity":.3});e.appendChild(i)}for(let r=1;r<=2;r++){let i=qn("line",{x1:"0%",y1:`${Gu*r}%`,x2:"100%",y2:`${Gu*r}%`,stroke:"currentColor","stroke-width":ws,"stroke-opacity":.3});e.appendChild(i)}return e.classList.add("guides","guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],n=document.createDocumentFragment(),r=this._createGuides();n.appendChild(r);let i=this._createThumbs();for(let{groupNode:s}of Object.values(i))n.appendChild(s);e.appendChild(n),this._frameThumbs=i,this._frameGuides=r}_handlePointerDown(e,n){if(!this._frameThumbs)return;let r=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let i=this.$["*cropBox"],{x:s,y:o}=this.ref["svg-el"].getBoundingClientRect(),a=n.x-s,l=n.y-o;this.$.dragging=!0,this._draggingThumb=r,this._dragStartPoint=[a,l],this._dragStartCrop={...i}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;e.stopPropagation(),e.preventDefault();let n=this.ref["svg-el"],{x:r,y:i}=n.getBoundingClientRect(),s=e.x-r,o=e.y-i,a=s-this._dragStartPoint[0],l=o-this._dragStartPoint[1],{direction:u}=this._draggingThumb;const d=this._calcCropBox(u,[a,l]);d&&(this.$["*cropBox"]=d)}_calcCropBox(e,n){var u;const[r,i]=n;let s=this.$["*imageBox"],o=this._dragStartCrop??this.$["*cropBox"];const a=(u=this.$["*cropPresetList"])==null?void 0:u[0],l=a?a.width/a.height:void 0;if(e===""?o=aO({rect:o,delta:[r,i],imageBox:s}):o=gO({rect:o,delta:[r,i],direction:e,aspectRatio:l,imageBox:s}),!Object.values(o).every(d=>Number.isFinite(d)&&d>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:o});return}return fh(bd(o),this.$["*imageBox"])}_handleSvgPointerMove_(e){if(!this._frameThumbs)return;let n=Object.values(this._frameThumbs).find(r=>{if(this._shouldThumbBeDisabled(r.direction))return!1;let s=r.interactionNode.getBoundingClientRect(),o={x:s.x,y:s.y,width:s.width,height:s.height};return yO(o,[e.x,e.y])});this._hoverThumb=n,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?oO(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:n})=>n).forEach(n=>{n.setAttribute("class",nr("thumb",{"thumb--hidden":!e,"thumb--visible":e}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",e=>{e&&(this._guidesHidden=e.height<=ye||e.width<=ye,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",e=>{this._frameGuides&&this._frameGuides.setAttribute("class",nr({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&e,"guides--semi-hidden":!this._guidesHidden&&!e}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}Rb.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class Cf extends Qe{constructor(){super(...arguments);U(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=nr({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}Cf.template=`
  <button role="option">
    <lr-icon set="@name: icon;"></lr-icon>
    <div class="title" ref="title-el">{{title}}</div>
  </button>
`;function QM(t){let e=t+90;return e=e>=360?0:e,e}function XM(t,e){return t==="rotate"?QM(e):["mirror","flip"].includes(t)?!e:null}class Nb extends Cf{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e)}),this.$["on.click"]=e=>{let n=this.$["*cropperEl"].getValue(this._operation),r=XM(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const bl={FILTER:"filter",COLOR_OPERATION:"color_operation"},Ki="original";class Lb extends Qe{constructor(){super(...arguments);U(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":n=>{this.$["*faderEl"].set(n),this.$.value=n}})}setOperation(n,r){this._controlType=n==="filter"?bl.FILTER:bl.COLOR_OPERATION,this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Ki?void 0:this.$.value,filter:this._filter===Ki?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=_a[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if(this._controlType===bl.FILTER){let a=s;if(o){let{name:l,amount:u}=o;a=l===this._filter?u:s}this.$.value=a,this.$.defaultValue=a}if(this._controlType===bl.COLOR_OPERATION){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;this._controlType===bl.FILTER?this._filter===Ki?n=null:n={name:this._filter,amount:this.$.value}:n=this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{let r=`${this._filter||this._operation} ${n}`;this.$["*operationTooltip"]=r})}}Lb.template=`
  <lr-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></lr-slider-ui>
`;function y1(t){let e=new Image;return{promise:new Promise((i,s)=>{e.src=t,e.onload=i,e.onerror=s}),image:e,cancel:()=>{e.naturalWidth===0&&(e.src=Ea)}}}function rm(t){let e=[];for(let s of t){let o=y1(s);e.push(o)}let n=e.map(s=>s.image);return{promise:Promise.allSettled(e.map(s=>s.promise)),images:n,cancel:()=>{e.forEach(s=>{s.cancel()})}}}class v1 extends Cf{constructor(){super(...arguments);U(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",o=100,a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==Ki?{name:this._filter,amount:o}:void 0,On(this._originalUrl,ts(zE,mf(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=y1(s);this._cancelPreload=l,a.catch(u=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:u})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===Ki,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let n=this.$["*originalUrl"];this._originalUrl=n,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;let i=this.ref["icon-el"];i.style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect(),this._cancelPreload&&this._cancelPreload()}}v1.template=`
  <button role="option">
    <div class="preview" ref="preview-el"></div>
    <lr-icon ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>
  </button>
`;class Ob extends Cf{constructor(){super(...arguments);U(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=n=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",n=>{n&&(this._operation=n,this.$.icon=n,this.bindL10n("title",()=>this.l10n(n)))}),this.sub("*editorTransformations",n=>{if(!this._operation)return;let{zero:r}=_a[this._operation],i=n[this._operation],s=typeof i<"u"?i!==r:!1;this.$.active=s})}}function YM(t,e){let n={};for(let r of e){let i=t[r];(t.hasOwnProperty(r)||i!==void 0)&&(n[r]=i)}return n}function _1(t,e,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(e*i),3e3),o=i>=2?"lightest":"normal";return On(t,ts(zE,mf(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function ZM(t){return t?[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(t)):!0}class Mb extends Qe{constructor(){super();U(this,"ctxOwner",!0);this.init$={...this.init$,image:null,"*padding":nO,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=$n(this._commit.bind(this),300),this._handleResizeThrottled=Tb(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let n=this.$["*editorTransformations"],r=YM(n,Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r==null||r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o={width:this.offsetWidth,height:this.offsetHeight},a=wl({width:n.naturalWidth,height:n.naturalHeight},s),l;if(a.width>o.width-r*2||a.height>o.height-r*2){let u=a.width/a.height,d=o.width/o.height;if(u>d){let h=o.width-r*2,p=h/u,g=0+r,y=r+(o.height-r*2)/2-p/2;l={x:g,y,width:h,height:p}}else{let h=o.height-r*2,p=h*u,g=r+(o.width-r*2)/2-p/2,y=0+r;l={x:g,y,width:p,height:h}}}else{let{width:u,height:d}=a,h=r+(o.width-r*2)/2-u/2,p=r+(o.height-r*2)/2-d/2;l={x:h,y:p,width:u,height:d}}this.$["*imageBox"]=bd(l)}_alignCrop(){var p;let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop,{width:a,x:l,y:u}=this.$["*imageBox"];if(o){let{dimensions:[g,y],coords:[I,P]}=o,{width:C}=wl(this._imageSize,s),v=a/C;n=fh(bd({x:l+I*v,y:u+P*v,width:g*v,height:y*v}),this.$["*imageBox"])}const d=(p=this.$["*cropPresetList"])==null?void 0:p[0],h=d?d.width/d.height:void 0;if(!vO(n,r)||h&&!_O(n,h)){const g=r.width/r.height;let y=r.width,I=r.height;h&&(g>h?y=Math.min(r.height*h,r.width):I=Math.min(r.width/h,r.height)),n={x:r.x+r.width/2-y/2,y:r.y+r.height/2-I/2,width:y,height:I}}this.$["*cropBox"]=fh(bd(n),this.$["*imageBox"])}_drawImage(){let n=this._ctx;if(!n)return;let r=this.$.image,i=this.$["*imageBox"],s=this.$["*operations"],{mirror:o,flip:a,rotate:l}=s,u=wl({width:i.width,height:i.height},l);n.save(),n.translate(i.x+i.width/2,i.y+i.height/2),n.rotate(l*Math.PI*-1/180),n.scale(o?-1:1,a?-1:1),n.drawImage(r,-u.width/2,-u.height/2,u.width,u.height),n.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=nr({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_getCropDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:u}=wl(this._imageSize,s),{width:d,height:h}=n,p=o/l,g=a/u;return[$o(Math.round(d/p),1,l),$o(Math.round(h/g),1,u)]}_getCropTransformation(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:u}=r,{width:d,height:h}=wl(this._imageSize,s),{x:p,y:g}=n,y=o/d,I=a/h,P=this._getCropDimensions(),C={dimensions:P,coords:[$o(Math.round((p-l)/y),0,d-P[0]),$o(Math.round((g-u)/I),0,h-P[1])]};if(!ZM(C)){console.error("Cropper is trying to create invalid crop object",{payload:C});return}if(!(P[0]===d&&P[1]===h))return C}_commit(){if(!this.isConnected||!this._imageSize)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._getCropTransformation(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}async activate(n,{fromViewer:r}={}){if(!this._isActive){this._isActive=!0,this._imageSize=n,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:r})}catch(i){console.error("Failed to activate cropper",{error:i})}this._observer=new ResizeObserver(([i])=>{i.contentRect.width>0&&i.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:n=!1}={}){var r;this._isActive&&(!n&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=nr({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),(r=this._observer)==null||r.disconnect())}_transitionToCrop(){let n=this._getCropDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(_1(n,i,r)),{promise:o,cancel:a,image:l}=y1(s),u=this._handleImageLoading(s);return l.addEventListener("load",u,{once:!0}),l.addEventListener("error",u,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(d=>(console.error("Failed to load image",{error:d}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{var s;(s=i==null?void 0:i.get(r))!=null&&s.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var n;super.destroyCallback(),(n=this._observer)==null||n.disconnect()}}Mb.template=`
  <canvas class="canvas" ref="canvas-el"></canvas>
  <lr-crop-frame ref="frame-el"></lr-crop-frame>
`;function g_(t,e,n){let r=Array(n);n--;for(let i=n;i>=0;i--)r[i]=Math.ceil((i*e+(n-i)*t)/n);return r}function JM(t){return t.reduce((e,n,r)=>r<t.length-1?[...e,[n,t[r+1]]]:e,[])}function eD(t,e,n){let r=JM(t).find(([i,s])=>i<=e&&e<=s);return t.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(e-r[0])/s;return r[0]===i?e>n?1:1-o:r[1]===i?e>=n?o:1:0})}function tD(t,e){return t.map((n,r)=>n<e?t.length-r:r)}function y_(t,e){let n=_a[t].keypointsNumber,{range:r,zero:i}=_a[t];return[...new Set([...g_(r[0],i,n+1),...g_(i,r[1],n+1),i,e])].sort((s,o)=>s-o)}class nD extends Qe{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=$n(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(e){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),()=>{var i;(i=r==null?void 0:r.get(n))!=null&&i.has(e)&&(r.get(n).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:n}=e;n&&(n.style.opacity=e.opacity.toString(),n.style.zIndex=e.zIndex.toString())}})}_imageSrc({url:e=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};r&&(s[r]=n?{name:n,amount:i}:i);let o=this.offsetWidth;return this.proxyUrl(_1(e,o,s))}_constructKeypoint(e,n){return{src:this._imageSrc({operation:e,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(e,n){return this._operation===e&&this._filter===n}_addKeypoint(e,n,r){let i=()=>!this._isSame(e,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(e,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,u=l.findIndex(h=>h.value>r),d=u<l.length?l[u].image:null;!this._container||d&&!this._container.contains(d)||(l.splice(u,0,s),this._container.insertBefore(o,d),this._update(e,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e=typeof e=="string"?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,n){this._operation=e,this._value=n;let{zero:r}=_a[e],i=this._keypoints.map(a=>a.value),s=eD(i,n,r),o=tD(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let n=document.createElement("div");e.appendChild(n);let r=this._keypoints.map(u=>u.src),{images:i,promise:s,cancel:o}=rm(r);i.forEach(u=>{let d=this._handleImageLoading(u.src);u.addEventListener("load",d),u.addEventListener("error",d)}),this._cancelLastImages=()=>{o(),this._cancelLastImages=void 0};let a=this._operation,l=this._filter;await s,this._isActive&&this._isSame(a,l)&&(this._container&&this._container.remove(),this._container=n,this._keypoints.forEach((u,d)=>{let h=i[d];h.classList.add("fader-image"),u.image=h,this._container.appendChild(h)}),this.appendChild(e),this._flush())}setTransformations(e){if(this._transformations=e,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:e,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=y_(r,i).map(l=>this._imageSrc({url:e,filter:n,operation:r,value:l})),{cancel:a}=rm(o);this._cancelBatchPreload=a}_setOriginalSrc(e){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===e){n.style.opacity="1",n.style.transform="scale(1)",this.className=nr({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1});return}n.style.opacity="0";let r=this._handleImageLoading(e);n.addEventListener("error",r,{once:!0}),n.src=e,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=nr({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:e,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,typeof r!="number"&&!i){let a=this._imageSrc({operation:n,value:r});this._setOriginalSrc(a),this._container&&this._container.remove();return}this._keypoints=y_(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=nr({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const rD=1;class Db extends Qe{initCallback(){super.initCallback(),this.addEventListener("wheel",e=>{e.preventDefault();let{deltaY:n,deltaX:r}=e;Math.abs(r)>rD?this.scrollLeft+=r:this.scrollLeft+=n},{passive:!1}),this.addEventListener("scroll",()=>{},{passive:!0})}}Db.template=" <slot></slot> ";function iD(t){return`
    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.${t}; styles: presence.tabToggleStyles;">
      <lr-btn-ui
        theme="tab"
        ref="tab-toggle-${t}"
        data-id="${t}"
        icon="${t}"
        set="onclick: on.clickTab; aria-role:tab_role; aria-controls:tab_${t}"
      >
      </lr-btn-ui>
    </lr-presence-toggle>
  `}function sD(t){return`
    <lr-presence-toggle
      id="tab_${t}"
      class="tab-content"
      set="visible: presence.tabContent.${t}; styles: presence.tabContentStyles"
    >
      <lr-editor-scroller hidden-scrollbar>
        <div class="controls-list_align">
          <div role="listbox" aria-orientation="horizontal" class="controls-list_inner" ref="controls-list-${t}"></div>
        </div>
      </lr-editor-scroller>
    </lr-presence-toggle>
  `}class Vb extends Qe{constructor(){super();U(this,"_updateInfoTooltip",$n(()=>{var o,a;const n=this.$["*editorTransformations"],r=this.$["*currentOperation"];let i="",s=!1;if(this.$["*tabId"]===lt.FILTERS)if(s=!0,this.$["*currentFilter"]&&((o=n==null?void 0:n.filter)==null?void 0:o.name)===this.$["*currentFilter"]){let l=((a=n==null?void 0:n.filter)==null?void 0:a.amount)||100;i=this.$["*currentFilter"]+" "+l}else i=this.l10n(Ki);else if(this.$["*tabId"]===lt.TUNING&&r){s=!0;let l=(n==null?void 0:n[r])||_a[r].zero;i=this.l10n(r)+" "+l}s&&(this.$["*operationTooltip"]=i),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",s)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Ki,"*currentOperation":null,showLoader:!1,filters:xN,colorOperations:AN,cropOperations:kN,"*operationTooltip":null,"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":n=>{const r=n.currentTarget.getAttribute("data-id");r&&this._activateTab(r,{fromViewer:!1})},tab_role:"tab",[`tab_${lt.TUNING}`]:`tab_${lt.TUNING}`,[`tab_${lt.CROP}`]:`tab_${lt.CROP}`,[`tab_${lt.FILTERS}`]:`tab_${lt.FILTERS}`},this._debouncedShowLoader=$n(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===lt.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(n){let r=new Ob;return r.operation=n,r}_createFilterControl(n){let r=new v1;return r.filter=n,r}_createToggleControl(n){let r=new Nb;return r.operation=n,r}_renderControlsList(n){let r=this.ref[`controls-list-${n}`],i=document.createDocumentFragment();n===lt.CROP?this.$.cropOperations.forEach(s=>{let o=this._createToggleControl(s);i.appendChild(o)}):n===lt.FILTERS?[Ki,...this.$.filters].forEach(s=>{let o=this._createFilterControl(s);i.appendChild(o)}):n===lt.TUNING&&this.$.colorOperations.forEach(s=>{let o=this._createOperationControl(s);i.appendChild(o)}),[...i.children].forEach((s,o)=>{o===i.childNodes.length-1&&s.classList.add("controls-list_last-item")}),r.innerHTML="",r.appendChild(i)}_activateTab(n,{fromViewer:r}){this.$["*tabId"]=n,n===lt.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:r})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:r}),this.$["*cropperEl"].deactivate());for(let i of Tr){let s=i===n,o=this.ref[`tab-toggle-${i}`];o.active=s,s?(this._renderControlsList(n),this._syncTabIndicator()):this._unmountTabControls(i),this.$[`presence.tabContent.${i}`]=s}}_unmountTabControls(n){let r=this.ref[`controls-list-${n}`];r&&(r.innerHTML="")}_syncTabIndicator(){let n=this.ref[`tab-toggle-${this.$["*tabId"]}`],r=this.ref["tabs-indicator"];r.style.transform=`translateX(${n.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.$["*imgContainerEl"].offsetWidth,r=this.proxyUrl(_1(this.$["*originalUrl"],n,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:i}=rm([r]);this._cancelPreload=()=>{i(),this._cancelPreload=void 0}}}_showLoader(n){this.$.showLoader=n}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",n=>{n&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",n=>{var i;let r=(i=n==null?void 0:n.filter)==null?void 0:i.name;this.$["*currentFilter"]!==r&&(this.$["*currentFilter"]=r)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",n=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(n)}),this.sub("*loadingOperations",n=>{let r=!1;for(let[,i]of n.entries()){if(r)break;for(let[,s]of i.entries())if(s){r=!0;break}}this._debouncedShowLoader(r)}),this.sub("*showSlider",n=>{this.$["presence.subToolbar"]=n,this.$["presence.mainToolbar"]=!n}),this.sub("*tabList",n=>{this.$["presence.tabToggles"]=n.length>1;for(const r of Tr){this.$[`presence.tabToggle.${r}`]=n.includes(r);const i=this.ref[`tab-toggle-${r}`];i.style.gridColumn=n.indexOf(r)+1}n.includes(this.$["*tabId"])||this._activateTab(n[0],{fromViewer:!1})}),this._updateInfoTooltip()}}Vb.template=`
  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
  <div class="info-tooltip_container">
    <div class="info-tooltip_wrapper">
      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="toolbar-container">
    <lr-presence-toggle
      role="tablist"
      class="sub-toolbar"
      set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles"
    >
      <div class="tab-content-row">${Tr.map(sD).join("")}</div>
      <div class="controls-row">
        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">
          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>
          ${Tr.map(iD).join("")}
        </lr-presence-toggle>
        <lr-btn-ui style="order: -1" theme="secondary-icon" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>
        <lr-btn-ui theme="primary-icon" icon="done" set="onclick: on.apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">
      <div class="slider">
        <lr-editor-slider ref="slider-el"></lr-editor-slider>
      </div>
      <div class="controls-row">
        <lr-btn-ui theme="secondary" set="onclick: on.cancelSlider;" l10n="@text:cancel"> </lr-btn-ui>
        <lr-btn-ui theme="primary" set="onclick: on.applySlider;" l10n="@text:apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
  </div>
`;class w1 extends Qe{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null,"aria-role":"","aria-controls":""},this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return nr("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{e!=="custom"&&(this.className=e)}),this.sub("text",e=>{this._iconSingle=!1}),this.hasAttribute("theme")||this.setAttribute("theme","default"),this.defineAccessor("aria-role",e=>{this.$["aria-role"]=e||""}),this.defineAccessor("aria-controls",e=>{this.$["aria-controls"]=e||""})}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}w1.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});w1.template=`
  <button set="@role:aria-role; @aria-controls: aria-controls">
    <lr-icon set="className: iconCss; @name: icon; @hidden: !icon"></lr-icon>
    <div class="text">{{text}}</div>
  </button>
`;class Ub extends Qe{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",e=>{typeof e=="boolean"&&(e?this._start():this._stop())})}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),n=this.ref["line-el"];n.style.transition="transform 1s",n.style.opacity="1",n.style.transform=`translateX(${e}px)`,n.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}Ub.template=`
  <div class="inner">
    <div class="line" ref="line-el"></div>
  </div>
`;const Zu={transition:"transition",visible:"visible",hidden:"hidden"};class Fb extends Qe{constructor(){super(),this._visible=!1,this._visibleStyle=Zu.visible,this._hiddenStyle=Zu.hidden,this._externalTransitions=!1,this.defineAccessor("styles",e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)}),this.defineAccessor("visible",e=>{typeof e=="boolean"&&(this._visible=e,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",HM(this,{[Zu.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.classList.toggle("initial",!0),this._externalTransitions||this.classList.add(Zu.transition),this._handleVisible(),setTimeout(()=>{this.classList.toggle("initial",!1)},0)}}Fb.template="<slot></slot> ";class $b extends Qe{constructor(){super();U(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;n===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),u=document.createElement("div");l.className="minor-step",u.className="border-step",a.appendChild(u);for(let h=0;h<o;h++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());for(let h=0;h<o;h++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());let d=document.createElement("div");d.className="zero-dot",a.appendChild(d),this._zeroDotEl=d,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){var n;(n=this._observer)==null||n.disconnect()}}$b.template=`
  <div class="steps" ref="steps-el"></div>
  <div ref="thumb-el" class="thumb"></div>
  <input
    class="input"
    type="range"
    ref="input-el"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class oD extends Je{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"activityType",_e.activities.CLOUD_IMG_EDIT);this.init$={...this.init$,cdnUrl:null}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",n=>{n&&(this.entry=n,this.entry.subscribe("cdnUrl",r=>{r&&(this.$.cdnUrl=r)}))}),this.subConfigValue("cropPreset",n=>{this._instance&&this._instance.getAttribute("crop-preset")!==n&&this._instance.setAttribute("crop-preset",n)}),this.subConfigValue("cloudImageEditorTabs",n=>{this._instance&&this._instance.getAttribute("tabs")!==n&&this._instance.setAttribute("tabs",n)})}handleApply(n){if(!this.entry)return;let r=n.detail;this.entry.setMultipleValues({cdnUrl:r.cdnUrl,cdnUrlModifiers:r.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const n=new Ua,r=this.$.cdnUrl,i=this.cfg.cropPreset,s=this.cfg.cloudImageEditorTabs;n.setAttribute("ctx-name",this.ctxName),n.setAttribute("cdn-url",r),i&&n.setAttribute("crop-preset",i),s&&n.setAttribute("tabs",s),n.addEventListener("apply",o=>{const a=o;this.handleApply(a),this.debugPrint('editor event "apply"',a.detail)}),n.addEventListener("cancel",o=>{const a=o;this.handleCancel(),this.debugPrint('editor event "cancel"',a.detail)}),n.addEventListener("change",o=>{const a=o;this.debugPrint('editor event "change"',a.detail)}),this.innerHTML="",this.appendChild(n),this._mounted=!0,this._instance=n}unmountEditor(){this._instance=void 0,this.innerHTML=""}}const aD=function(t){return t.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},lD=function(t,e="i"){const n=t.split("*").map(aD);return new RegExp("^"+n.join(".+")+"$",e)},cD=t=>Object.keys(t).reduce((n,r)=>{const i=t[r],s=Object.keys(i).reduce((o,a)=>{const l=i[a];return o+`${a}: ${l};`},"");return n+`${r}{${s}}`},"");function uD({textColor:t,backgroundColor:e,linkColor:n,linkColorHover:r,secondaryColor:i,secondaryHover:s,secondaryForegroundColor:o,fontFamily:a,fontSize:l,radius:u}){const d=`solid 1px ${i}`;return cD({body:{color:t,"background-color":e,"font-family":a,"font-size":l},".side-bar":{background:"inherit","border-right":d},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":d},".list-table-body .list-items":{"border-bottom":d},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${e} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"},"input[type=submit], .button, button":{color:o,background:i,"box-shadow":"none",border:"none","border-radius":u},"input[type=submit]:hover, .button:hover, button:hover":{background:s},".text-field, input[type=search], input[type=text], input[type=url], textarea":{color:o,"border-radius":u,background:i,border:d}})}let Qi={};window.addEventListener("message",t=>{let e;try{e=JSON.parse(t.data)}catch{return}if((e==null?void 0:e.type)in Qi){let n=Qi[e.type];for(let[r,i]of n)t.source===r&&i(e)}});const dD=function(t,e,n){t in Qi||(Qi[t]=[]),Qi[t].push([e,n])},hD=function(t,e){t in Qi&&(Qi[t]=Qi[t].filter(n=>n[0]!==e))};function fD(t){let e=[];for(let[n,r]of Object.entries(t))r==null||typeof r=="string"&&r.length===0||e.push(`${n}=${encodeURIComponent(r)}`);return e.join("&")}class jb extends Je{constructor(){super();U(this,"couldBeCtxOwner",!0);U(this,"activityType",_e.activities.EXTERNAL);U(this,"_iframe",null);this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],counter:0,multiple:!1,onDone:()=>{for(const n of this.$.selectedList){const r=this.extractUrlFromMessage(n),{filename:i}=n,{externalSourceType:s}=this.activityParams;this.addFileFromUrl(r,{fileName:i,source:s})}this.$["*currentActivity"]=_e.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n==null?void 0:n[0].toUpperCase()}${n==null?void 0:n.slice(1)}`,activityIcon:n}),this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()}),this.sub("selectedList",n=>{this.$.counter=n.length}),this.subConfigValue("multiple",n=>{this.$.multiple=n})}extractUrlFromMessage(n){if(n.alternatives){const r=ns(this.cfg.externalSourcesPreferredTypes);for(const i of r){const s=lD(i);for(const[o,a]of Object.entries(n.alternatives))if(s.test(o))return a}}return n.url}sendMessage(n){var r,i;(i=(r=this._iframe)==null?void 0:r.contentWindow)==null||i.postMessage(JSON.stringify(n),"*")}async handleFileSelected(n){!this.$.multiple&&this.$.selectedList.length||(this.$.selectedList=[...this.$.selectedList,n],this.$.multiple||this.$.onDone())}handleIframeLoad(){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={radius:this.getCssValue("--uc-radius"),backgroundColor:this.getCssValue("--uc-background"),textColor:this.getCssValue("--uc-foreground"),secondaryColor:this.getCssValue("--uc-secondary"),secondaryForegroundColor:this.getCssValue("--uc-secondary-foreground"),secondaryHover:this.getCssValue("--uc-secondary-hover"),linkColor:this.getCssValue("--uc-primary"),linkColorHover:this.getCssValue("--uc-primary-hover"),fontFamily:this.getCssValue("--uc-font-family"),fontSize:this.getCssValue("--uc-font-size")};this.sendMessage({type:"embed-css",style:uD(n)})}remoteUrl(){var u,d;const{pubkey:n,remoteTabSessionKey:r,socialBaseUrl:i}=this.cfg,{externalSourceType:s}=this.activityParams,a={lang:((d=(u=this.l10n("social-source-lang"))==null?void 0:u.split("-"))==null?void 0:d[0])||"en",public_key:n,images_only:"false",pass_window_open:!1,session_key:r},l=new URL(`/window3/${s}`,i);return l.search=fD(a),l.toString()}mountIframe(){let n=NE({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),dD("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n,this.$.selectedList=[]}unmountIframe(){this._iframe&&hD("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}jb.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon set="@name: activityIcon"></lr-icon>
      <span>{{activityCaption}}</span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <div ref="iframeWrapper" class="iframe-wrapper"></div>
    <div class="toolbar">
      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div></div>
      <div set="@hidden: !multiple" class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>
      <button
        type="button"
        class="done-btn primary-btn"
        set="onclick: onDone; @disabled: !counter"
        l10n="done"
      ></button>
    </div>
  </div>
`;class pD extends Je{constructor(){super(...arguments);U(this,"requireCtxName",!0)}_createValidationInput(){const n=document.createElement("input");return n.type="text",n.name=this.ctxName,n.required=this.cfg.multipleMin>0,n.tabIndex=-1,RE(n,{opacity:0,height:0,width:0}),n}initCallback(){super.initCallback(),this._validationInputElement=this._createValidationInput(),this.appendChild(this._validationInputElement),this.sub("*collectionState",n=>{var r;{if(this._dynamicInputsContainer||(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer)),!this._validationInputElement){const a=this._createValidationInput();this.appendChild(a),this._validationInputElement=a}if(this._dynamicInputsContainer.innerHTML="",n.status==="uploading"||n.status==="idle"){this._validationInputElement.value="",this._validationInputElement.setCustomValidity("");return}if(n.status==="failed"){const a=(r=n.errors[0])==null?void 0:r.message;this._validationInputElement.value="",this._validationInputElement.setCustomValidity(a);return}const i=n.group?n.group:null;if(i){this._validationInputElement.value=i.cdnUrl,this._validationInputElement.setCustomValidity("");return}const s=n.allEntries.map(a=>a.cdnUrl);if(!this.cfg.multiple&&s.length===1){this._validationInputElement.value=s[0],this._validationInputElement.setCustomValidity("");return}this._validationInputElement.remove(),this._validationInputElement=null;const o=new DocumentFragment;for(let a of s){const l=document.createElement("input");l.type="hidden",l.name=`${this.ctxName}[]`,l.value=a,o.appendChild(l)}this._dynamicInputsContainer.replaceChildren(o)}},!1)}}class mD extends _e{}class zb extends Qe{constructor(){super(...arguments);U(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:n=>{var r;n.preventDefault(),n.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((r=this.$.options.find(i=>i.value==this.value))==null?void 0:r.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",n=>{var i;this.$.currentText=((i=n==null?void 0:n[0])==null?void 0:i.text)||"";let r="";n==null||n.forEach(s=>{r+=`<option value="${s.value}">${s.text}</option>`}),this.$.selectHtml=r})}}zb.template=' <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select> ';class Bb extends Qe{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",e=>{this.toggleAttribute("hidden",!!e)})}}U(Bb,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="credits"
      >Powered by Uploadcare</a
    >
  `);const Jl=class Jl extends ou{constructor(){super(),this.init$={...this.init$,isHidden:!1}}initCallback(){super.initCallback(),this.defineAccessor("headless",e=>{this.set$({isHidden:it(e)})}),this.sub("*modalActive",e=>{this._lastModalActive!==e&&this.emit(e?at.MODAL_OPEN:at.MODAL_CLOSE,void 0,{debounce:!0}),this._lastModalActive=e},!1)}};U(Jl,"styleAttrs",[...mi(Jl,Jl,"styleAttrs"),"lr-file-uploader-regular"]);let ba=Jl;ba.template=`
  <lr-simple-btn set="@hidden: isHidden"></lr-simple-btn>

  <lr-modal strokes block-body-scrolling>
    <lr-start-from>
      <lr-drop-area with-icon clickable></lr-drop-area>
      <lr-source-list wrap></lr-source-list>
      <button type="button" l10n="start-from-cancel" class="secondary-btn" set="onclick: *historyBack"></button>
      <lr-copyright></lr-copyright>
    </lr-start-from>
    <lr-upload-list></lr-upload-list>
    <lr-camera-source></lr-camera-source>
    <lr-url-source></lr-url-source>
    <lr-external-source></lr-external-source>
    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>
  </lr-modal>

  <lr-progress-bar-common></lr-progress-bar-common>
`;ba.bindAttributes({headless:null});const ec=class ec extends ou{initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||_e.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0?this.$["*currentActivity"]=_e.activities.UPLOAD_LIST:this.$["*currentActivity"]=e.initActivity||_e.activities.START_FROM}),this.subConfigValue("sourceList",n=>{n!=="local"&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",n=>{n!==!1&&(this.cfg.confirmUpload=!1)})}};U(ec,"styleAttrs",[...mi(ec,ec,"styleAttrs"),"lr-file-uploader-minimal"]);let Ta=ec;Ta.template=`
  <lr-start-from>
    <lr-drop-area tabindex="0" clickable l10n="choose-file"></lr-drop-area>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
`;const tc=class tc extends ou{constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=_e.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const e=this.$["*history"];return e.length>1&&e[e.length-1]!==_e.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}initCallback(){super.initCallback();const e=this.ref.uBlock;this.sub("*currentActivity",n=>{n||(this.$["*currentActivity"]=e.initActivity||_e.activities.START_FROM)}),this.sub("*uploadList",n=>{(n==null?void 0:n.length)>0&&this.$["*currentActivity"]===(e.initActivity||_e.activities.START_FROM)&&(this.$["*currentActivity"]=_e.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}};U(tc,"styleAttrs",[...mi(tc,tc,"styleAttrs"),"lr-file-uploader-inline"]);let gh=tc;gh.template=` <lr-start-from>
    <lr-drop-area with-icon clickable></lr-drop-area>
    <lr-source-list wrap></lr-source-list>
    <button
      type="button"
      l10n="start-from-cancel"
      class="cancel-btn secondary-btn"
      set="onclick: cancel; @hidden: !couldCancel"
    ></button>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-camera-source></lr-camera-source>
  <lr-url-source></lr-url-source>
  <lr-external-source></lr-external-source>
  <lr-progress-bar></lr-progress-bar>
  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;const nc=class nc extends Ua{initCallback(){var e;super.initCallback(),(e=this.a11y)==null||e.registerBlock(this)}};U(nc,"styleAttrs",[...mi(nc,nc,"styleAttrs"),"lr-wgt-common"]);let im=nc;function au(t){for(let e in t){let n=[...e].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+=i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),t[e].reg&&t[e].reg(n)}}const xp="LR";async function gD(t,e=!1){return new Promise((n,r)=>{if(typeof document!="object"){n(null);return}if(typeof window=="object"&&window[xp]){n(window[xp]);return}let i=document.createElement("script");i.async=!0,i.src=t,i.onerror=()=>{r()},i.onload=()=>{let s=window[xp];e&&au(s),n(s)},document.head.appendChild(i)})}const E1=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:_e,ActivityHeader:mD,BaseComponent:pf,Block:Qe,CameraSource:Sb,CloudImageEditor:im,CloudImageEditorActivity:oD,CloudImageEditorBlock:Ua,Config:db,Copyright:Bb,CropFrame:Rb,Data:Oe,DropArea:Mc,EditorCropButtonControl:Nb,EditorFilterControl:v1,EditorImageCropper:Mb,EditorImageFader:nD,EditorOperationControl:Ob,EditorScroller:Db,EditorSlider:Lb,EditorToolbar:Vb,ExternalSource:jb,FileItem:Fs,FileUploaderInline:gh,FileUploaderMinimal:Ta,FileUploaderRegular:ba,FormInput:pD,Icon:m1,Img:oM,LineLoaderUi:Ub,LrBtnUi:w1,Modal:mh,PACKAGE_NAME:t1,PACKAGE_VERSION:n1,PresenceToggle:Fb,ProgressBar:kb,ProgressBarCommon:xb,Select:zb,SimpleBtn:Oc,SliderUi:$b,SolutionBlock:ou,SourceBtn:g1,SourceList:fM,StartFrom:fb,UID:iu,UploadCtxProvider:nm,UploadList:Cb,UploaderBlock:Je,UrlSource:Ib,connectBlocksFrom:gD,defineLocale:ob,registerBlocks:au,toKebabCase:bf},Symbol.toStringTag,{value:"Module"})),yD=new Set(["children","ref","style","className"]),vD=(t={})=>Object==null?void 0:Object.keys(t).reduce((e,n)=>{var r,i;const s=t==null?void 0:t[n],o=`on${(i=(r=s==null?void 0:s.split("-"))==null?void 0:r.map(a=>a.charAt(0).toUpperCase()+a.slice(1)))==null?void 0:i.join("")}`;return e[o]=s,e},{}),v_=new WeakMap,_D=t=>{let e=v_.get(t);return e===void 0&&(e=new Map,v_.set(t,e)),e},__=({node:t,nameProp:e,valueProp:n,prevValueProp:r,event:i})=>{if(i!==void 0){if(n!==r){const s=_D(t),o=s.has(i);let a=s.get(i);n!==void 0?o?a.handleEvent=n:(a={handleEvent:n},s.set(i,a),t.addEventListener(i,l=>a.handleEvent(l.detail))):o&&(s.delete(i),t.removeEventListener(i,a))}return}t[e]=n,n==null&&e in HTMLElement.prototype&&t.removeAttribute(e)},wD=(t,e,n)=>{const r={},i={};return Object.entries(t).forEach(([s,o])=>{yD.has(s)?r[s==="className"?"class":s]=o:e.has(s)||s in n.prototype?i[s]=o:r[s]=o}),{reactProps:r,customElProps:i}},lu=({react:t,tag:e,elClass:n,schemaEvents:r})=>{const i=vD(r),s=new Set(Object.keys(i??{})),o=t.forwardRef((a,l)=>{const u=t.useRef(new Map),d=t.useRef(null),{reactProps:h,customElProps:p}=wD(a,s,n);return t.useLayoutEffect(()=>{if(d.current===null)return;const g=new Map;for(const y in p)__({node:d.current,nameProp:y,valueProp:p[y],prevValueProp:u.current.get(y),event:i[y]}),u.current.delete(y),g.set(y,a[y]);for(const[y,I]of u.current)__({node:d.current,nameProp:y,valueProp:void 0,prevValueProp:I,event:i[y]});u.current=g}),t.createElement(e??n.__tag,{...h,ref:t.useCallback(g=>{d.current=g,typeof l=="function"?l(g):l!==null&&(l.current=g)},[l])})});return o.displayName=n.name,o},ED=lu({react:Ln,tag:"lr-config",elClass:db}),bD=lu({react:Ln,tag:"lr-upload-ctx-provider",elClass:nm,schemaEvents:nm.EventType}),TD=t=>{const e={},n={};return Object.entries(t).forEach(([r,i])=>{r.startsWith("on")?e[r]=i:n[r]=i}),{eventHandlers:e,config:n}},CD="0.6.0",ID="React-Uploader",SD=()=>`${ID}/${CD}`,AD=({children:t})=>t,xD=()=>{const[t,e]=V.useState(!1);return V.useEffect(()=>{typeof window<"u"&&e(!0)},[]),t};au(E1);const kD=lu({react:Ln,tag:"lr-file-uploader-regular",elClass:ba}),PD=({ctxName:t,className:e,classNameUploader:n,apiRef:r,fallback:i,...s})=>{const o=V.useMemo(()=>t??iu.generate(),[t]),{eventHandlers:a,config:l}=V.useMemo(()=>TD(s),[s]),u=xD();return Ln.createElement(AD,{condition:u,fallback:i},Ln.createElement("div",{className:e},Ln.createElement(ED,{userAgentIntegration:SD(),"ctx-name":o,...l}),Ln.createElement(bD,{ref:r,"ctx-name":o,...a}),Ln.createElement(kD,{class:n,"ctx-name":o})))};au(E1);lu({react:Ln,tag:"lr-file-uploader-minimal",elClass:Ta});au(E1);lu({react:Ln,tag:"lr-file-uploader-inline",elClass:Ta});function Hb({fileEntry:t,onChange:e,preview:n}){const[r,i]=V.useState([]),s=V.useRef(null),o=l=>{const u=l.allEntries.filter(d=>d.status==="success");i(u),e({files:u})},a=V.useCallback(l=>{const u=t.files.filter(d=>d.uuid!==l);i(u),e({files:u})},[t.files,e]);return V.useEffect(()=>{var u;const l=d=>{if(d.detail){console.log("The uploaded file event is: ",d);const h=[...d.detail];i(h),e({files:h})}};return(u=s.current)==null||u.addEventListener("data-output",l),()=>{var d;(d=s.current)==null||d.removeEventListener("data-output",l)}},[i,e]),E.jsxs("div",{children:[E.jsx(PD,{pubkey:"c22201d199b2c9210ca1",maxLocalFileSizeBytes:1e7,multipleMax:10,multiple:n,imgOnly:!0,sourceList:"local, url, camera",confirmUpload:!1,removeCopyright:!0,classNameUploader:"my-config uc-light",onChange:o,apiRef:s}),n?E.jsx("div",{className:"grid grid-cols-2 gap-4 mt-8",children:r.map(l=>{var u,d;return E.jsxs("div",{className:"relative",children:[E.jsx("img",{src:`${l.cdnUrl}/-/format/webp/-/quality/smart/-/stretch/fill/`,alt:((u=l.fileInfo)==null?void 0:u.originalFilename)||"",title:((d=l.fileInfo)==null?void 0:d.originalFilename)||""},l.uuid),E.jsx("div",{className:"size-5 flex justify-center items-center absolute -right-1.5 -top-1.5 bg-white border-[1px] border-slate-800 cursor-pointer rounded-full",children:E.jsx("button",{type:"button",className:"text-slate-800 text-center",onClick:()=>a(l.uuid),children:"×"})})]},l.uuid)})}):E.jsx(E.Fragment,{})]})}var RD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ND=RD.reduce((t,e)=>{const n=V.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?sg:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),LD="Label",Wb=V.forwardRef((t,e)=>E.jsx(ND.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Wb.displayName=LD;var qb=Wb;const OD=i4("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rr=V.forwardRef(({className:t,...e},n)=>E.jsx(qb,{ref:n,className:Tn(OD(),t),...e}));rr.displayName=qb.displayName;const Gb=V.forwardRef(({className:t,...e},n)=>E.jsx("textarea",{className:Tn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Gb.displayName="Textarea";function MD(){const t=no(),{user:e}=Sr(),[n,r]=V.useState({files:[]}),[i,s]=V.useState({caption:"",photos:[],likes:0,userlikes:[],userId:null,date:new Date}),o=async a=>{a.preventDefault(),console.log("Uploaded file entry: ",n.files),console.log("The create post is: ",i);const l=n.files.map(u=>({cdnUrl:u.cdnUrl,uuid:u.uuid}));if(e!=null){const u={...i,userId:e==null?void 0:e.uid,photos:l,username:e.displayName,photoURL:e.photoURL};console.log("The final posy is: ",u),await qR(u),t("/")}else t("/login")};return E.jsx(ru,{children:E.jsx("div",{className:"flex justify-center",children:E.jsxs("div",{className:"border max-w-3xl w-full",children:[E.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Create Post"}),E.jsx("div",{className:"p-8",children:E.jsxs("form",{onSubmit:o,children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx(rr,{className:"mb-4",htmlFor:"caption",children:"Photo Caption"}),E.jsx(Gb,{id:"caption",className:"mb-8",placeholder:"What's in your photo",value:i.caption,onChange:a=>s({...i,caption:a.target.value})})]}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx(rr,{className:"mb-4",htmlFor:"photo",children:"Photos"}),E.jsx(Hb,{fileEntry:n,onChange:r,preview:!0})]}),E.jsx(sr,{className:"mt-8 px-7",type:"submit",children:"Create Post"})]})})]})})})}function DD(){const{user:t}=Sr(),e=no(),n={id:"",userId:t==null?void 0:t.uid,userBio:"Pls update your bio...",photoURL:t!=null&&t.photoURL?t.photoURL:"",displayName:t!=null&&t.displayName?t.displayName:"Guest_User"},[r,i]=V.useState(n),[s,o]=V.useState([]),a=async h=>{try{const p=await xE(h),g=[];p.size>0?(p.forEach(y=>{const I=y.data(),P={id:y.id,...I};g.push(P)}),o(g)):console.log("No such document")}catch(p){console.log(p)}},l=()=>s.map(h=>E.jsxs("div",{className:"w-fit relative",children:[E.jsx("div",{className:"absolute top-0 left-0 bottom-0 right-0 bg-transparent hover:bg-slate-950 hover:bg-opacity-75 group transition-all duration-200",children:E.jsxs("div",{className:"size-full flex flex-col justify-center items-center gap-1",children:[E.jsx(Jg,{className:"hidden group-hover:block fill-white"}),E.jsxs("div",{className:"hidden group-hover:block text-white",children:[h.likes," likes"]})]})}),E.jsx("img",{src:`${h.photos[0].cdnUrl}-/progressive/yes/-/scale_crop/300x300/center/`})]},h.photos[0].uuid));V.useEffect(()=>{console.log("User:",t),t!=null&&(a(t.uid),u(t.uid))},[]);const u=async h=>{const p=await DR(h)||{};p.displayName&&i(p)},d=()=>{e("/edit-profile",{state:r})};return E.jsx(ru,{children:E.jsx("div",{className:"flex justify-center",children:E.jsxs("div",{className:"w-full max-w-3xl border",children:[E.jsx("h3",{className:"text-white text-center text-lg bg-slate-800 p-2",children:"Profile"}),E.jsxs("div",{className:"p-8 pb-4 border-b",children:[E.jsxs("div",{className:"flex flex-row items-center pb-2 mb-2",children:[E.jsx("div",{className:"mr-2",children:E.jsx("img",{className:"size-28 rounded-full border-2 border-slate-800 object-cover",src:r.photoURL?r.photoURL:Ue.avtDefault,alt:"avatar"})}),E.jsxs("div",{children:[E.jsx("div",{className:"text-xl ml-3",children:r.displayName?r.displayName:"Guest_User"}),E.jsx("div",{className:"text-xl ml-3",children:t!=null&&t.email?t==null?void 0:t.email:""})]})]}),E.jsx("div",{className:"mb-4",children:r.userBio}),E.jsx("div",{children:E.jsxs(sr,{onClick:d,children:[E.jsx(HR,{className:"size-4 mr-2"})," Edit Profile"]})})]}),E.jsxs("div",{className:"p-8",children:[E.jsx("h2",{className:"mb-5",children:"My Posts"}),E.jsx("div",{className:"grid md:grid-cols-3 grid-cols-2 gap-2",children:s?l():E.jsx("div",{children:"...loading"})})]})]})})})}function VD(){const{user:t}=Sr(),[e,n]=V.useState([]),r=async s=>{try{const o=await xE(s),a=[];o.size>0?(o.forEach(l=>{const u=l.data(),d={id:l.id,...u};a.push(d)}),n(a)):console.log("No such document")}catch(o){console.log(o)}};V.useEffect(()=>{console.log("User:",t),t!=null&&r(t.uid)},[]);const i=()=>e.map(s=>E.jsxs("div",{className:"w-fit relative",children:[E.jsx("div",{className:"absolute top-0 left-0 bottom-0 right-0 bg-transparent hover:bg-slate-950 hover:bg-opacity-75 group transition-all duration-200",children:E.jsxs("div",{className:"size-full flex flex-col justify-center items-center gap-1",children:[E.jsx(Jg,{className:"hidden group-hover:block fill-white"}),E.jsxs("div",{className:"hidden group-hover:block text-white",children:[s.likes," likes"]})]})}),E.jsx("img",{src:`${s.photos[0].cdnUrl}-/progressive/yes/-/scale_crop/300x300/center/`})]},s.photos[0].uuid));return E.jsx(ru,{children:E.jsx("div",{className:"flex justify-center",children:E.jsxs("div",{className:"w-full max-w-3xl border",children:[E.jsx("h3",{className:"text-lg text-center text-white bg-slate-800 p-2",children:"My Photos"}),E.jsx("div",{className:"p-8",children:E.jsx("div",{className:"grid md:col-cols-3 grid-cols-2 gap-4",children:e.length>0?i():E.jsx("div",{children:"...Loading"})})})]})})})}const Kb={logo:t=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",...t,children:[E.jsx("rect",{width:"256",height:"256",fill:"none"}),E.jsx("line",{x1:"208",y1:"128",x2:"128",y2:"208",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),E.jsx("line",{x1:"192",y1:"40",x2:"40",y2:"192",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]}),twitter:t=>E.jsx("svg",{...t,height:"23",viewBox:"0 0 1200 1227",width:"23",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"})}),gitHub:t=>E.jsx("svg",{viewBox:"0 0 438.549 438.549",...t,children:E.jsx("path",{fill:"currentColor",d:"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"})}),radix:t=>E.jsxs("svg",{viewBox:"0 0 25 25",fill:"none",...t,children:[E.jsx("path",{d:"M12 25C7.58173 25 4 21.4183 4 17C4 12.5817 7.58173 9 12 9V25Z",fill:"currentcolor"}),E.jsx("path",{d:"M12 0H4V8H12V0Z",fill:"currentcolor"}),E.jsx("path",{d:"M17 8C19.2091 8 21 6.20914 21 4C21 1.79086 19.2091 0 17 0C14.7909 0 13 1.79086 13 4C13 6.20914 14.7909 8 17 8Z",fill:"currentcolor"})]}),aria:t=>E.jsx("svg",{role:"img",viewBox:"0 0 24 24",fill:"currentColor",...t,children:E.jsx("path",{d:"M13.966 22.624l-1.69-4.281H8.122l3.892-9.144 5.662 13.425zM8.884 1.376H0v21.248zm15.116 0h-8.884L24 22.624Z"})}),npm:t=>E.jsx("svg",{viewBox:"0 0 24 24",...t,children:E.jsx("path",{d:"M1.763 0C.786 0 0 .786 0 1.763v20.474C0 23.214.786 24 1.763 24h20.474c.977 0 1.763-.786 1.763-1.763V1.763C24 .786 23.214 0 22.237 0zM5.13 5.323l13.837.019-.009 13.836h-3.464l.01-10.382h-3.456L12.04 19.17H5.113z",fill:"currentColor"})}),yarn:t=>E.jsx("svg",{viewBox:"0 0 24 24",...t,children:E.jsx("path",{d:"M12 0C5.375 0 0 5.375 0 12s5.375 12 12 12 12-5.375 12-12S18.625 0 12 0zm.768 4.105c.183 0 .363.053.525.157.125.083.287.185.755 1.154.31-.088.468-.042.551-.019.204.056.366.19.463.375.477.917.542 2.553.334 3.605-.241 1.232-.755 2.029-1.131 2.576.324.329.778.899 1.117 1.825.278.774.31 1.478.273 2.015a5.51 5.51 0 0 0 .602-.329c.593-.366 1.487-.917 2.553-.931.714-.009 1.269.445 1.353 1.103a1.23 1.23 0 0 1-.945 1.362c-.649.158-.95.278-1.821.843-1.232.797-2.539 1.242-3.012 1.39a1.686 1.686 0 0 1-.704.343c-.737.181-3.266.315-3.466.315h-.046c-.783 0-1.214-.241-1.45-.491-.658.329-1.51.19-2.122-.134a1.078 1.078 0 0 1-.58-1.153 1.243 1.243 0 0 1-.153-.195c-.162-.25-.528-.936-.454-1.946.056-.723.556-1.367.88-1.71a5.522 5.522 0 0 1 .408-2.256c.306-.727.885-1.348 1.32-1.737-.32-.537-.644-1.367-.329-2.21.227-.602.412-.936.82-1.08h-.005c.199-.074.389-.153.486-.259a3.418 3.418 0 0 1 2.298-1.103c.037-.093.079-.185.125-.283.31-.658.639-1.029 1.024-1.168a.94.94 0 0 1 .328-.06zm.006.7c-.507.016-1.001 1.519-1.001 1.519s-1.27-.204-2.266.871c-.199.218-.468.334-.746.44-.079.028-.176.023-.417.672-.371.991.625 2.094.625 2.094s-1.186.839-1.626 1.881c-.486 1.144-.338 2.261-.338 2.261s-.843.732-.899 1.487c-.051.663.139 1.2.343 1.515.227.343.51.176.51.176s-.561.653-.037.931c.477.25 1.283.394 1.71-.037.31-.31.371-1.001.486-1.283.028-.065.12.111.209.199.097.093.264.195.264.195s-.755.324-.445 1.066c.102.246.468.403 1.066.398.222-.005 2.664-.139 3.313-.296.375-.088.505-.283.505-.283s1.566-.431 2.998-1.357c.917-.598 1.293-.76 2.034-.936.612-.148.57-1.098-.241-1.084-.839.009-1.575.44-2.196.825-1.163.718-1.742.672-1.742.672l-.018-.032c-.079-.13.371-1.293-.134-2.678-.547-1.515-1.413-1.881-1.344-1.997.297-.5 1.038-1.297 1.334-2.78.176-.899.13-2.377-.269-3.151-.074-.144-.732.241-.732.241s-.616-1.371-.788-1.483a.271.271 0 0 0-.157-.046z",fill:"currentColor"})}),pnpm:t=>E.jsx("svg",{viewBox:"0 0 24 24",...t,children:E.jsx("path",{d:"M0 0v7.5h7.5V0zm8.25 0v7.5h7.498V0zm8.25 0v7.5H24V0zM8.25 8.25v7.5h7.498v-7.5zm8.25 0v7.5H24v-7.5zM0 16.5V24h7.5v-7.5zm8.25 0V24h7.498v-7.5zm8.25 0V24H24v-7.5z",fill:"currentColor"})}),react:t=>E.jsx("svg",{viewBox:"0 0 24 24",...t,children:E.jsx("path",{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z",fill:"currentColor"})}),tailwind:t=>E.jsx("svg",{viewBox:"0 0 24 24",...t,children:E.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z",fill:"currentColor"})}),google:t=>E.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:E.jsx("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),apple:t=>E.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:E.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701",fill:"currentColor"})}),paypal:t=>E.jsx("svg",{role:"img",viewBox:"0 0 24 24",...t,children:E.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.254-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.556.479l-1.187 7.527h-.506l-.24 1.516a.56.56 0 0 0 .554.647h3.882c.46 0 .85-.334.922-.788.06-.26.76-4.852.816-5.09a.932.932 0 0 1 .923-.788h.58c3.76 0 6.705-1.528 7.565-5.946.36-1.847.174-3.388-.777-4.471z",fill:"currentColor"})}),spinner:t=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:E.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})},UD={email:"",password:""};function FD({}){const[t,e]=V.useState(UD),{googleSignIn:n,logIn:r}=Sr(),i=no(),s=async a=>{a.preventDefault();try{await r(t.email,t.password),i("/"),console.log("The user info: ",t)}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await n(),i("/")}catch(l){console.log("Error: ",l)}};return E.jsx("div",{className:"w-full h-screen bg-slate-800",children:E.jsx("div",{className:"container h-full flex items-center mx-auto p-6",children:E.jsxs("div",{className:"w-full flex justify-center items-center",children:[E.jsx("div",{className:"w-2/3 p-6 lg:block hidden",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx("img",{className:"w-2/3 h-auto aspect-video object-cover rounded-3xl place-self-end",src:Ue.img2}),E.jsx("img",{className:"w-2/5 h-auto aspect-auto object-cover rounded-3xl",src:Ue.img1}),E.jsx("img",{className:"w-2/5 h-auto aspect-auto object-cover rounded-3xl place-self-end",src:Ue.img4}),E.jsx("img",{className:"w-2/3 h-auto aspect-video object-cover rounded-3xl",src:Ue.img3})]})}),E.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:E.jsx(lf,{children:E.jsxs("form",{onSubmit:s,children:[E.jsxs(cf,{className:"space-y-1",children:[E.jsx(uf,{className:"text-2xl text-center mb-4",children:"PhotoGram"}),E.jsx(Zg,{children:"Enter your email below to create your account"})]}),E.jsxs(df,{className:"grid gap-4",children:[E.jsx("div",{className:"grid",children:E.jsxs(sr,{variant:"outline",onClick:o,children:[E.jsx(Kb.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("span",{className:"w-full border-t"})}),E.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:E.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),E.jsxs("div",{className:"grid gap-2",children:[E.jsx(rr,{htmlFor:"email",children:"Email address"}),E.jsx(Qr,{id:"email",type:"email",placeholder:"dipesh@example.com",value:t.email,onChange:a=>e({...t,email:a.target.value})})]}),E.jsxs("div",{className:"grid gap-2",children:[E.jsx(rr,{htmlFor:"password",children:"Password"}),E.jsx(Qr,{id:"password",type:"password",placeholder:"Password",value:t.password,onChange:a=>e({...t,password:a.target.value})})]})]}),E.jsxs(hf,{className:"flex flex-col",children:[E.jsx(sr,{className:"w-full",type:"submit",children:"Login"}),E.jsxs("p",{className:"mt-3 text-sm text-center",children:["Do not have an account? ",E.jsx(Tc,{className:"underline",to:"/signup",children:"Sign Up"})]})]})]})})})]})})})}const $D={email:"",password:"",confirmPassword:""};function jD({}){const[t,e]=V.useState($D),{googleSignIn:n,signUp:r}=Sr(),i=no(),s=async a=>{a.preventDefault();try{await r(t.email,t.password),i("/"),console.log("The user info: ",t)}catch(l){console.log("Error: ",l)}},o=async a=>{a.preventDefault();try{await n(),i("/")}catch(l){console.log("Error: ",l)}};return E.jsx("div",{className:"w-full h-screen bg-slate-800",children:E.jsx("div",{className:"container h-full flex items-center mx-auto p-6",children:E.jsxs("div",{className:"w-full flex justify-center items-center",children:[E.jsx("div",{className:"w-2/3 p-6 lg:block hidden",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx("img",{className:"w-2/3 h-auto aspect-video object-cover rounded-3xl place-self-end",src:Ue.img2}),E.jsx("img",{className:"w-2/5 h-auto aspect-auto object-cover rounded-3xl",src:Ue.img1}),E.jsx("img",{className:"w-2/5 h-auto aspect-auto object-cover rounded-3xl place-self-end",src:Ue.img4}),E.jsx("img",{className:"w-2/3 h-auto aspect-video object-cover rounded-3xl",src:Ue.img3})]})}),E.jsx("div",{className:"max-w-sm rounded-xl border bg-card text-card-foreground shadow-sm",children:E.jsx(lf,{children:E.jsxs("form",{onSubmit:s,children:[E.jsxs(cf,{className:"space-y-1",children:[E.jsx(uf,{className:"text-2xl text-center mb-4",children:"PhotoGram"}),E.jsx(Zg,{children:"Enter your email below to create your account"})]}),E.jsxs(df,{className:"grid gap-4",children:[E.jsx("div",{className:"grid",children:E.jsxs(sr,{variant:"outline",onClick:o,children:[E.jsx(Kb.google,{className:"mr-2 h-4 w-4"}),"Google"]})}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("span",{className:"w-full border-t"})}),E.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:E.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),E.jsxs("div",{className:"grid gap-2",children:[E.jsx(rr,{htmlFor:"email",children:"Email address"}),E.jsx(Qr,{id:"email",type:"email",placeholder:"dipesh@example.com",value:t.email,onChange:a=>e({...t,email:a.target.value})})]}),E.jsxs("div",{className:"grid gap-2",children:[E.jsx(rr,{htmlFor:"password",children:"Password"}),E.jsx(Qr,{id:"password",type:"password",placeholder:"Password",value:t.password,onChange:a=>e({...t,password:a.target.value})})]}),E.jsxs("div",{className:"grid gap-2",children:[E.jsx(rr,{htmlFor:"confirmpassword",children:"Confirm password"}),E.jsx(Qr,{id:"confirmpassword",type:"password",placeholder:"Confirm password",value:t.confirmPassword,onChange:a=>e({...t,confirmPassword:a.target.value})})]})]}),E.jsxs(hf,{className:"flex flex-col",children:[E.jsx(sr,{className:"w-full",type:"submit",children:"Sign Up"}),E.jsxs("p",{className:"mt-3 text-sm text-center",children:["Already have an account? ",E.jsx(Tc,{className:"underline",to:"/login",children:"Login"})]})]})]})})})]})})})}function bs({}){return E.jsx("div",{className:"text-2xl font-bold",children:"Error"})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function zD(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,[])).next())})}function BD(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jo=function(){return jo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jo.apply(this,arguments)},Qb=function(t){return{loading:t==null,value:t}},HD=function(){return function(t,e){switch(e.type){case"error":return jo(jo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return Qb(e.defaultValue);case"value":return jo(jo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},WD=function(t){var e=t?t():void 0,n=V.useReducer(HD(),Qb(e)),r=n[0],i=n[1],s=V.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=V.useCallback(function(l){i({type:"error",error:l})},[]),a=V.useCallback(function(l){i({type:"value",value:l})},[]);return V.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},qD=function(t,e){var n=WD(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return V.useEffect(function(){var l=U4(t,function(u){return zD(void 0,void 0,void 0,function(){var d;return BD(this,function(h){switch(h.label){case 0:return[3,4];case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),s(d),[3,4];case 4:return o(u),[2]}})})},s);return function(){l()}},[t]),[a,i,r]};function GD(){const t=X4(),[e,n]=qD(t),r=ls();return n?E.jsx("div",{children:"...loading"}):e?E.jsx(rS,{}):E.jsx(nS,{to:"/login",state:{from:r}})}function KD(){const{user:t,updateProfileInfo:e}=Sr(),n=ls(),r=no(),{id:i,userId:s,userBio:o,displayName:a,photoURL:l}=n.state;console.log("Location: ",n.state);const[u,d]=V.useState({userId:s,userBio:o,displayName:a,photoURL:l}),[h,p]=V.useState({files:[]}),g=async y=>{y.preventDefault();try{if(i){const P=await VR(i,u);console.log("The UPDATE user profile is: ",i),console.log("The UPDATE user profile is: ",P)}else{const P=await MR(u);console.log("The create user profile is: ",P)}const I={user:t,displayName:u.displayName,photoURL:u.photoURL};e(I),QR(I),r("/profile")}catch(I){console.log(I)}};return console.log("upload avt: ",h),V.useEffect(()=>{h.files.length>0&&d({...u,photoURL:h.files[0].cdnUrl||""})},[h]),E.jsx(ru,{children:E.jsx("div",{className:"flex justify-center",children:E.jsxs("div",{className:"border max-w-3xl w-full",children:[E.jsx("h3",{className:"bg-slate-800 text-white text-center text-lg p-2",children:"Edit Profile"}),E.jsx("div",{className:"p-8",children:E.jsxs("form",{onSubmit:g,children:[E.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[E.jsx(rr,{htmlFor:"avatar",children:"Avatar Picture"}),E.jsx("div",{children:h.files.length>0?E.jsx("img",{src:h.files[0].cdnUrl,alt:"avatar",className:"size-28 rounded-full border-2 border-slate-800 object-cover"}):E.jsx("img",{src:u.photoURL?u.photoURL:Ue.avtDefault,alt:"avatar",className:"size-28 rounded-full border-2 border-slate-800 object-cover"})}),E.jsx(Hb,{fileEntry:h,onChange:p,preview:!1})]}),E.jsxs("div",{className:"space-y-5",children:[E.jsxs("div",{className:"flex flex-col space-y-3",children:[E.jsx(rr,{htmlFor:"displayName",children:"Display Name"}),E.jsx(Qr,{id:"displayName",placeholder:"Enter your username",value:u.displayName,onChange:y=>d({...u,displayName:y.target.value})})]}),E.jsxs("div",{className:"flex flex-col space-y-3",children:[E.jsx(rr,{htmlFor:"userBio",children:"User bio"}),E.jsx(Qr,{id:"userBio",placeholder:"Enter your user bio",value:u.userBio,onChange:y=>d({...u,userBio:y.target.value})})]})]}),E.jsxs("div",{className:"space-x-2",children:[E.jsx(sr,{className:"mt-8 px-7",type:"submit",children:"Update Profile"}),E.jsx(sr,{className:"mt-8 px-7",variant:"destructive",onClick:()=>r("/profile"),children:"Cancel"})]})]})})]})})})}const QD=dS([{element:E.jsx(GD,{}),children:[{path:"/",element:E.jsx(ZR,{}),errorElement:E.jsx(bs,{})},{path:"/create-post",element:E.jsx(MD,{}),errorElement:E.jsx(bs,{})},{path:"/profile",element:E.jsx(DD,{}),errorElement:E.jsx(bs,{})},{path:"/edit-profile",element:E.jsx(KD,{}),errorElement:E.jsx(bs,{})},{path:"/my-photos",element:E.jsx(VD,{}),errorElement:E.jsx(bs,{})}]},{path:"/login",element:E.jsx(FD,{}),errorElement:E.jsx(bs,{})},{path:"/signup",element:E.jsx(jD,{}),errorElement:E.jsx(bs,{})}]);function XD(){return E.jsx(CR,{children:E.jsx(wS,{router:QD})})}kp.createRoot(document.getElementById("root")).render(E.jsx(Ln.StrictMode,{children:E.jsx(XD,{})}));
